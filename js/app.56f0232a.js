(function(t){function e(e){for(var r,i,o=e[0],c=e[1],u=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&m.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(m.length)m.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=n[0]))}return t}var r={},a={app:0},s=[];function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=r,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var l=c;s.push([1,"chunk-vendors"]),n()})({0:function(t,e){},"034f":function(t,e,n){"use strict";var r=n("f8a4"),a=n.n(r);a.a},"0632":function(t,e,n){"use strict";(function(t){n("053b"),n("fe8a"),n("b449");var r=n("5d83"),a=n("3a5e");e["a"]={name:"PostOrder",data:function(){return{db:{},content:"",name:"",contact:"",bonus:"",hour:"",minute:"",isLoading:!1,flag:!1}},methods:{post:function(){this.flag=!1,this.isLoading=!0;var e=this.$store.state.nickname,n=this.$store.state.bountyinstance,a=this.$store.state.addr,s=this.name,i=this.getNum(),o=this.bonus,c=this.contact,u=this.content,l=this.hour,d=this.minute,m=this.getTimeStamp(),p=this;function f(){return h.apply(this,arguments)}function h(){return h=Object(r["a"])(regeneratorRuntime.mark((function r(){var f,h,g,v,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return f=p.web3.utils.toWei(o,"ether"),h={name:s,nickname:e,taskNumber:i,contact:c,content:u,bonus:f,created:m},g=t.from(JSON.stringify(h)),r.next=5,p.ipfs.add(g);case 5:return v=r.sent,b=v[0].hash,r.next=9,n.setTask(b,f,l,d,{from:a});case 9:r.sent,p.$store.commit("saveBountys",[]),p.$router.push({path:"/bounty"});case 12:case"end":return r.stop()}}),r)}))),h.apply(this,arguments)}f()},uploadimg:function(t,e){this.imgAdd(t,e)}},components:{Loading:a["a"]},mounted:function(){var t=this,e=this.$store.state.bountyinstance;this.$store.state.addr;function n(){return a.apply(this,arguments)}function a(){return a=Object(r["a"])(regeneratorRuntime.mark((function n(){var r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.$store.state.nickname){n.next=16;break}if(t.flag=!0,0!==Object.keys(e).length){n.next=15;break}return n.next=5,t.axios.get("Bounty.json");case 5:return r=n.sent,a=t.TruffleContract(r.data),a.setProvider(t.web3.currentProvider),n.next=10,a.deployed();case 10:s=n.sent,t.$store.commit("saveBountyInstance",s),t.flag=!0,n.next=16;break;case 15:t.flag=!0;case 16:case"end":return n.stop()}}),n)}))),a.apply(this,arguments)}n()}}}).call(this,n("fd40").Buffer)},"068d":function(t,e,n){},"0f62":function(t,e,n){},1:function(t,e,n){t.exports=n("56d7")},10:function(t,e){},"10f6":function(t,e,n){},1343:function(t,e,n){"use strict";var r=n("068d"),a=n.n(r);a.a},"1bb1":function(t,e,n){},2:function(t,e){},"21d6":function(t,e,n){},"22dc":function(t,e,n){"use strict";(function(t){n("fe59"),n("fe8a"),n("08ba"),n("b449");var r=n("5d83"),a=n("3a5e");e["a"]={name:"Task",data:function(){return{task:{},reason:"",hunterContact:"",isLoading:!1,isApplied:!1,isPromoter:!1}},methods:{apply:function(e){var n=this,a=this.$store.state.bountyinstance,s=this.$store.state.addr,i=this.reason,o=this.hunterContact;function c(){return u.apply(this,arguments)}function u(){return u=Object(r["a"])(regeneratorRuntime.mark((function r(){var c,u,l,d,m;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return c={reason:i,hunterContact:o},u=t.from(JSON.stringify(c)),r.next=4,n.ipfs.add(u);case 4:return l=r.sent,d=l[0].hash,r.next=8,a.applyTask(e,d,{from:s});case 8:m=r.sent,console.log(555,m),n.isApplied=!0,n.$store.commit("saveBountys",[]);case 12:case"end":return r.stop()}}),r)}))),u.apply(this,arguments)}c()},taskFilter:function(){var t=this,e=this.$store.state.bountys,n=this.$route.params.taskNumber;e.forEach((function(e){e.taskNumber===n&&(t.task=e)}))},getTaskDone:function(){var t=this,e=this.$store.state.addr,n=this.task.hunters;n.forEach((function(n){n.toLowerCase()==e&&(console.log(566,"已申请"),t.isApplied=!0)})),this.task.promoter.toLowerCase()===this.$store.state.addr&&(this.isPromoter=!0)}},components:{Loading:a["a"]},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function n(){return a.apply(this,arguments)}function a(){return a=Object(r["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=12;break}return console.log(888,"instance为空，是刷新页面"),n.next=4,t.getBountyInstance();case 4:return r=n.sent,n.next=7,t.getTasks(r);case 7:t.taskFilter(),t.getTaskDone(),t.isLoading=!1,n.next=25;break;case 12:if(0!=t.$store.state.bountys){n.next=21;break}return console.log(6647,"如果悬赏更新！"),n.next=16,t.getTasks(e);case 16:t.taskFilter(),t.getTaskDone(),t.isLoading=!1,n.next=25;break;case 21:console.log(22333,"啥也没干！"),t.taskFilter(),t.getTaskDone(),t.isLoading=!1;case 25:case"end":return n.stop()}}),n)}))),a.apply(this,arguments)}n()},filters:{}}}).call(this,n("fd40").Buffer)},"23b6":function(t,e,n){"use strict";var r=n("a3d0"),a=n.n(r);a.a},2874:function(t,e,n){"use strict";var r=n("ada1"),a=n.n(r);a.a},"2e05":function(t,e,n){},3:function(t,e){},3915:function(t,e,n){},3985:function(t,e,n){"use strict";var r=n("2e05"),a=n.n(r);a.a},"3a5e":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading"})},a=[],s={name:"Loading"},i=s,o=(n("7f16"),n("4023")),c=Object(o["a"])(i,r,a,!1,null,"38280d7f",null);e["a"]=c.exports},"3f38":function(t,e,n){},4:function(t,e){},"441f":function(t,e,n){},"45ab":function(t,e,n){"use strict";var r=n("fda1"),a=n.n(r);a.a},"45d1":function(t,e,n){"use strict";var r=n("9907"),a=n.n(r);a.a},"4d61":function(t,e,n){},"4e3e":function(t,e,n){"use strict";var r=n("441f"),a=n.n(r);a.a},5:function(t,e){},"51d0":function(t,e,n){"use strict";var r=n("c819"),a=n.n(r);a.a},5611:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e35a"),n("0d7a"),n("6db4"),n("a133"),n("ed0d"),n("f09c"),n("e117");var r=n("0261"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("b-navbar",{attrs:{toggleable:"lg",type:"light",variant:"info",id:"navmanu"}},[r("b-navbar-brand",{on:{click:t.backtoindex}},[r("img",{staticClass:"d-inline-block align-top",attrs:{src:n("d7a1"),alt:"EtherLark"}}),t._v(" 测试网 ")]),r("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),r("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[r("b-navbar-nav",{staticClass:"ml-auto"},[r("router-link",{attrs:{to:"/"}},[t._v("文章")]),r("router-link",{attrs:{to:"/market"}},[t._v("集市")]),r("router-link",{attrs:{to:"/bounty"}},[t._v("悬赏")]),t.$store.state.nickname?r("div",[r("div",{attrs:{id:"drop2"}},[r("b-dropdown",{staticClass:"m-2 nickname",attrs:{id:"dropdown-grouped",text:"发布",variant:"transparent"}},[r("router-link",{attrs:{to:"/post"}},[t._v("发布文章")]),r("b-dropdown-divider"),r("router-link",{attrs:{to:"/postorder"}},[t._v("发布商品")]),r("b-dropdown-divider"),r("router-link",{attrs:{to:"/postbounty"}},[t._v("发布悬赏")])],1)],1)]):t._e(),t.$store.state.nickname?r("div",[r("div",{attrs:{id:"drop"}},[r("b-dropdown",{staticClass:"m-2 nickname",attrs:{id:"dropdown-grouped",text:"@"+t.$store.state.nickname,variant:"transparent"}},[r("b-dropdown-item-button",{on:{click:t.myarticles}},[t._v(" 我的文章 ")]),r("b-dropdown-divider"),r("b-dropdown-item-button",{on:{click:t.myseller}},[t._v(" 我是卖家 ")]),r("b-dropdown-divider"),r("b-dropdown-item-button",{on:{click:t.mybuyer}},[t._v(" 我是买家 ")]),r("b-dropdown-divider"),r("b-dropdown-item-button",{on:{click:t.mybounty}},[t._v(" 我的悬赏 ")]),r("b-dropdown-divider"),r("b-dropdown-item-button",{on:{click:t.mytask}},[t._v(" 我的任务 ")]),r("b-dropdown-divider"),r("b-dropdown-item-button",{on:{click:t.mywallet}},[t._v(" 我的钱包 ")]),r("b-dropdown-divider"),t.ownerLower===t.$store.state.addr?r("div",[r("b-dropdown-item-button",{on:{click:t.admin}},[t._v(" 我是界主 ")]),r("b-dropdown-divider")],1):t.superadminsLower.indexOf(t.$store.state.addr)>-1?r("div",[r("b-dropdown-item-button",{on:{click:t.admin}},[t._v(" 我是太上 ")]),r("b-dropdown-divider")],1):t.adminsLower.indexOf(t.$store.state.addr)>-1?r("div",[r("b-dropdown-item-button",{on:{click:t.admin}},[t._v(" 我是长老 ")]),r("b-dropdown-divider")],1):r("div"),r("b-dropdown-item-button",{on:{click:t.logout}},[t._v(" 注销 ")])],1)],1)]):r("div",[r("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1)],1)],1)],1),r("router-view"),r("Footer")],1)},s=[],i=(n("b449"),n("5d83")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"myfooter"},[n("b-container",{staticClass:"bv-example-row"},[n("b-row",[n("b-col",[n("router-link",{attrs:{to:"/about"}},[t._v("关于百灵界")])],1),n("b-col",[n("a",{attrs:{target:"_blank",href:"https://github.com/etherjiang/etherjiang.github.io"}},[t._v("Github")])]),n("b-col",[n("a",{attrs:{target:"_blank",href:"https://starnote.github.io/#/@lemooljiang/qqe4s"}},[t._v("开发手册")])])],1),n("b-row",[n("b-col",[n("a",{attrs:{target:"_blank",href:"https://steemjiang.com/trend/@lemooljiang/0t9hr"}},[t._v("新手指南")])]),n("b-col",[n("a",{attrs:{target:"_blank",href:"https://github.com/ethereum/go-ethereum"}},[t._v("Go-ethereum")])]),n("b-col",[n("a",{attrs:{target:"_blank",href:"https://github.com/bekatom/awesome-ethereum"}},[t._v("AwesomeEth")])])],1)],1),n("p",{staticClass:"info"},[t._v("Copyright©2020 版权所有。 百灵界是一个基于以太坊的区块链价值交易系统。")])],1)},c=[],u={name:"Footer"},l=u,d=(n("2874"),n("4023")),m=Object(d["a"])(l,o,c,!1,null,"dc205b68",null),p=m.exports,f={name:"App",data:function(){return{parmsg:"这是父数据",owner:"",superadmins:[],admins:[],ownerLower:"",superadminsLower:[],adminsLower:[]}},methods:{backtoindex:function(){this.$router.push({path:"/"})},myarticles:function(){this.$router.push({path:"/myarticles"})},myseller:function(){this.$router.push({path:"/myseller"})},mybuyer:function(){this.$router.push({path:"/mybuyer"})},mybounty:function(){this.$router.push({path:"/mybounty"})},mytask:function(){this.$router.push({path:"/mytask"})},mywallet:function(){this.$router.push({path:"/wallet"})},admin:function(){this.$router.push({path:"/admin"})},getAdmin:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$store.state.accessinstance,e.next=3,n.getAdmins();case 3:r=e.sent,a={},t.owner=a.owner=r[0],t.superadmins=a.superadmins=r[1],t.admins=a.admins=r[2],t.$store.commit("saveAdmins",a);case 9:case"end":return e.stop()}}),e)})))()},addrToLower:function(){var t={};this.ownerLower=t.ownerLower=this.owner.toLowerCase();for(var e=0;e<this.superadmins.length;e++)this.superadminsLower.push(this.superadmins[e].toLowerCase());t.superadminsLower=this.superadminsLower;for(var n=0;n<this.admins.length;n++)this.adminsLower.push(this.admins[n].toLowerCase());t.adminsLower=this.adminsLower,this.$store.commit("saveAdminsLower",t)},logout:function(){this.$store.commit("clearUser")}},components:{Footer:p},mounted:function(){var t=this;function e(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAccessInstance();case 2:return e.next=4,t.getAdmin();case 4:t.addrToLower(),t.isLoading=!1,t.flag=!0;case 7:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}e()}},h=f,g=(n("034f"),Object(d["a"])(h,a,s,!1,null,null,null)),v=g.exports,b=n("1860"),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("h2",[t._v("用户登录")]),n("div",[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{id:"inline-form-input-name",placeholder:"设置呢称(任意长度的任意字符，不能为空)"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),n("br"),t._v(" 地址： "+t._s(t.addr)+" "),n("div",{staticClass:"loginbtn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.login}},[t._v("登录")])],1)],1),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},w=[],_=n("3a5e"),y={name:"Login",data:function(){return{nickname:"",addr:"",isLoading:!1,flag:!0}},methods:{login:function(){this.flag=!1,this.isLoading=!0,""!==this.nickname&&""!==this.addr?(this.$store.commit("saveUser",{nickname:this.nickname,addr:this.addr}),this.$router.push({path:"/"})):(alert("呢称或地址不能为空！"),this.flag=!0)}},components:{Loading:_["a"]},mounted:function(){var t=this;function e(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.enable();case 2:n=e.sent,t.addr=n[0],t.flag=!0;case 5:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}e()}},x=y,C=(n("f7ca"),Object(d["a"])(x,k,w,!1,null,"0490a9c8",null)),$=C.exports,L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[t.ownerLower===t.$store.state.addr?n("h3",[t._v("欢迎您，界主大人！")]):t.superadminsLower.indexOf(t.$store.state.addr)>-1?n("h3",[t._v("欢迎您，太上大人！")]):t.adminsLower.indexOf(t.$store.state.addr)>-1?n("h3",[t._v("欢迎您，长老大人！")]):n("h3"),t.flag?n("div",[t._v(" 呢称： "+t._s(t.$store.state.nickname)),n("br"),t._v(" 地址： "+t._s(t.$store.state.addr)+" "),n("br"),t.ownerLower===t.$store.state.addr?n("div",[n("br"),t._v(" 设置太上: "),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"太上地址"},model:{value:t.newSuperAdmin,callback:function(e){t.newSuperAdmin=e},expression:"newSuperAdmin"}}),n("div",{staticClass:"loginbtn"},[n("span",{staticStyle:{"margin-right":"1rem"}},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.setSuperAdmin}},[t._v("确认添加太上")])],1),n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.delSuperAdmin}},[t._v("删除太上")])],1)],1):t._e(),n("br"),n("br"),t.ownerLower===t.$store.state.addr||t.superadminsLower.indexOf(t.$store.state.addr)>-1?n("div",[n("div",[t._v(" 设置长老: "),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"长老地址"},model:{value:t.newAdmin,callback:function(e){t.newAdmin=e},expression:"newAdmin"}}),n("div",{staticClass:"loginbtn"},[n("span",{staticStyle:{"margin-right":"1rem"}},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.setAdmin}},[t._v("确认添加长老")])],1),n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.delAdmin}},[t._v("删除长老")])],1)],1),t.ownerLower===t.$store.state.addr?n("div",[n("br"),n("br"),t._v(" 灵石总量： "+t._s(t.totalSupply)+" "),n("br"),t._v(" 设置增发: "),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"设置增发量"},model:{value:t.addAmount,callback:function(e){t.addAmount=e},expression:"addAmount"}}),n("div",{staticClass:"loginbtn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.addSupply}},[t._v("确认增发")])],1)],1):t._e(),n("br"),n("br"),n("div",[t._v(" 兑换率： "+t._s(t.price)+" （1以太币 = "+t._s(t.price)+"灵石 ）"),n("br"),t._v(" 重设汇率: "),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"输入新汇率"},model:{value:t.newPrice,callback:function(e){t.newPrice=e},expression:"newPrice"}}),n("div",{staticClass:"loginbtn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.setPrice}},[t._v("重设汇率 ")])],1)],1),n("br"),n("br")]):t._e(),n("div",{staticStyle:{width:"80%"}},[n("h4",[t._v("界会名单：")]),t._v(" 界主："+t._s(t.$store.state.admins.owner)),n("br"),n("br"),t._v(" 太上："+t._s(t.$store.state.admins.superadmins)),n("br"),n("br"),t._v(" 长老："+t._s(t.$store.state.admins.admins)),n("br")])]):t._e(),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},O=[],S=(n("fe8a"),{name:"Admin",data:function(){return{owner:"",superadmins:[],admins:[],ownerLower:"",superadminsLower:[],adminsLower:[],newSuperAdmin:"",newAdmin:"",isLoading:!1,flag:!1,addAmount:"",price:"",newPrice:"",totalSupply:""}},methods:{getAdmin:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$store.state.accessinstance,e.next=3,n.getAdmins();case 3:r=e.sent,a={},t.owner=a.owner=r[0],t.superadmins=a.superadmins=r[1],t.admins=a.admins=r[2],t.$store.commit("saveAdmins",a);case 9:case"end":return e.stop()}}),e)})))()},addrToLower:function(){var t={};this.ownerLower=t.ownerLower=this.owner.toLowerCase();for(var e=0;e<this.superadmins.length;e++)this.superadminsLower.push(this.superadmins[e].toLowerCase());t.superadminsLower=this.superadminsLower;for(var n=0;n<this.admins.length;n++)this.adminsLower.push(this.admins[n].toLowerCase());t.adminsLower=this.adminsLower,this.$store.commit("saveAdminsLower",t)},getAdminLower:function(){var t=this.$store.state.adminsLower;this.ownerLower=t.ownerLower,this.superadminsLower=t.superadminsLower,this.adminsLower=t.adminsLower},setSuperAdmin:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.flag=!1,t.isLoading=!0,n=t.$store.state.accessinstance,r=t.$store.state.addr,e.next=6,n.addSuperAdmin(t.newSuperAdmin,{from:r});case 6:return a=e.sent,console.log(128999,a),e.next=10,t.getAdmin();case 10:t.addrToLower(),t.newSuperAdmin="",t.isLoading=!1,t.flag=!0;case 14:case"end":return e.stop()}}),e)})))()},delSuperAdmin:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.flag=!1,t.isLoading=!0,n=t.$store.state.accessinstance,r=t.$store.state.addr,e.next=6,n.delSuperAdmin(t.newSuperAdmin,{from:r});case 6:return a=e.sent,console.log(128999,a),e.next=10,t.getAdmin();case 10:t.addrToLower(),t.newSuperAdmin="",t.isLoading=!1,t.flag=!0;case 14:case"end":return e.stop()}}),e)})))()},setAdmin:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.flag=!1,t.isLoading=!0,n=t.$store.state.accessinstance,r=t.$store.state.addr,e.next=6,n.addAdmin(t.newAdmin,{from:r});case 6:return a=e.sent,console.log(22299,a),e.next=10,t.getAdmin();case 10:t.addrToLower(),t.newAdmin="",t.isLoading=!1,t.flag=!0;case 14:case"end":return e.stop()}}),e)})))()},delAdmin:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.flag=!1,t.isLoading=!0,n=t.$store.state.accessinstance,r=t.$store.state.addr,e.next=6,n.delAdmins(t.newAdmin,{from:r});case 6:return a=e.sent,console.log(22299,a),e.next=10,t.getAdmin();case 10:t.addrToLower(),t.newAdmin="",t.isLoading=!1,t.flag=!0;case 14:case"end":return e.stop()}}),e)})))()},addSupply:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.flag=!1,t.isLoading=!0,n=t.addAmount,r=t.web3.utils.toWei(n,"ether"),a=t.$store.state.addr,s=t.$store.state.walletinstance,e.next=8,s.addSupply(r,{from:a});case 8:return e.next=10,t.getBalance();case 10:return e.next=12,t.getExchangeDone();case 12:t.addAmount="",t.isLoading=!1,t.flag=!0;case 15:case"end":return e.stop()}}),e)})))()},setPrice:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.flag=!1,t.isLoading=!0,n=t.$store.state.addr,r=t.$store.state.exchangeinstance,e.next=6,r.setPrice(t.newPrice,{from:n});case 6:return e.next=8,t.getBalance();case 8:return e.next=10,t.getExchangeDone();case 10:t.newPrice="",t.isLoading=!1,t.flag=!0;case 13:case"end":return e.stop()}}),e)})))()},getBalance:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$store.state.walletinstance,e.next=3,n.totalSupply();case 3:r=e.sent,t.totalSupply=t.weiToEth(r);case 5:case"end":return e.stop()}}),e)})))()},getExchangeDone:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$store.state.exchangeinstance,e.next=3,n.getMessage();case 3:r=e.sent,t.price=r[1];case 5:case"end":return e.stop()}}),e)})))()}},components:{Loading:_["a"]},mounted:function(){var t=this,e=this.$store.state.walletinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=14;break}return n.next=3,t.getWalletInstance();case 3:return n.next=5,t.getExchangeInstance();case 5:return t.getAdminLower(),n.next=8,t.getBalance();case 8:return n.next=10,t.getExchangeDone();case 10:t.isLoading=!1,t.flag=!0,n.next=22;break;case 14:return console.log(22333,"啥也没干！"),t.getAdminLower(),n.next=18,t.getBalance();case 18:return n.next=20,t.getExchangeDone();case 20:t.isLoading=!1,t.flag=!0;case 22:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()}}),j=S,A=(n("a55b"),Object(d["a"])(j,L,O,!1,null,"f76a1d02",null)),R=A.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"请输入标题或关键词"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._l(t.search(t.keywords),(function(e){return n("div",{staticClass:"content"},[n("router-link",{attrs:{to:"/article/"+e.permlink}},[n("b-img",{staticClass:"courseimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),n("div",{staticClass:"title"},[n("router-link",{attrs:{to:"/article/"+e.permlink}},[n("span",{staticStyle:{"font-size":"1.2rem"}},[t._v(t._s(e.title))]),n("br")])],1),n("p",{staticClass:"posttime"},[t._v(" @"+t._s(e.nickname)+"("+t._s(t._f("formatAddr")(e.addr))+") "),n("span",{staticStyle:{"margin-left":"1rem"}},[t._v(" "+t._s(t.timeFormat(e.created)))])]),n("p",{staticClass:"text"},[t._v(t._s(t._f("abstractFn")(e.body))+" ......")])],1)})),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],2)},T=[],E=(n("dbb3"),n("fe59"),n("b130"),n("77ad"),n("90aa"),n("f4e3"),n("5e9f"),n("08ba"),{name:"Index",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.articles;return e.filter((function(e){if(e.title.includes(t)||e.keywords.includes(t))return e}))},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,n){n.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=n[n.length-1].author,t.permlink=n[n.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==n.length&&alert("没有更多了！")}))}},components:{Loading:_["a"]},mounted:function(){var t=this,e=this.$store.state.postinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=10;break}return console.log(777,"instance为空，是刷新页面"),n.next=4,t.getPostInstance();case 4:return e=n.sent,n.next=7,t.getArticles(e);case 7:t.isLoading=!1,n.next=19;break;case 10:if(0!=t.$store.state.articles){n.next=17;break}return console.log(666,"如果文章更新！"),n.next=14,t.getArticles(e);case 14:t.isLoading=!1,n.next=19;break;case 17:console.log(2222,"啥也没干！"),t.isLoading=!1;case 19:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{changeTime:function(t){var e=new Date(1e3*t),n=e.getFullYear()+"-",r=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",s=e.getHours()+":",i=e.getMinutes()+":",o=e.getSeconds();return n+r+a+s+i+o},formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,n=t.match(e);if(null!==n)return n[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,180)}return""}}}),P=E,I=(n("6e51"),Object(d["a"])(P,F,T,!1,null,"d138d7fc",null)),D=I.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"content"}},[n("h1",[t._v(t._s(t.article.title))]),n("p",{staticClass:"posttime"},[t._v(" @"+t._s(t.article.nickname)+"("+t._s(t.article.addr)+") "),n("span",{staticStyle:{"margin-left":"1rem"}},[t._v(" "+t._s(t.timeFormat(t.article.created)))])]),n("div",{attrs:{id:"textclass"}},[n("mavon-editor",{attrs:{value:t.article.body+"<br><br>"+t.keywords+t.article.keywords.join("　"),subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}})],1),n("br"),t.isMyself?t._e():n("div",[t.votedFlag?n("div",{staticClass:"vote"},[t._v(" 已赞赏 ")]):n("div",{staticClass:"vote"},[t._v(" 赞赏： "),n("span",{staticStyle:{"margin-right":"1rem"}},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.voteLevel1(t.article.uid)}}},[t._v(t._s(t.level1)+" 灵石")])],1),n("span",{staticStyle:{"margin-right":"1rem"}},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.voteLevel2(t.article.uid)}}},[t._v(t._s(t.level2)+" 灵石")])],1),n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.voteLevel3(t.article.uid)}}},[t._v(t._s(t.level3)+" 灵石")])],1)])])},B=[],M={name:"Trend",data:function(){return{db:{},article:{},data:"",text:"",keywords:"关键词：　",votedFlag:!1,isMyself:!1,level1:"",level2:"",level3:""}},methods:{articleFilter:function(){var t=this,e=this.$store.state.articles,n=this.$route.params.permlink;e.forEach((function(e){e.permlink===n&&(t.article=e)}))},getArticleDone:function(){var t=this,e=this,n=this.article.voted;console.log(56,n);var r=this.$store.state.addr;n.length>0&&n.forEach((function(e){e.toLowerCase()==r&&(t.votedFlag=!0,console.log(333,"已点赞"))})),this.article.addr.toLowerCase()==r&&(this.isMyself=!0,console.log(88899,"是我本人！"));var a=this.$store.state.postinstance;function s(){return o.apply(this,arguments)}function o(){return o=Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a.getMessage();case 2:n=t.sent,e.level1=e.dealNumber(e.web3.utils.fromWei(n[0],"ether")),e.level2=e.dealNumber(e.web3.utils.fromWei(n[1],"ether")),e.level3=e.dealNumber(e.web3.utils.fromWei(n[2],"ether"));case 6:case"end":return t.stop()}}),t)}))),o.apply(this,arguments)}s()},addCollection:function(){var t=this.$store.state.db,e=this.$store.state.username+"collection",n=t.transaction([e],"readwrite");n.oncomplete=function(t){console.log("事务操作完成")},n.onerror=function(t){console.log("事务操作出错"),console.dir(t)},n.onsuccess=function(t){console.log("事务操作成功")};var r=n.objectStore(e),a=this.post;r.add(a);var s=this.$route.params.permlink;localStorage.setItem(s,"steemjiang"),this.flag=localStorage.getItem(this.$route.params.permlink)},uploadimg:function(t,e){this.imgAdd(t,e)},dealNumber:function(t){if(t&&null!=t){t=String(t);var e=t.split(".")[0];return e}},voteLevel1:function(t){var e=this,n=this.$store.state.addr,r=this.$store.state.postinstance;function a(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.voteLevelOne(t,{from:n});case 2:s=a.sent,console.log(888888,s),e.votedFlag=!0,e.$store.commit("saveArticles",[]);case 6:case"end":return a.stop()}}),a)}))),s.apply(this,arguments)}a()},voteLevel2:function(t){var e=this,n=this.$store.state.addr,r=this.$store.state.postinstance;function a(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.voteLevelTwo(t,{from:n});case 2:s=a.sent,console.log(888888,s),e.votedFlag=!0,e.$store.commit("saveArticles",[]);case 6:case"end":return a.stop()}}),a)}))),s.apply(this,arguments)}a()},voteLevel3:function(t){var e=this,n=this.$store.state.addr,r=this.$store.state.postinstance;function a(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.voteLevelThree(t,{from:n});case 2:s=a.sent,console.log(888888,s),e.votedFlag=!0,e.$store.commit("saveArticles",[]);case 6:case"end":return a.stop()}}),a)}))),s.apply(this,arguments)}a()}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!1};return t}},mounted:function(){var t=this,e=this.$store.state.postinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=12;break}return console.log(777,"instance为空，是刷新页面"),n.next=4,t.getPostInstance();case 4:return r=n.sent,n.next=7,t.getArticles(r);case 7:t.articleFilter(),t.getArticleDone(),t.isLoading=!1,n.next=25;break;case 12:if(0!=t.$store.state.articles){n.next=21;break}return console.log(666,"如果文章更新！"),n.next=16,t.getArticles(e);case 16:t.articleFilter(),t.getArticleDone(),t.isLoading=!1,n.next=25;break;case 21:console.log(2222,"啥也没干！"),t.articleFilter(),t.getArticleDone(),t.isLoading=!1;case 25:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)}},components:{}},q=M,H=(n("ba9d"),Object(d["a"])(q,N,B,!1,null,"4e82a2d6",null)),W=H.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"请输入标题或关键词"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._l(t.search(t.keywords),(function(e){return n("div",{staticClass:"content"},[n("router-link",{attrs:{to:"/article/"+e.permlink}},[n("b-img",{staticClass:"courseimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),n("div",{staticClass:"title"},[n("router-link",{attrs:{to:"/article/"+e.permlink}},[n("span",{staticStyle:{"font-size":"1.2rem"}},[t._v(t._s(e.title))]),n("br")])],1),n("p",{staticClass:"posttime"},[t._v(" @"+t._s(e.nickname)+"("+t._s(t._f("formatAddr")(e.addr))+") "),n("span",{staticStyle:{"margin-left":"1rem"}},[t._v(" "+t._s(t.timeFormat(e.created)))])]),n("p",{staticClass:"text"},[t._v(t._s(t._f("abstractFn")(e.body))+" ......")])],1)})),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],2)},U=[],K={name:"MyArticles",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.articles,n=this.myarticlesFilter(e);return n.filter((function(e){if(e.title.includes(t)||e.keywords.includes(t))return e}))},myarticlesFilter:function(t){var e=this,n=[];return t.forEach((function(t){t.addr.toLowerCase()==e.$store.state.addr&&(console.log(99559,"是作者"),n.push(t))})),n},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,n){n.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=n[n.length-1].author,t.permlink=n[n.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==n.length&&alert("没有更多了！")}))}},components:{Loading:_["a"]},mounted:function(){var t=this,e=this.$store.state.postinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=10;break}return console.log(777,"instance为空，是刷新页面"),n.next=4,t.getPostInstance();case 4:return r=n.sent,n.next=7,t.getArticles(r);case 7:t.isLoading=!1,n.next=19;break;case 10:if(0!=t.$store.state.articles){n.next=17;break}return console.log(666,"如果文章更新！"),n.next=14,t.getArticles(e);case 14:t.isLoading=!1,n.next=19;break;case 17:console.log(2222,"啥也没干！"),t.isLoading=!1;case 19:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{changeTime:function(t){var e=new Date(1e3*t),n=e.getFullYear()+"-",r=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",s=e.getHours()+":",i=e.getMinutes()+":",o=e.getSeconds();return n+r+a+s+i+o},formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,n=t.match(e);if(null!==n)return n[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,180)}return""}}},Y=K,z=(n("51d0"),Object(d["a"])(Y,J,U,!1,null,"7fd4c412",null)),G=z.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("div",{staticClass:"orderlist"},[n("b-container",{staticClass:"bv-example-row"},[n("b-row",t._l(t.search(t.keywords),(function(e){return n("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[n("div",{staticClass:"content"},[n("router-link",{attrs:{to:"/market/"+e.orderNumber}},[n("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),n("router-link",{attrs:{to:"/market/"+e.orderNumber}},[n("span",{staticClass:"title"},[t._v(t._s(e.name))])]),n("div",{staticClass:"text"},[n("span",[t._v("卖家：@"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.addr))+")")]),n("br"),t._v(" 买家： "+t._s(e.buyers.length)+" 个"),n("br"),t._v(" 价格： "+t._s(t.weiToEth(e.price))+" 灵石"),n("br"),n("span",[t._v("时间："+t._s(t.timeFormat(e.created))+" ")]),n("br"),n("p",[t._v("描述："+t._s(t._f("abstractFn")(e.body))+" ......")])])],1)])})),1)],1),n("div",{staticStyle:{clear:"both"}})],1),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},Z=[],Q=(n("053b"),{name:"Market",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.orders,n=this.createdFilter(e);return n.filter((function(e){if(e.name.includes(t))return e}))},createdFilter:function(t){var e=[];return t.forEach((function(t){"0"===t.state&&e.push(t)})),e},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,n){n.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=n[n.length-1].author,t.permlink=n[n.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==n.length&&alert("没有更多了！")}))}},components:{Loading:_["a"]},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=10;break}return console.log(888,"instance为空，是刷新页面"),n.next=4,t.getOrderInstance();case 4:return r=n.sent,n.next=7,t.getOrders(r);case 7:t.isLoading=!1,n.next=19;break;case 10:if(0!=t.$store.state.orders){n.next=17;break}return console.log(667,"如果文章更新！"),n.next=14,t.getOrders(e);case 14:t.isLoading=!1,n.next=19;break;case 17:console.log(2233,"啥也没干！"),t.isLoading=!1;case 19:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,n=t.match(e);if(null!==n)return n[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""}}}),V=Q,tt=(n("e8a9"),Object(d["a"])(V,X,Z,!1,null,"721dd220",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("div",{staticClass:"orderlist"},[n("b-container",{staticClass:"bv-example-row"},[n("b-row",t._l(t.search(t.keywords),(function(e){return n("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[n("div",{staticClass:"content"},[n("router-link",{attrs:{to:"/myseller/"+e.orderNumber}},[n("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),n("router-link",{attrs:{to:"/myseller/"+e.orderNumber}},[n("span",{staticClass:"title"},[t._v(t._s(e.name))])]),n("div",{staticClass:"text"},[t._v(" 买家： "+t._s(e.buyers.length)+" 个"),n("br"),t._v(" 价格： "+t._s(t.weiToEth(e.price))+" 灵石"),n("br"),n("span",[t._v("时间："+t._s(t.timeFormat(e.created))+" ")]),n("br")])],1)])})),1)],1),n("div",{staticStyle:{clear:"both"}})],1),n("div",{staticClass:"orderlist"},[n("span",{staticClass:"cancell"},[t._v("取消的卖单：")]),n("br"),n("b-container",{staticClass:"bv-example-row"},[n("b-row",t._l(t.cancelledOrders(),(function(e){return n("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[n("div",{staticClass:"content"},[n("router-link",{attrs:{to:"/myseller/"+e.orderNumber}},[n("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),n("router-link",{attrs:{to:"/myseller/"+e.orderNumber}},[n("span",{staticClass:"title"},[t._v(t._s(e.name))])]),n("div",{staticClass:"text"},[t._v(" 买家： "+t._s(e.buyers.length)+" 个"),n("br"),t._v(" 价格： "+t._s(t.weiToEth(e.price))+" 灵石"),n("br"),n("span",[t._v("时间："+t._s(t.timeFormat(e.created))+" ")]),n("br")])],1)])})),1)],1),n("div",{staticStyle:{clear:"both"}})],1),n("hr"),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},rt=[],at={name:"Myseller",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.orders,n=this.mysellerFilter(e),r=this.cancelledFilter(n);return r.filter((function(e){if(e.name.includes(t))return e}))},mysellerFilter:function(t){var e=this,n=[];return t.forEach((function(t){t.addr.toLowerCase()===e.$store.state.addr&&(console.log(99559,"是卖家"),n.push(t))})),n},cancelledFilter:function(t){var e=[];return t.forEach((function(t){"0"===t.state&&e.push(t)})),e},cancelledOrders:function(){var t=this.$store.state.orders,e=this.mysellerFilter(t),n=[];return e.forEach((function(t){"1"===t.state&&n.push(t)})),n},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,n){n.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=n[n.length-1].author,t.permlink=n[n.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==n.length&&alert("没有更多了！")}))}},components:{Loading:_["a"]},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=10;break}return console.log(868,"instance为空，是刷新页面"),n.next=4,t.getOrderInstance();case 4:return e=n.sent,n.next=7,t.getOrders(e);case 7:t.isLoading=!1,n.next=19;break;case 10:if(0!=t.$store.state.orders){n.next=17;break}return console.log(667,"如果文章更新！"),n.next=14,t.getOrders(e);case 14:t.isLoading=!1,n.next=19;break;case 17:console.log(2233,"啥也没干！"),t.isLoading=!1;case 19:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,n=t.match(e);if(null!==n)return n[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""}}},st=at,it=(n("45d1"),Object(d["a"])(st,nt,rt,!1,null,"384d888b",null)),ot=it.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("div",{staticClass:"content"},[n("p",{staticClass:"posttime"},[n("span",{staticStyle:{"margin-right":"1.5rem","margin-left":"2rem"}},[t._v("卖单号："+t._s(t.order.orderNumber)+" ")]),t._v(" "+t._s(t.timeFormat(t.order.created)))]),n("p",{staticClass:"title"},[t._v(t._s(t.order.name))]),n("div",{staticClass:"text"},[t._v(" 买家： "+t._s(t.order.buyers.length)+" 个"),n("br"),t._v(" "+t._s(t.order.buyers)),n("br"),t._v(" 价格： "+t._s(t.weiToEth(t.order.price))+" 灵石"),n("br"),n("p",[t._v("内容： "),n("span",{staticClass:"neirong"},[t._v(t._s(t.order.content))]),n("br"),t._v(" 联系方式："),n("span",{staticClass:"neirong"},[t._v(" "+t._s(t.order.contact)+" ")])]),t._v(" 描述： "),n("mavon-editor",{attrs:{value:t.order.body+"<br>",subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle,boxShadow:!1}})],1),t.isCancelled?n("div",{staticClass:"btn"},[t._v("买单已取消！")]):n("div",{staticClass:"btn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.cancerOrder(t.order.uid)}}},[t._v("取消卖单")])],1)]),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},ut=[],lt={name:"MysellerUint",data:function(){return{order:{},keywords:"",author:"",permlink:"",isLoading:!1,isMyself:!1,isPurchased:!1,isCancelled:!1}},methods:{cancerOrder:function(t){var e=this,n=this.$store.state.ordertinstance,r=this.$store.state.addr;function a(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.cancerOrder(t,{from:r});case 2:s=a.sent,console.log(555,s),e.isCancelled=!0,e.$store.commit("saveOrders",[]);case 6:case"end":return a.stop()}}),a)}))),s.apply(this,arguments)}a()},getDoneMyOrder:function(){var t=this,e=this.$store.state.orders;e.forEach((function(e){e.orderNumber==t.$route.params.orderNumber&&(t.order=e)}))},getCancelldeFlag:function(){"1"===this.order.state&&(this.isCancelled=!0)}},components:{Loading:_["a"]},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=13;break}return console.log(8999,"instance为空，是刷新页面"),n.next=4,t.getOrderInstance();case 4:return e=n.sent,console.log(699,e),n.next=8,t.getOrders(e);case 8:t.getDoneMyOrder(),t.getCancelldeFlag(),t.isLoading=!1,n.next=26;break;case 13:if(0!=t.$store.state.orders){n.next=22;break}return console.log(667,"如果文章更新！"),n.next=17,t.getOrders(e);case 17:t.getDoneMyOrder(),t.getCancelldeFlag(),t.isLoading=!1,n.next=26;break;case 22:console.log(2233,"啥也没干！"),t.getDoneMyOrder(),t.getCancelldeFlag(),t.isLoading=!1;case 26:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{}},dt=lt,mt=(n("c211"),Object(d["a"])(dt,ct,ut,!1,null,"72cc3f54",null)),pt=mt.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("div",{staticClass:"orderlist"},[n("b-container",{staticClass:"bv-example-row"},[n("b-row",t._l(t.search(t.keywords),(function(e){return n("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[n("div",{staticClass:"content"},[n("router-link",{attrs:{to:"/market/"+e.orderNumber}},[n("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),n("router-link",{attrs:{to:"/market/"+e.orderNumber}},[n("span",{staticClass:"title"},[t._v(t._s(e.name))])]),n("div",{staticClass:"text"},[n("span",[t._v("卖家：@"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.addr))+")")]),n("br"),t._v(" 买家： "+t._s(e.buyers.length)+" 个"),n("br"),t._v(" 价格： "+t._s(t.weiToEth(e.price))+" 灵石"),n("br"),n("span",[t._v("时间："+t._s(t.timeFormat(e.created))+" ")]),n("br"),n("p",[t._v("描述："+t._s(t._f("abstractFn")(e.body))+" ......")])])],1)])})),1)],1),n("div",{staticStyle:{clear:"both"}})],1),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},ht=[],gt=(n("9302"),n("513c"),{name:"Mybuyer",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.orders,n=this.myBuyerFilter(e);return n.filter((function(e){if(e.name.includes(t))return e}))},myBuyerFilter:function(t){var e=this,n=[];return t.forEach((function(t){t.buyers.forEach((function(r){r.toLowerCase()===e.$store.state.addr&&(console.log(69999,"是买家！"),n.push(t))}))})),n},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,n){n.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=n[n.length-1].author,t.permlink=n[n.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==n.length&&alert("没有更多了！")}))}},components:{Loading:_["a"]},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=10;break}return console.log(868,"instance为空，是刷新页面"),n.next=4,t.getOrderInstance();case 4:return e=n.sent,n.next=7,t.getOrders(e);case 7:t.isLoading=!1,n.next=19;break;case 10:if(0!=t.$store.state.orders){n.next=17;break}return console.log(667,"如果文章更新！"),n.next=14,t.getOrders(e);case 14:t.isLoading=!1,n.next=19;break;case 17:console.log(2233,"啥也没干！"),t.isLoading=!1;case 19:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,n=t.match(e);if(null!==n)return n[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""},dealNumber:function(t){if(t=this.web3.utils.fromWei(t,"ether"),t&&null!=t){t=String(t);var e=t.split(".")[0],n=t.split(".")[1];n=n?n.length>=2?"."+n.substr(0,2):"."+n+"0":".00";var r=e.split("").reverse().join("").match(/(\d{1,3})/g);return(Number(t)<0?"-":"")+r.join(",").split("").reverse().join("")+n}return 0===t?"0.00":""}}}),vt=gt,bt=(n("23b6"),Object(d["a"])(vt,ft,ht,!1,null,"2ffcaade",null)),kt=bt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("div",{staticClass:"orderlist"},[n("b-container",{staticClass:"bv-example-row"},[n("b-row",t._l(t.search(t.keywords),(function(e){return n("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[n("div",{staticClass:"content"},[n("router-link",{attrs:{to:"/bounty/"+e.taskNumber}},[n("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),n("router-link",{attrs:{to:"/bounty/"+e.taskNumber}},[n("span",{staticClass:"title"},[t._v(t._s(e.name))])]),n("div",{staticClass:"text"},[n("span",[t._v("金主： @"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.promoter))+")")]),n("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),n("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"......"),n("br"),n("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),n("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),n("br")])],1)])})),1)],1),n("div",{staticStyle:{clear:"both"}})],1),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},_t=[],yt={name:"Bounty",data:function(){return{keywords:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.bountys;return e.filter((function(e){if(e.name.includes(t))return e}))},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,n){n.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=n[n.length-1].author,t.permlink=n[n.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==n.length&&alert("没有更多了！")}))}},components:{Loading:_["a"]},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=10;break}return console.log(888,"instance为空，是刷新页面"),n.next=4,t.getBountyInstance();case 4:return r=n.sent,n.next=7,t.getTasks(r);case 7:t.isLoading=!1,n.next=19;break;case 10:if(0!=t.$store.state.bountys){n.next=17;break}return console.log(6647,"如果悬赏更新！"),n.next=14,t.getTasks(e);case 14:t.isLoading=!1,n.next=19;break;case 17:console.log(22333,"啥也没干！"),t.isLoading=!1;case 19:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,n=t.match(e);if(null!==n)return n[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""}}},xt=yt,Ct=(n("c2fb"),Object(d["a"])(xt,wt,_t,!1,null,"de5a69f4",null)),$t=Ct.exports,Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("div",{staticClass:"orderlist"},[n("b-container",{staticClass:"bv-example-row"},[n("b-row",t._l(t.search(t.keywords),(function(e){return n("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[n("div",{staticClass:"content"},[n("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[n("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),n("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[n("span",{staticClass:"title"},[t._v(t._s(e.name))])]),n("div",{staticClass:"text"},[n("span",[t._v("金主： @"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.promoter))+")")]),n("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),n("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"......"),n("br"),n("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),n("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),n("br")])],1)])})),1)],1),n("div",{staticStyle:{clear:"both"}})],1),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},Ot=[],St={name:"MyBounty",data:function(){return{keywords:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.bountys,n=this.myBountyFilter(e);return n.filter((function(e){if(e.name.includes(t))return e}))},myBountyFilter:function(t){var e=this,n=[];return t.forEach((function(t){t.promoter.toLowerCase()===e.$store.state.addr&&(console.log(999,"是金主"),n.push(t))})),n}},components:{Loading:_["a"]},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=10;break}return console.log(888,"instance为空，是刷新页面"),n.next=4,t.getBountyInstance();case 4:return r=n.sent,n.next=7,t.getTasks(r);case 7:t.isLoading=!1,n.next=19;break;case 10:if(0!=t.$store.state.bountys){n.next=17;break}return console.log(6647,"如果悬赏更新！"),n.next=14,t.getTasks(e);case 14:t.isLoading=!1,n.next=19;break;case 17:console.log(22333,"啥也没干！"),t.isLoading=!1;case 19:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,n=t.match(e);if(null!==n)return n[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""}}},jt=St,At=(n("ce6d"),Object(d["a"])(jt,Lt,Ot,!1,null,"5aeede08",null)),Rt=At.exports,Ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("div",{staticClass:"content"},[n("p",{staticClass:"posttime"},[n("span",{staticStyle:{"margin-right":"1.5rem","margin-left":"2rem"}},[t._v(" 悬赏号："+t._s(t.task.taskNumber))]),t._v(" "+t._s(t.timeFormat(t.task.created))+" ")]),n("p",{staticClass:"title"},[t._v(t._s(t.task.name))]),n("div",{staticClass:"text"},[t._v(" 金主： @"+t._s(t.task.nickname)+" ("+t._s(t.task.promoter)+")"),n("br"),t._v(" 赏金： "+t._s(t.weiToEth(t.task.bonus))+" 灵石"),n("br"),t._v(" 联系金主："+t._s(t.task.contact)),n("br"),t._v(" 任务描述： "),n("mavon-editor",{attrs:{value:t.task.content+"<br>",subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle,boxShadow:!1}}),n("br")],1),"0"===t.task.state?n("div",[n("span",{staticClass:"btn2"},[t._v("任务申请中...... "),n("br"),n("br"),n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.cancelTask}},[t._v("取消任务")])],1),t._l(t.task.hunters,(function(e,r){return n("b-form-group",{staticClass:"hunter",attrs:{label:"已申请的猎人"+r}},[n("b-form-radio",{attrs:{name:"some-radios",value:e},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v(t._s(e))]),t.task.reasons[r]?n("div",{staticClass:"reason"},[n("p",[t._v("申请理由："+t._s(t.task.reasons[r].reason)+" ")]),t._v(" 联系方式："+t._s(t.task.reasons[r].hunterContact)+" ")]):t._e()],1)})),t.selected?n("div",{staticClass:"mt-3 hunter"},[t._v("中选猎人: "),n("strong",[t._v(t._s(t.selected))])]):t._e(),n("br"),t.selected?n("div",{staticClass:"btn3"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.confirmHunter(t.selected,t.task.uid)}}},[t._v("确认猎人")])],1):t._e(),n("br"),n("div",{staticClass:"btn4"})],2):"2"===t.task.state?n("div",[t.leftTime>0?n("span",{staticClass:"btn2"},[t._v("任务进行中..... ")]):t._e(),n("div",{staticClass:"mt-3 reason"},[t._v(" 中选猎人: "),n("strong",[t._v(t._s(t.task.hunterA))]),n("p",[t._v("申请理由："+t._s(t.getHunterMessage(t.task.hunterA).reason))]),n("p",[t._v("联系方式："+t._s(t.getHunterMessage(t.task.hunterA).hunterContact))])]),t.leftTime>0?n("div",{staticClass:"reason"},[t._v(" 任务剩余时间： "+t._s(t.formatSeconds(t.leftTime))+" "),n("p",{staticStyle:{"text-align":"center"}},[t._v("等待中选猎人提交任务！")])]):n("div",[t._v("任务已超时！ "),n("div",{staticClass:"btn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.hunterAOutOfTime(t.task.uid)}}},[t._v("猎人超时未提交，确认任务结束！")])],1)])]):"3"===t.task.state?n("div",[n("div",{staticClass:"mt-3 reason"},[t._v(" 中选猎人: "),n("strong",[t._v(t._s(t.task.hunterA))]),n("p",[t._v("申请理由："+t._s(t.getHunterMessage(t.task.hunterA).reason))]),n("p",[t._v("联系方式："+t._s(t.getHunterMessage(t.task.hunterA).hunterContact))])]),n("span",{staticClass:"btn2"},[t._v("猎人已提交任务..... ")]),t.leftTime>0?n("div",{staticClass:"reason"},[t._v("金主确认的剩余时间： "+t._s(t.formatSeconds(t.leftTime)))]):t._e(),n("div",{staticClass:"btn3"},[n("b-button",{staticStyle:{"margin-right":"1rem"},attrs:{variant:"outline-primary"},on:{click:function(e){return t.promoterFinished(t.task.uid)}}},[t._v(" 确认任务完成 ")]),n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.taskFallback(t.task.uid)}}},[t._v("退回任务")])],1)]):"4"===t.task.state?n("div",[n("div",{staticClass:"mt-3"},[t._v("中选猎人: "),n("strong",[t._v(t._s(t.task.hunterA))])]),n("div",{staticClass:"btn2"},[t._v("猎人未提交，任务提前结束！")])]):"5"===t.task.state?n("div",[n("div",{staticClass:"mt-3 reason"},[t._v(" 中选猎人: "),n("strong",[t._v(t._s(t.task.hunterA))]),n("p",[t._v("申请理由："+t._s(t.getHunterMessage(t.task.hunterA).reason))]),n("p",[t._v("联系方式："+t._s(t.getHunterMessage(t.task.hunterA).hunterContact))])]),n("div",{staticClass:"btn2"},[t._v("任务圆满完成！")])]):n("div",[n("div",{staticClass:"mt-3"},[t._v("中选猎人: "),n("strong",[t._v(t._s(t.task.hunterA))])]),n("div",{staticClass:"btn2"},[t._v("金主未确认，任务强制完成！")])])]),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},Tt=[],Et={name:"MyBountyUnit",data:function(){return{task:{},selected:"",isLoading:!1,leftTime:"",hunterMessage:{}}},methods:{taskFilter:function(){var t=this,e=this.$store.state.bountys,n=this.$route.params.taskNumber;e.forEach((function(e){if(e.taskNumber===n){t.task=e;var r=parseInt(e.taskStart)+parseInt(e.taskDeadLine),a=.001*Date.parse(new Date);t.leftTime=r-a}})),console.log(123456)},getHunterMessage:function(t){for(var e=this.task,n=0;n<e.hunters.length;n++){if(e.hunters[n]===t)return console.log(111,"找到啦 "),console.log(1111,e.reasons[n]),e.reasons[n];console.log(222,"没找到啦 ")}},confirmHunter:function(t,e){var n=this,r=this.$store.state.addr,a=this.$store.state.bountyinstance;function s(){return o.apply(this,arguments)}function o(){return o=Object(i["a"])(regeneratorRuntime.mark((function s(){var i;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,a.confirmHunter(e,t,{from:r});case 2:return i=s.sent,console.log(666,i),s.next=6,n.getTasks(a);case 6:n.taskFilter();case 7:case"end":return s.stop()}}),s)}))),o.apply(this,arguments)}s()},cancelTask:function(){var t=this,e=this.$store.state.addr,n=this.$route.params.task,r=this.$store.state.bountyinstance;function a(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.cancelTask(n,{from:e});case 2:return s=a.sent,console.log(666,s),a.next=6,t.getTasks(r);case 6:t.taskFilter();case 7:case"end":return a.stop()}}),a)}))),s.apply(this,arguments)}a()},promoterFinished:function(t){var e=this,n=this.$store.state.addr,r=this.$store.state.bountyinstance;function a(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.promoterFinished(t,{from:n});case 2:return s=a.sent,console.log(3366,s),a.next=6,e.getTasks(r);case 6:e.taskFilter();case 7:case"end":return a.stop()}}),a)}))),s.apply(this,arguments)}a()},taskFallback:function(t){var e=this,n=this.$store.state.addr,r=this.$store.state.bountyinstance;function a(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,r.taskFallback(t,{from:n});case 2:return s=a.sent,console.log(3366,s),a.next=6,e.getTasks(r);case 6:e.taskFilter();case 7:case"end":return a.stop()}}),a)}))),s.apply(this,arguments)}a()},hunterAOutOfTime:function(t){var e=this,n=this.$store.state.bountyinstance,r=this.$store.state.addr;function a(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.hunterAOutOfTime(t,{from:r});case 2:return s=a.sent,console.log(555,s),a.next=6,e.getTasks(n);case 6:e.taskFilter();case 7:case"end":return a.stop()}}),a)}))),s.apply(this,arguments)}a()}},components:{Loading:_["a"]},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=11;break}return console.log(888,"instance为空，是刷新页面"),n.next=4,t.getBountyInstance();case 4:return r=n.sent,n.next=7,t.getTasks(r);case 7:t.taskFilter(),t.isLoading=!1,n.next=22;break;case 11:if(0!=t.$store.state.bountys){n.next=19;break}return console.log(6647,"如果悬赏更新！"),n.next=15,t.getTasks(e);case 15:t.taskFilter(),t.isLoading=!1,n.next=22;break;case 19:console.log(22333,"啥也没干！"),t.taskFilter(),t.isLoading=!1;case 22:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{}},Pt=Et,It=(n("671a"),Object(d["a"])(Pt,Ft,Tt,!1,null,"7ce1e36f",null)),Dt=It.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("div",{staticClass:"orderlist"},[n("b-container",{staticClass:"bv-example-row"},[n("b-row",t._l(t.search(t.keywords),(function(e){return n("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[n("div",{staticClass:"content"},[n("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[n("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),n("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[n("span",{staticClass:"title"},[t._v(t._s(e.name))])]),n("div",{staticClass:"text"},[n("span",[t._v("金主： "+t._s(t._f("formatAddr")(e.promoter)))]),n("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),n("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"...... "),n("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),n("br"),t._v(" 任务时间： "+t._s(e.taskDeadLine)),n("br")])],1)])})),1)],1),n("div",{staticStyle:{clear:"both"}})],1),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},Bt=[],Mt={name:"MyTask",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.bountys,n=this.myTaskFilter(e);return n.filter((function(e){if(e.name.includes(t))return console.log(166,"查到了！"),e}))},myTaskFilter:function(t){var e=this;console.log(1111);var n=[];return t.forEach((function(t){console.log(699,t.hunterA),t.hunterA.toLowerCase()===e.$store.state.addr&&(console.log(999,"中选猎人"),n.push(t))})),n},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,n){n.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=n[n.length-1].author,t.permlink=n[n.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==n.length&&alert("没有更多了！")}))}},components:{Loading:_["a"]},mounted:function(){var t=this;console.log(65555);var e=this.$store.state.bountyinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=10;break}return console.log(888,"instance为空，是刷新页面"),n.next=4,t.getBountyInstance();case 4:return r=n.sent,n.next=7,t.getTasks(r);case 7:t.isLoading=!1,n.next=19;break;case 10:if(0!=t.$store.state.bountys){n.next=17;break}return console.log(6647,"如果悬赏更新！"),n.next=14,t.getTasks(e);case 14:t.isLoading=!1,n.next=19;break;case 17:console.log(22333,"啥也没干！"),t.isLoading=!1;case 19:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,n=t.match(e);if(null!==n)return n[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""}}},qt=Mt,Ht=(n("963c"),Object(d["a"])(qt,Nt,Bt,!1,null,"195ce4ae",null)),Wt=Ht.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("div",{staticClass:"content"},[n("p",{staticClass:"posttime"},[n("span",{staticStyle:{"margin-right":"1.5rem","margin-left":"2rem"}},[t._v(" 悬赏号："+t._s(t.task.taskNumber))]),t._v(" "+t._s(t.timeFormat(t.task.created))+" ")]),n("p",{staticClass:"title"},[t._v(t._s(t.task.name))]),n("div",{staticClass:"text"},[t._v(" 金主： @"+t._s(t.task.nickname)+" ("+t._s(t.task.promoter)+")"),n("br"),t._v(" 赏金： "+t._s(t.weiToEth(t.task.bonus))+" 灵石"),n("br"),t._v(" 联系金主："+t._s(t.task.contact)),n("br"),t._v(" 任务描述： "),n("mavon-editor",{attrs:{value:t.task.content+"<br>",subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle,boxShadow:!1}}),"0"===t.task.state?n("div",[t._l(t.task[5],(function(e){return n("b-form-group",{attrs:{label:"已申请的猎人名单："}},[n("b-form-radio",{attrs:{name:"some-radios",value:e},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v(t._s(e))])],1)})),n("div",{staticClass:"mt-3"},[t._v("中选猎人: "),n("strong",[t._v(t._s(t.selected))])])],2):t._e()],1),"2"===t.task.state?n("div",{staticClass:"hunter"},[t._v("任务进行中..... "),t.leftTime>0?n("div",[t._v("任务剩余时间： "+t._s(t.formatSeconds(t.leftTime))+" "),n("div",{staticClass:"btn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.hunterAFinished(t.task.uid)}}},[t._v("提交任务")])],1)]):n("div",[t._v("任务已超时！")])]):"3"===t.task.state?n("div",{staticClass:"btn2"},[t._v(" 您已提交任务，请等待金主确认或是退回！ "),t.leftTime>0?n("div",[t._v("金主确认的剩余时间： "+t._s(t.formatSeconds(t.leftTime)))]):t._e()]):n("div",{staticClass:"btn2"},[n("br"),t._v(" 金主已确认，恭喜您圆满完成任务并收到赏金！ ")])]),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},Ut=[],Kt={name:"MyTaskUnit",data:function(){return{task:{},selected:"",isLoading:!1,leftTime:""}},methods:{taskFilter:function(){var t=this,e=this.$store.state.bountys,n=this.$route.params.taskNumber;e.forEach((function(e){if(e.taskNumber===n){t.task=e;var r=parseInt(e.taskStart)+parseInt(e.taskDeadLine),a=.001*Date.parse(new Date);t.leftTime=r-a}}))},hunterAFinished:function(t){var e=this,n=this.$store.state.bountyinstance,r=this.$store.state.addr;function a(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.hunterAFinished(t,{from:r});case 2:return s=a.sent,console.log(555,s),a.next=6,e.getTasks(n);case 6:e.taskFilter();case 7:case"end":return a.stop()}}),a)}))),s.apply(this,arguments)}a()}},components:{Loading:_["a"]},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=11;break}return console.log(888,"instance为空，是刷新页面"),n.next=4,t.getBountyInstance();case 4:return r=n.sent,n.next=7,t.getTasks(r);case 7:t.taskFilter(),t.isLoading=!1,n.next=22;break;case 11:if(0!=t.$store.state.bountys){n.next=19;break}return console.log(6647,"如果悬赏更新！"),n.next=15,t.getTasks(e);case 15:t.taskFilter(),t.isLoading=!1,n.next=22;break;case 19:console.log(22333,"啥也没干！"),t.taskFilter(),t.isLoading=!1;case 22:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{}},Yt=Kt,zt=(n("7c9e"),Object(d["a"])(Yt,Jt,Ut,!1,null,"6291f791",null)),Gt=zt.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("div",{staticClass:"content"},[n("p",{staticClass:"posttime"},[n("span",{staticStyle:{"margin-right":"1.5rem","margin-left":"2rem"}},[t._v("卖单号："+t._s(t.order.orderNumber)+" ")]),t._v(" "+t._s(t._f("changeTime")(t.order.created)))]),n("p",{staticClass:"title"},[t._v(t._s(t.order.name))]),n("div",{staticClass:"text"},[t._v(" 卖家： @"+t._s(t.order.nickname)+"("+t._s(t.order.addr)+")"),n("br"),t._v(" 买家： "+t._s(t.order.buyers.length)+" 个"),n("br"),t._v(" 价格： "+t._s(t.weiToEth(t.order.price))+" 灵石"),n("br"),t.isPurchased?n("p",[t._v(" 内容： "),n("span",{staticClass:"neirong"},[t._v(t._s(t.order.content))]),n("br"),t._v(" 联系卖家："),n("span",{staticClass:"neirong"},[t._v(" "+t._s(t.order.contact)+" ")])]):n("p",{staticStyle:{display:"inline"}},[t._v(" 内容： "),n("span",{staticClass:"neirong2"},[t._v("已封印！请购买以解除封印！")]),n("br")]),t._v(" 描述： "),n("mavon-editor",{attrs:{value:t.order.body+"<br>",subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle,boxShadow:!1}})],1),t.isMyself?t._e():n("div",[t.isPurchased?n("div",{staticClass:"btn2"},[t._v("已购买")]):n("div",{staticClass:"btn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.buy(t.order.uid)}}},[t._v("购买")])],1)])]),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},Zt=[],Qt={name:"Order",data:function(){return{order:[],keywords:"",author:"",permlink:"",isLoading:!1,isMyself:!1,isPurchased:!1}},methods:{buy:function(t){var e=this,n=this.$store.state.ordertinstance,r=this.$store.state.addr;function a(){return s.apply(this,arguments)}function s(){return s=Object(i["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,n.confirmPurchase(t,{from:r});case 2:s=a.sent,console.log(555,s),e.isPurchased=!0,e.$store.commit("saveOrders",[]);case 6:case"end":return a.stop()}}),a)}))),s.apply(this,arguments)}a()},getOrderDone:function(){var t=this,e=this.$store.state.orders,n=this.$store.state.addr;e.forEach((function(e){e.orderNumber===t.$route.params.orderNumber&&(t.order=e)})),this.order.addr.toLowerCase()===n&&(this.isMyself=!0,console.log(88899,"是我本人！"));var r=this.order.buyers;r.forEach((function(e){e.toLowerCase()==n&&(console.log(566,"已购买"),t.isPurchased=!0)}))}},components:{Loading:_["a"]},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=11;break}return console.log(868,"instance为空，是刷新页面"),n.next=4,t.getOrderInstance();case 4:return e=n.sent,n.next=7,t.getOrders(e);case 7:t.getOrderDone(),t.isLoading=!1,n.next=22;break;case 11:if(0!=t.$store.state.orders){n.next=19;break}return console.log(667,"如果文章更新！"),n.next=15,t.getOrders(e);case 15:t.getOrderDone(),t.isLoading=!1,n.next=22;break;case 19:console.log(2233,"啥也没干！"),t.getOrderDone(),t.isLoading=!1;case 22:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()},filters:{changeTime:function(t){var e=new Date(1e3*t),n=e.getFullYear()+"-",r=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",s=e.getHours()+":",i=e.getMinutes()+":",o=e.getSeconds();return n+r+a+s+i+o}}},Vt=Qt,te=(n("45ab"),Object(d["a"])(Vt,Xt,Zt,!1,null,"321924dc",null)),ee=te.exports,ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("div",{staticClass:"content"},[n("p",{staticClass:"posttime"},[n("span",{staticStyle:{"margin-right":"1.5rem","margin-left":"2rem"}},[t._v("悬赏号："+t._s(t.task.taskNumber)+" ")]),t._v(" "+t._s(t.timeFormat(t.task.created))+" ")]),n("p",{staticClass:"title"},[t._v(t._s(t.task.name))]),n("div",{staticClass:"text"},[t._v(" 金主： @"+t._s(t.task.nickname)+" ("+t._s(t.task.promoter)+")"),n("br"),t.task.bonus?n("span",[t._v("赏金： "+t._s(t.weiToEth(t.task.bonus))+" 灵石")]):t._e(),n("br"),t._v(" 任务描述： "),n("mavon-editor",{attrs:{value:t.task.content+"<br>",subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle,boxShadow:!1}}),t._v(" 任务时间： "+t._s(t.formatSeconds(t.task.taskDeadLine))),n("br")],1),"0"===t.task.state?n("div",{staticClass:"reason"},[0!=t.task.hunters?n("span",[t._v(" 已申请的猎人名单："),n("br"),t._v(" "+t._s(t.task.hunters))]):t._e(),n("br"),n("br"),n("span",{staticClass:"btn2"},[t._v("任务申请中......")]),t.isPromoter?n("div"):n("div",[t.isApplied?n("div",{staticClass:"btn2"},[t._v("您已申请！")]):n("div",{staticClass:"reason"},[n("b-form-textarea",{staticClass:"reason2",attrs:{placeholder:"请输入申请的理由，仅金主可见！",rows:"4","max-rows":"9"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}}),n("br"),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 reason2",attrs:{placeholder:"请输入联系方式，仅金主可见。"},model:{value:t.hunterContact,callback:function(e){t.hunterContact=e},expression:"hunterContact"}}),n("br"),n("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.apply(t.task.uid)}}},[t._v("申请任务")])],1)])]):"2"===t.task.state?n("div",[t._v(" 中选猎人： "+t._s(t.task.hunterA)+" "),n("br"),t._v(" 任务进行中222..... ")]):t._e()]),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},re=[],ae=n("22dc"),se=ae["a"],ie=(n("1343"),Object(d["a"])(se,ne,re,!1,null,"77f1545e",null)),oe=ie.exports,ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"maintop"}},[t.flag?n("div",[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{id:"inline-form-input-name",placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("div",{attrs:{id:"main"}},[n("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),n("br"),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{placeholder:"输入关键词，以空格分隔"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("div",{staticClass:"btn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("提交")])],1)],1):t._e(),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},ue=[],le=n("7f3b"),de=le["a"],me=(n("56dd"),Object(d["a"])(de,ce,ue,!1,null,"60abb30b",null)),pe=me.exports,fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"maintop"}},[t.flag?n("div",[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{placeholder:"请输入商品名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{placeholder:"请输入价格：灵石"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),n("b-form-textarea",{staticClass:"content",attrs:{placeholder:"请输入电子商品的链接或网盘地址，买家付费后可见！",rows:"3","max-rows":"6"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 content",attrs:{placeholder:"请输入联系方式(建议邮箱)，买家付费后可见。"},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}}),t._v(" 商品描述： "),n("div",{attrs:{id:"main"}},[n("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),n("div",{staticClass:"btn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("提交")])],1)],1):t._e(),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},he=[],ge=n("d1d7"),ve=ge["a"],be=(n("b2ff"),Object(d["a"])(ve,fe,he,!1,null,"449c3277",null)),ke=be.exports,we=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"maintop"}},[t.flag?n("div",[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{placeholder:"请输入名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{placeholder:"请输入赏金（灵石数）"},model:{value:t.bonus,callback:function(e){t.bonus=e},expression:"bonus"}}),n("strong",{staticStyle:{color:"rgba(240,56,6,0.75)"}},[t._v("加上押金 "+t._s(t.bonus/2)+" 灵石")]),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 content",attrs:{placeholder:"请输入联系方式，只有中标的猎人可见。"},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}}),t._v(" 任务描述： "),n("div",{attrs:{id:"main"}},[n("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),n("br"),t._v(" 设定任务时间： "),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 hour",attrs:{placeholder:"请输入小时"},model:{value:t.hour,callback:function(e){t.hour=e},expression:"hour"}}),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 hour",attrs:{placeholder:"请输入分钟"},model:{value:t.minute,callback:function(e){t.minute=e},expression:"minute"}}),n("br"),n("div",{staticClass:"btn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("提交")])],1)],1):t._e(),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},_e=[],ye=n("0632"),xe=ye["a"],Ce=(n("bb5c"),Object(d["a"])(xe,we,_e,!1,null,"79c16764",null)),$e=Ce.exports,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"maintop"}},[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("div",{attrs:{id:"main"}},[n("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),n("br"),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-input-name",placeholder:"tags  (输入英文标签，以空格分隔)"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}}),n("div",{staticClass:"btn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("提交")])],1)],1)},Oe=[],Se=(n("e18c"),{name:"Edit",data:function(){return{db:{},posts:[],body:"",category:"",title:"",tags:"",key:""}},methods:{uploadimg:function(t,e){this.imgAdd(t,e)},searchKey:function(){var t=this,e=this.$route.params.permlink,n=this.$store.state.db,r=this.$store.state.username,a=n.transaction([r],"readwrite"),s=a.objectStore(r);s.openCursor().onsuccess=function(n){var r=n.target.result;r&&(r.value.permlink==e&&(t.key=r.key,t.body=r.value.body,t.category=r.value.category,t.title=r.value.title,t.tags=JSON.parse(r.value.json_metadata).tags.join(" ")),r.continue()),s.openCursor().onerror=function(t){console.dir(t)}}},post:function(){var t=this.$store.state.password,e="",n=this.category,r=this.$store.state.username,a=this.$route.params.permlink,s=this.title,o=this.body,c=this.tags.trim().split(/\s+/),u={tags:c,dapp:"steemjiang",format:"markdown"};this.postToSteem(t,e,n,r,a,s,o,u);var l={id:this.key,title:s,author:r,category:this.category,permlink:a,body:o,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(u)},d=this,m=this.$store.state.db,p=this.$store.state.username;function f(){return new Promise((function(t){var e=m.transaction([p],"readwrite");e.oncomplete=function(t){console.log("事务操作完成")},e.onerror=function(t){console.log("事务操作出错"),console.dir(t)},e.onsuccess=function(t){console.log("事务操作成功")};var n=e.objectStore(p);n.put(l),t()}))}function h(){return g.apply(this,arguments)}function g(){return g=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:return t.next=4,d.getAllPosts(m);case 4:e=t.sent,d.$store.commit("savePosts",e.reverse()),d.$router.push({path:"/blog/"+a});case 7:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}h()}},mounted:function(){var t=this;function e(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.state.username){e.next=16;break}if(0!=t.$store.state.posts){e.next=14;break}return e.next=4,t.initDatabase();case 4:return n=e.sent,t.$store.commit("saveDB",n),e.next=8,t.getAllPosts(n);case 8:return r=e.sent,t.$store.commit("savePosts",r.reverse()),e.next=12,t.searchKey();case 12:e.next=16;break;case 14:return e.next=16,t.searchKey();case 16:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}e()}}),je=Se,Ae=(n("9e0d"),Object(d["a"])(je,Le,Oe,!1,null,"d770c6cc",null)),Re=Ae.exports,Fe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("div",{staticClass:"article"},t._l(t.search(t.keywords),(function(e){return n("div",{staticClass:"content"},[n("router-link",{attrs:{to:"/collection/@"+e.author+"/"+e.permlink}},[t._v(t._s(e.title)+" "),n("p",{staticClass:"posttime"},[t._v("@"+t._s(e.author)+" "+t._s(t._f("formatTime")(e.created)))])])],1)})),0)],1)},Te=[],Ee={name:"Collections",data:function(){return{keywords:""}},methods:{search:function(t){var e=this.$store.state.collections;return e.filter((function(e){if(e.title.includes(t))return e}))}},filters:{formatTime:function(t){return t.substring(0,10)}},mounted:function(){var t=this;if(0==this.$store.state.posts){var e=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initDatabase();case 2:return n=e.sent,t.$store.commit("saveDB",n),e.next=6,t.getAllPosts(n);case 6:return r=e.sent,t.$store.commit("savePosts",r.reverse()),e.next=10,t.getCollections(n);case 10:a=e.sent,t.$store.commit("saveCollections",a.reverse());case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(455,"db is null"),e()}else{var n=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$store.state.db,e.next=3,t.getCollections(n);case 3:r=e.sent,t.$store.commit("saveCollections",r.reverse());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}}},Pe=Ee,Ie=(n("8e37"),Object(d["a"])(Pe,Fe,Te,!1,null,"58b81b6d",null)),De=Ie.exports,Ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"content"}},[n("h1",[t._v(t._s(t.post.title))]),n("p",{staticClass:"posttime"},[t._v("@"+t._s(t.post.author)+" "+t._s(t._f("formatTime")(t.post.created)))]),n("mavon-editor",{staticClass:"md",attrs:{value:t.post.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}}),t.$store.state.username?n("div",[n("b-button",{staticClass:"del",attrs:{variant:"outline-primary"},on:{click:t.del}},[t._v("取消收藏")])],1):t._e(),n("br")],1)},Be=[],Me={name:"Collection",data:function(){return{post:{},key:""}},methods:{searchKey:function(){var t=this,e=this.$route.params.permlink,n=this.$store.state.db,r=this.$store.state.username+"collection",a=n.transaction([r],"readwrite"),s=a.objectStore(r);s.openCursor().onsuccess=function(n){var r=n.target.result;r&&(r.value.permlink==e&&(t.key=r.key),r.continue()),s.openCursor().onerror=function(t){console.dir(t)}}},del:function(){var t=this.$store.state.db,e=this.$store.state.username+"collection",n=t.transaction([e],"readwrite"),r=n.objectStore(e);r.delete(this.key);var a=this.$route.params.permlink;localStorage.removeItem(a),this.$router.push("/collection")},searchPosts:function(t){var e=this,n=this.$route.params.permlink;t.forEach((function(t){t.permlink==n&&(e.post=t)}))}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this;function e(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0==t.$store.state.collections){e.next=6;break}n=t.$store.state.collections,t.searchPosts(n),t.searchKey(),e.next=21;break;case 6:return console.log(99,"fresh"),e.next=9,t.initDatabase();case 9:return r=e.sent,t.$store.commit("saveDB",r),e.next=13,t.getAllPosts(r);case 13:return a=e.sent,t.$store.commit("savePosts",a.reverse()),e.next=17,t.getCollections(r);case 17:s=e.sent,t.$store.commit("saveCollections",s.reverse()),t.searchPosts(s),t.searchKey();case 21:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}e()},filters:{formatTime:function(t){return t.substring(0,10)}}},qe=Me,He=(n("fb7f"),Object(d["a"])(qe,Ne,Be,!1,null,"2e7e8f1b",null)),We=He.exports,Je=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ue=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"content"}},[n("h1",[t._v("关于百灵界")]),t._v(" 百灵界是一个基于以太坊的区块链价值交易系统。你可以通过自媒体、集市和悬赏来赚取奖励！"),n("br"),n("br"),t._v(' 百灵界发行通用灵石(Etherlark Stone)，简称灵石，符号："ELS"。灵石按一定的规则分发， 初始发行总量为10亿，在后期的挖矿和运营中缓慢增发。'),n("br"),n("br"),t._v(" 用户应遵守国家相关法律法规，违规用户将列入黑名单！黑名单用户的所有发布将不再展示， 也不能再进行发布，但其灵石资产不受影响。"),n("br"),n("br"),t._v(" 百灵界由界主、太上和长老团共同管理。处理百灵界的设计、监管、运营和推广事项。"),n("br"),n("br")])}],Ke={name:"About",data:function(){return{}}},Ye=Ke,ze=(n("3985"),Object(d["a"])(Ye,Je,Ue,!1,null,"1905bfd2",null)),Ge=ze.exports,Xe=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},Ze=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"content"}},[n("h1",[t._v("新手指南")]),n("div",{staticClass:"newtext"})])}],Qe={name:"Newbie",data:function(){return{}},mounted:function(){}},Ve=Qe,tn=(n("6dce"),Object(d["a"])(Ve,Xe,Ze,!1,null,"1ecd1577",null)),en=tn.exports,nn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("h2",[t._v("钱包")]),t.flag?n("div",[t._v(" 呢称： "+t._s(t.$store.state.nickname)),n("br"),t._v(" 地址： "+t._s(t.$store.state.addr)+" "),n("br"),t._v(" 以太币余额： "+t._s(t.balanceOfEth)),n("br"),t._v(" 灵石余额： "+t._s(t.balanceOf)),n("br"),n("br"),n("span",{staticStyle:{"margin-right":"1rem"}},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.beforetransfer}},[t._v("转帐")])],1),n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.beforeexchange}},[t._v("兑换")]),t.transferFlag?n("div",[n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"转帐地址"},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}}),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"灵石数量"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),n("div",{staticClass:"loginbtn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.transfer}},[t._v("确认转帐")])],1)],1):t._e(),n("br"),n("br"),t.exchangeFlag?n("div",{staticClass:"exchange"},[t._v(" 兑换率： 1以太币 = "+t._s(t.price)+"灵石 "),n("br"),n("hr"),n("p",[t._v("以太币兑换灵石，可兑换灵石上限： "+t._s(t.balanceOfContract))]),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user2",attrs:{placeholder:"以太币数量"},model:{value:t.ethvalue,callback:function(e){t.ethvalue=e},expression:"ethvalue"}}),t._v("以太币 "),t.ethvalue?n("span",{staticStyle:{"margin-left":"1rem",color:"rgba(240,56,6,0.75)"}},[t._v(" 可兑换 "+t._s(t.ethvalue*t.price)+" 灵石 ")]):t._e(),n("div",{staticClass:"loginbtn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.ethToLark}},[t._v("确认兑换灵石")])],1),n("hr"),n("p",[t._v("灵石兑换以太币，可兑换以太币上限： "+t._s(t.ethOfContract)+" ")]),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user2",attrs:{placeholder:"灵石数量"},model:{value:t.larkvalue,callback:function(e){t.larkvalue=e},expression:"larkvalue"}}),t._v("灵石 "),t.larkvalue?n("span",{staticStyle:{"margin-left":"1rem",color:"rgba(240,56,6,0.75)"}},[t._v(" 可兑换 "+t._s(t.larkvalue/t.price)+" 以太币 ")]):t._e(),n("div",{staticClass:"loginbtn"},[n("b-button",{attrs:{variant:"outline-primary"},on:{click:t.larkToEth}},[t._v("确认兑换以太币")])],1)],1):t._e(),t._e()],1):t._e(),n("transition",{attrs:{name:"fade"}},[t.isLoading?n("loading"):t._e()],1)],1)},rn=[],an={name:"Login",data:function(){return{balanceOf:"",password:"",isLoading:!1,flag:!1,totalSupply:"",to:"",value:"",transferFlag:!1,exchangeFlag:!1,anyaddr:"",anyvalue:"",balanceOfEth:"",ethvalue:"",larkvalue:"",balanceOfContract:"",ethOfContract:"",price:""}},methods:{getBalance:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$store.state.addr,r=t.$store.state.walletinstance,e.next=4,t.web3.eth.getBalance(n);case 4:return a=e.sent,t.balanceOfEth=t.weiToEth(a),e.next=8,r.balanceOf(n);case 8:return s=e.sent,t.balanceOf=t.weiToEth(s),e.next=12,r.totalSupply();case 12:i=e.sent,t.totalSupply=t.weiToEth(i);case 14:case"end":return e.stop()}}),e)})))()},getExchangeDone:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.$store.state.walletinstance,r=t.$store.state.exchangeinstance,e.next=4,r.getThis();case 4:return a=e.sent,e.next=7,n.balanceOf(a);case 7:return s=e.sent,t.balanceOfContract=t.weiToEth(s),e.next=11,t.web3.eth.getBalance(a);case 11:return i=e.sent,t.ethOfContract=t.weiToEth(i),e.next=15,r.getMessage();case 15:o=e.sent,t.price=o[1];case 17:case"end":return e.stop()}}),e)})))()},beforetransfer:function(){this.exchangeFlag=!1,this.transferFlag=!this.transferFlag},beforeexchange:function(){this.transferFlag=!1,this.exchangeFlag=!this.exchangeFlag},transfer:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.transferFlag=!1,n=t.web3.utils.toWei(t.value,"ether"),r=t.$store.state.addr,a=t.$store.state.walletinstance,e.next=7,a.transfer(t.to,n,{from:r});case 7:return e.next=9,t.getBalance();case 9:return e.next=11,t.getExchangeDone();case 11:t.value="",t.to="",t.isLoading=!1;case 14:case"end":return e.stop()}}),e)})))()},anybalance:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.anyaddr,r=t.$store.state.walletinstance,e.next=4,r.balanceOf(n);case 4:a=e.sent,t.anyvalue=t.weiToEth(a);case 6:case"end":return e.stop()}}),e)})))()},larkToEth:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.exchangeFlag=!1,n=t.$store.state.addr,r=t.$store.state.exchangeinstance,a=t.web3.utils.toWei(t.larkvalue,"ether"),e.next=7,r.larkToEth(a,{from:n});case 7:return e.next=9,t.getBalance();case 9:return e.next=11,t.getExchangeDone();case 11:t.larkvalue="",t.isLoading=!1;case 13:case"end":return e.stop()}}),e)})))()},ethToLark:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.exchangeFlag=!1,n=t.$store.state.addr,r=t.$store.state.exchangeinstance,a=t.web3.utils.toWei(t.ethvalue,"ether"),e.next=7,r.getThis();case 7:return s=e.sent,e.next=10,t.web3.eth.sendTransaction({from:n,to:s,value:a});case 10:return e.next=12,t.getBalance();case 12:return e.next=14,t.getExchangeDone();case 14:t.ethvalue="",t.isLoading=!1;case 16:case"end":return e.stop()}}),e)})))()}},components:{Loading:_["a"]},mounted:function(){var t=this,e=this.$store.state.walletinstance;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=14;break}return console.log(888,"instance为空，是刷新页面"),n.next=4,t.getWalletInstance();case 4:return n.next=6,t.getExchangeInstance();case 6:return n.next=8,t.getBalance();case 8:return n.next=10,t.getExchangeDone();case 10:t.isLoading=!1,t.flag=!0,n.next=21;break;case 14:return console.log(22333,"啥也没干！"),n.next=17,t.getBalance();case 17:return n.next=19,t.getExchangeDone();case 19:t.isLoading=!1,t.flag=!0;case 21:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()}},sn=an,on=(n("84f2"),Object(d["a"])(sn,nn,rn,!1,null,"52501528",null)),cn=on.exports,un=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"article"},[n("button",{on:{click:t.getEventWeb3}},[t._v("获取日志")]),n("br"),n("button",{on:{click:t.getSign}},[t._v("获取签名")]),n("br"),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"转帐地址"},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}}),n("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"eth",eth:""},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),n("button",{on:{click:t.sendTransaction}},[t._v("转帐")])],1)},ln=[],dn=(n("1c2e"),{name:"Index",data:function(){return{to:"",value:""}},methods:{getEthLogs:function(){var t=this;function e(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(888,t.ethapi),e.next=3,t.ethapi.log.getLogs("0x98C59036C71Ef10684b3A4a3ffA85b280fe7b402",7745600,"latest");case 3:n=e.sent,console.log(2263,n);case 5:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}e()},getEventWeb3:function(){console.log(566,this.web3),console.log(567,this.web3.eth),console.log(568,this.web3.eth.accounts);var t=this.$store.state.instance;function e(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getPastEvents("SetContent",{fromBlock:0,toBlock:"latest"});case 2:n=e.sent,console.log(8855,n),console.log(8856,n[0].returnValues[0]);case 5:case"end":return e.stop()}}),e)}))),n.apply(this,arguments)}e()},getSign:function(){this.web3.utils.sha3("message to sign");var t=this.$store.state.addr,e=this;var n="0xCD7324469cC6d4DF5BfdaEaDBCDDb008866F0913",r=4e14,a=12,s="0xD952e0c02F5D6D77c0207daAb436F3540a99B511";function o(){return c.apply(this,arguments)}function c(){return c=Object(i["a"])(regeneratorRuntime.mark((function i(){var o,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return console.log(899,n),o="0x"+e.abi.soliditySHA3(["address","uint256","uint256","address"],[n,r,a,s]).toString("hex"),console.log(566,o),i.next=5,e.web3.eth.personal.sign(o,t);case 5:c=i.sent,console.log(699,c);case 7:case"end":return i.stop()}}),i)}))),c.apply(this,arguments)}o()},sendTransaction:function(){var t=this;console.log(456,1e18*this.value);var e=this.$store.state.addr;function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.web3.eth.sendTransaction({from:e,to:t.to,value:1e18*t.value});case 2:r=n.sent,console.log(899,r);case 4:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()}},components:{}}),mn=dn,pn=(n("4e3e"),Object(d["a"])(mn,un,ln,!1,null,"2b70e294",null)),fn=pn.exports;r["default"].use(b["a"]);var hn=[{path:"/",name:"index",component:D},{path:"/login",name:"login",component:$},{path:"/article/:permlink",name:"article",component:W},{path:"/market",name:"market",component:et,meta:{requireAuth:!0}},{path:"/market/:orderNumber",name:"order",component:ee,meta:{requireAuth:!0}},{path:"/myseller",name:"myseller",component:ot,meta:{requireAuth:!0}},{path:"/myseller/:orderNumber",name:"myselleruint",component:pt,meta:{requireAuth:!0}},{path:"/mybuyer",name:"mybuyer",component:kt,meta:{requireAuth:!0}},{path:"/bounty",name:"bounty",component:$t,meta:{requireAuth:!0}},{path:"/bounty/:taskNumber",name:"task",component:oe,meta:{requireAuth:!0}},{path:"/myarticles",name:"myarticles",component:G,meta:{requireAuth:!0}},{path:"/mybounty",name:"mybounty",component:Rt,meta:{requireAuth:!0}},{path:"/mybounty/:taskNumber",name:"mybountyunit",component:Dt,meta:{requireAuth:!0}},{path:"/mytask",name:"mytask",component:Wt,meta:{requireAuth:!0}},{path:"/mytask/:taskNumber",name:"mytaskunit",component:Gt,meta:{requireAuth:!0}},{path:"/admin",name:"admin",component:R,meta:{requireAuth:!0}},{path:"/test",name:"test",component:fn},{path:"/collections",name:"collections",component:De,meta:{requireAuth:!0}},{path:"/collection/@:author/:permlink",name:"collection",component:We},{path:"/wallet",name:"wallet",component:cn},{path:"/about",name:"about",component:Ge},{path:"/newbie",name:"newbie",component:en},{path:"/post",name:"post",component:pe,meta:{requireAuth:!0}},{path:"/postorder",name:"postorder",component:ke,meta:{requireAuth:!0}},{path:"/postbounty",name:"postbounty",component:$e,meta:{requireAuth:!0}},{path:"/edit/:permlink",name:"edit",component:Re,meta:{requireAuth:!0}}],gn=new b["a"]({mode:"hash",base:"/",routes:hn}),vn=gn,bn=n("ae8c"),kn=n("022b"),wn=n.n(kn);r["default"].use(bn["a"]);var _n=new bn["a"].Store({state:{nickname:wn.a.get("nickname"),addr:wn.a.get("addr"),db:{},articles:[],postinstance:{},orders:[],ordertinstance:{},walletinstance:{},exchangeinstance:{},accessinstance:{},admins:{},adminsLower:{},bountyinstance:{},bountys:[],collections:[],searchPosts:[],repliestoauthor:[]},mutations:{saveUser:function(t,e){t.nickname=e.nickname,t.addr=e.addr,wn.a.set("nickname",e.nickname,"1d"),wn.a.set("addr",e.addr,"1d")},savePostInstance:function(t,e){t.postinstance=e},saveArticles:function(t,e){t.articles=e},saveOrderInstance:function(t,e){t.ordertinstance=e},saveOrders:function(t,e){t.orders=e},saveBountyInstance:function(t,e){t.bountyinstance=e},saveBountys:function(t,e){t.bountys=e},saveCollections:function(t,e){t.collections=e},saveSearchPosts:function(t,e){t.searchPosts=e},saveDB:function(t,e){t.db=e},saveWalletInstance:function(t,e){t.walletinstance=e},saveExchangeInstance:function(t,e){t.exchangeinstance=e},saveAccessInstance:function(t,e){t.accessinstance=e},saveAdmins:function(t,e){t.admins=e},saveAdminsLower:function(t,e){t.adminsLower=e},clearUser:function(t){t.nickname=null,t.addr=null,wn.a.remove("nickname"),wn.a.remove("addr")}}}),yn=n("6483"),xn=(n("df63"),n("f46b"),n("6f2f")),Cn=n.n(xn),$n=(n("b2ab"),n("79b2")),Ln=n.n($n),On=n("82ae"),Sn=n.n(On),jn=n("2d97"),An=n.n(jn),Rn=n("344c"),Fn=n.n(Rn),Tn=n("7742"),En=n.n(Tn),Pn=n("e564"),In=function(){function t(t,e){for(var n="",r=t;r>0;--r)n+=e[Math.floor(Math.random()*e.length)];return n}return t(5,"0123456789abcdefghijklmnopqrstuvwxyz")},Dn=function(){function t(t,e){for(var n="",r=t;r>0;--r)n+=e[Math.floor(Math.random()*e.length)];return n}return t(8,"0123456789")},Nn=function(t){var e=new Date(1e3*t),n=e.getFullYear()+"-",r=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",s=e.getHours()+":",i=e.getMinutes()+":",o=e.getSeconds();return n+r+a+s+i+o},Bn=function(t){var e=parseInt(t),n=0,r=0;e>60&&(n=parseInt(e/60),e=parseInt(e%60),n>60&&(r=parseInt(n/60),n=parseInt(n%60)));var a="";return n>0&&(a=parseInt(n)+"分"+a),r>0&&(a=parseInt(r)+"小时"+a),a},Mn=function(){return.001*Date.parse(new Date)},qn=function(t){var e,n,r,a,s,i;e="",r=t.length,n=0;while(n<r)switch(a=t[n++],a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(a);break;case 12:case 13:s=t[n++],e+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=t[n++],i=t[n++],e+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&i)<<0);break}return e},Hn=function(t){if(t=this.web3.utils.fromWei(t,"ether"),t&&null!=t){t=String(t);var e=t.split(".")[0],n=t.split(".")[1];n=n?n.length>=2?"."+n.substr(0,2):"."+n+"0":".00";var r=e.split("").reverse().join("").match(/(\d{1,3})/g);return(Number(t)<0?"-":"")+r.join(",").split("").reverse().join("")+n}return 0===t?"0.00":""},Wn=function(){var t=this;return new Promise((function(e){function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.axios.get("/Post.json");case 2:return r=n.sent,a=t.TruffleContract(r.data),a.setProvider(t.web3Provider),n.next=7,a.deployed();case 7:s=n.sent,t.$store.commit("savePostInstance",s),e(s);case 10:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()}))},Jn=function(t){var e=this;return new Promise((function(n){function r(){return a.apply(this,arguments)}function a(){return a=Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i,o,c,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.id();case 2:a=r.sent,s=[],i=a;case 5:if(!(i>0)){r.next=21;break}return r.next=8,t.get(i);case 8:return o=r.sent,r.next=11,e.ipfs.cat(o[0]);case 11:c=r.sent,u=e.utf8ToStr(c),l=JSON.parse(u),l.uid=i,l.voted=o[2],l.amount=o[3],s.push(l);case 18:i--,r.next=5;break;case 21:e.$store.commit("saveArticles",s),n(s);case 23:case"end":return r.stop()}}),r)}))),a.apply(this,arguments)}r()}))},Un=function(){var t=this;return new Promise((function(e){function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.axios.get("/Purchase.json");case 2:return r=n.sent,a=t.TruffleContract(r.data),a.setProvider(t.web3Provider),n.next=7,a.deployed();case 7:s=n.sent,t.$store.commit("saveOrderInstance",s),e(s);case 10:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()}))},Kn=function(t){var e=this;return new Promise((function(n){function r(){return a.apply(this,arguments)}function a(){return a=Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i,o,c,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.id();case 2:a=r.sent,s=[],i=a;case 5:if(!(i>0)){r.next=21;break}return r.next=8,t.getOrder(i);case 8:return o=r.sent,r.next=11,e.ipfs.cat(o[0]);case 11:c=r.sent,u=e.utf8ToStr(c),l=JSON.parse(u),l.uid=i,l.buyers=o[2],l.state=o[4],s.push(l);case 18:i--,r.next=5;break;case 21:e.$store.commit("saveOrders",s),n();case 23:case"end":return r.stop()}}),r)}))),a.apply(this,arguments)}r()}))},Yn=function(){var t=this;return new Promise((function(e){function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.axios.get("/Bounty.json");case 2:return r=n.sent,a=t.TruffleContract(r.data),a.setProvider(t.web3Provider),n.next=7,a.deployed();case 7:s=n.sent,t.$store.commit("saveBountyInstance",s),e(s);case 10:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()}))},zn=function(t){var e=this;return new Promise((function(n){function r(){return a.apply(this,arguments)}function a(){return a=Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i,o,c,u,l,d,m,p,f,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.id();case 2:a=r.sent,s=[],i=a;case 5:if(!(i>0)){r.next=39;break}return r.next=8,t.getTask(i);case 8:return o=r.sent,r.next=11,e.ipfs.cat(o[0]);case 11:c=r.sent,u=e.utf8ToStr(c),l=JSON.parse(u),l.uid=i,l.promoter=o[1],l.hunterA=o[2],l.hunters=o[3],l.reasonHashs=o[4],d=[],m=0;case 21:if(!(m<l.reasonHashs.length)){r.next=31;break}return r.next=24,e.ipfs.cat(l.reasonHashs[m]);case 24:p=r.sent,f=e.utf8ToStr(p),h=JSON.parse(f),d.push(h);case 28:m++,r.next=21;break;case 31:l.reasons=d,l.taskStart=o[6],l.taskDeadLine=o[7],l.state=o[8],s.push(l);case 36:i--,r.next=5;break;case 39:e.$store.commit("saveBountys",s),n();case 41:case"end":return r.stop()}}),r)}))),a.apply(this,arguments)}r()}))},Gn=function(){var t=this;return new Promise((function(e){function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.axios.get("/LarkStone.json");case 2:return r=n.sent,a=t.TruffleContract(r.data),a.setProvider(t.web3Provider),n.next=7,a.deployed();case 7:s=n.sent,t.$store.commit("saveWalletInstance",s),e();case 10:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()}))},Xn=function(){var t=this;return new Promise((function(e){function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.axios.get("/Exchange.json");case 2:return r=n.sent,a=t.TruffleContract(r.data),a.setProvider(t.web3Provider),n.next=7,a.deployed();case 7:s=n.sent,t.$store.commit("saveExchangeInstance",s),e();case 10:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()}))},Zn=function(){var t=this;return new Promise((function(e){function n(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function n(){var r,a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.axios.get("/AccessControl.json");case 2:return r=n.sent,a=t.TruffleContract(r.data),a.setProvider(t.web3Provider),n.next=7,a.deployed();case 7:s=n.sent,t.$store.commit("saveAccessInstance",s),e();case 10:case"end":return n.stop()}}),n)}))),r.apply(this,arguments)}n()}))},Qn=n("a352"),Vn=function(){var t,e,n=this.$store.state.username,r=this.$store.state.username,a=this.$store.state.username+"collection",s=this.$store.state.username+"reply",i=this.$store.state.username+"comments",o=this.$store.state.username+"replytoauthor",c=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB;return c||alert("你的浏览器不支持IndexedDB"),new Promise((function(u){e=c.open(n,3),e.onupgradeneeded=function(e){if(t=e.target.result,!t.objectStoreNames.contains(r)){var n=t.createObjectStore(r,{keyPath:"id",autoIncrement:!0});n.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(a)){var c=t.createObjectStore(a,{keyPath:"id",autoIncrement:!0});c.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(s)){var u=t.createObjectStore(s,{keyPath:"id",autoIncrement:!0});u.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(i)){var l=t.createObjectStore(i,{keyPath:"id",autoIncrement:!0});l.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(o))t.createObjectStore(o,{keyPath:"id",autoIncrement:!0})},e.onsuccess=function(e){t=e.target.result,console.log(666,"db版本号",t.version),t.onerror=function(t){alert("Database error:"+t.target.errorCode),console.dir(t.target)},u(t)},e.onerror=function(t){console.log(t,"数据库打开错误")}}))},tr=function(t){var e=this.$store.state.username,n=t.transaction([e],"readwrite"),r=n.objectStore(e),a=[];return new Promise((function(t){r.openCursor().onsuccess=function(e){var n=e.target.result;n?(a.push(n.value),n.continue()):t(a)},r.openCursor().onerror=function(t){console.dir(t)}}))},er=function(t){var e=this.$store.state.username+"collection",n=t.transaction([e],"readwrite"),r=n.objectStore(e),a=[];return new Promise((function(t){r.openCursor().onsuccess=function(e){var n=e.target.result;n?(a.push(n.value),n.continue()):t(a)},r.openCursor().onerror=function(t){console.dir(t)}}))},nr=function(t,e,n){return new Promise((function(r){var a=e.transaction([n],"readwrite");a.oncomplete=function(t){console.log("536, 事务操作完成"),r()},a.onerror=function(t){console.log("事务操作出错"),console.dir(t)},a.onsuccess=function(t){console.log("事务操作成功")};var s=a.objectStore(n);s.add(t)}))};r["default"].use(yn["a"]),r["default"].use(Cn.a);var rr,ar,sr=Pn.trim().split(/\s+/);"undefined"!==typeof window.ethereum?(console.log(111,"metamask"),ar=window.ethereum,rr=new Fn.a(window.ethereum)):(console.log(222,"无metamask"),alert("没有安装metamask！\n 请安装！ https://metamask.io "));var ir=Ln()({host:"steemjiang.com",port:"9001",protocol:"https"});r["default"].prototype.ipfs=ir;var or=n("71d8").init("DYX36PF9I32G7TDQDFF97CSK24SXWZXIN9","ropsten","3000");r["default"].prototype.getstr=In,r["default"].prototype.getNum=Dn,r["default"].prototype.timeFormat=Nn,r["default"].prototype.formatSeconds=Bn,r["default"].prototype.getTimeStamp=Mn,r["default"].prototype.getPostInstance=Wn,r["default"].prototype.getArticles=Jn,r["default"].prototype.getOrderInstance=Un,r["default"].prototype.getOrders=Kn,r["default"].prototype.getBountyInstance=Yn,r["default"].prototype.getTasks=zn,r["default"].prototype.getWalletInstance=Gn,r["default"].prototype.getExchangeInstance=Xn,r["default"].prototype.getAccessInstance=Zn,r["default"].prototype.utf8ToStr=qn,r["default"].prototype.weiToEth=Hn,r["default"].prototype.imgAdd=Qn["a"],r["default"].prototype.initDatabase=Vn,r["default"].prototype.getAllPosts=tr,r["default"].prototype.getCollections=er,r["default"].prototype.saveOneToDb=nr,r["default"].prototype.TruffleContract=An.a,r["default"].prototype.web3=rr,r["default"].prototype.web3Provider=ar,r["default"].prototype.axios=Sn.a,r["default"].prototype.ethapi=or,r["default"].prototype.abi=En.a,r["default"].prototype.blackLists=sr,r["default"].config.productionTip=!1,new r["default"]({router:vn,store:_n,render:function(t){return t(v)}}).$mount("#app"),vn.beforeEach((function(t,e,n){t.meta.requireAuth?_n.state.nickname?n():n({name:"login"}):n()}))},"56dd":function(t,e,n){"use strict";var r=n("8ebb"),a=n.n(r);a.a},"58cc":function(t,e,n){},"5f95":function(t,e,n){},6:function(t,e){},6442:function(t,e,n){},"66e3":function(t,e,n){},"671a":function(t,e,n){"use strict";var r=n("c60a"),a=n.n(r);a.a},"6dce":function(t,e,n){"use strict";var r=n("66e3"),a=n.n(r);a.a},"6e51":function(t,e,n){"use strict";var r=n("6f9f"),a=n.n(r);a.a},"6f9f":function(t,e,n){},7:function(t,e){},"785f":function(t,e,n){},"7c9e":function(t,e,n){"use strict";var r=n("4d61"),a=n.n(r);a.a},"7f16":function(t,e,n){"use strict";var r=n("990c"),a=n.n(r);a.a},"7f3b":function(t,e,n){"use strict";(function(t){n("fe8a"),n("e35a"),n("0d7a"),n("6db4"),n("b449");var r=n("5d83"),a=n("3a5e");e["a"]={name:"Article",data:function(){return{db:{},body:"",title:"",keywords:"",isLoading:!1,flag:!1}},methods:{post:function(){this.flag=!1,this.isLoading=!0;var e=this.$store.state.nickname,n=this.$store.state.postinstance,a=this.$store.state.addr,s=this.getstr(),i=this.title,o=this.body,c=this.getTimeStamp(),u=this.keywords.trim().split(/\s+/),l=this;function d(){return m.apply(this,arguments)}function m(){return m=Object(r["a"])(regeneratorRuntime.mark((function r(){var d,m,p,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return d={title:i,nickname:e,addr:a,permlink:s,body:o,keywords:u,created:c},m=t.from(JSON.stringify(d)),r.next=4,l.ipfs.add(m);case 4:return p=r.sent,f=p[0].hash,r.next=8,n.postArticle(f,{from:a});case 8:r.sent,l.$store.commit("saveArticles",[]),l.$router.push({path:"/"});case 11:case"end":return r.stop()}}),r)}))),m.apply(this,arguments)}d()},uploadimg:function(t,e){this.imgAdd(t,e)}},components:{Loading:a["a"]},mounted:function(){var t=this,e=this.$store.state.postinstance;function n(){return a.apply(this,arguments)}function a(){return a=Object(r["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=11;break}return console.log(777,"instance为空"),n.next=4,t.getPostInstance();case 4:return r=n.sent,n.next=7,t.getArticles(r);case 7:t.isLoading=!1,t.flag=!0,n.next=22;break;case 11:if(0!=t.$store.state.articles){n.next=19;break}return console.log(666,"如果文章更新！"),n.next=15,t.getArticles(e);case 15:t.isLoading=!1,t.flag=!0,n.next=22;break;case 19:console.log(2222,"啥也没干！"),t.isLoading=!1,t.flag=!0;case 22:case"end":return n.stop()}}),n)}))),a.apply(this,arguments)}n()}}}).call(this,n("fd40").Buffer)},8:function(t,e){},"84f2":function(t,e,n){"use strict";var r=n("785f"),a=n.n(r);a.a},8780:function(t,e,n){},"8e37":function(t,e,n){"use strict";var r=n("5611"),a=n.n(r);a.a},"8ebb":function(t,e,n){},9:function(t,e){},"963c":function(t,e,n){"use strict";var r=n("0f62"),a=n.n(r);a.a},9907:function(t,e,n){},"990c":function(t,e,n){},"9e0d":function(t,e,n){"use strict";var r=n("58cc"),a=n.n(r);a.a},a352:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r}));n("e18c");var r=function(e,n){var r="https://steemjiang.com:8081/ipfs/",a=this,s=function(e){return new Promise((function(n,r){var s=t.from(e.result);a.ipfs.add(s).then((function(t){n(t[0].hash)})).catch((function(t){console.error(t),r(t)}))}))},i=new FileReader;i.readAsArrayBuffer(n),i.onloadend=function(t){s(i).then((function(t){a.$refs.md.$img2Url(e,r+t)}))}}}).call(this,n("fd40").Buffer)},a3d0:function(t,e,n){},a55b:function(t,e,n){"use strict";var r=n("10f6"),a=n.n(r);a.a},abc0:function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="abc0"},ada1:function(t,e,n){},b2ff:function(t,e,n){"use strict";var r=n("8780"),a=n.n(r);a.a},ba9d:function(t,e,n){"use strict";var r=n("1bb1"),a=n.n(r);a.a},bb5c:function(t,e,n){"use strict";var r=n("6442"),a=n.n(r);a.a},c211:function(t,e,n){"use strict";var r=n("d387"),a=n.n(r);a.a},c2fb:function(t,e,n){"use strict";var r=n("21d6"),a=n.n(r);a.a},c60a:function(t,e,n){},c819:function(t,e,n){},ce6d:function(t,e,n){"use strict";var r=n("3915"),a=n.n(r);a.a},d1d7:function(t,e,n){"use strict";(function(t){n("053b"),n("fe8a"),n("b449");var r=n("5d83"),a=n("3a5e");e["a"]={name:"PostOrder",data:function(){return{db:{},body:"",content:"",name:"",price:"",contact:"",isLoading:!1,flag:!1}},methods:{post:function(){this.flag=!1,this.isLoading=!0;var e=this.$store.state.nickname,n=this.$store.state.ordertinstance,a=this.$store.state.addr,s=this.name,i=this.getNum(),o=this.price,c=this.content,u=this.contact,l=this.body,d=this.getTimeStamp(),m=this;function p(){return f.apply(this,arguments)}function f(){return f=Object(r["a"])(regeneratorRuntime.mark((function r(){var p,f,h,g,v;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return p=m.web3.utils.toWei(o,"ether"),f={name:s,nickname:e,addr:a,orderNumber:i,content:c,contact:u,body:l,price:p,created:d},h=t.from(JSON.stringify(f)),r.next=5,m.ipfs.add(h);case 5:return g=r.sent,v=g[0].hash,r.next=9,n.postOrder(v,p,{from:a});case 9:r.sent,m.$store.commit("saveOrders",[]),m.$router.push({path:"/market"});case 12:case"end":return r.stop()}}),r)}))),f.apply(this,arguments)}p()},get:function(){var t=this,e="QmZEBDS4Sh9Yhr48rUSLKMbyPDsr4rvRZXmAsfwEVfgHtG";function n(){return a.apply(this,arguments)}function a(){return a=Object(r["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.ipfs.cat(e);case 2:r=n.sent,t.utf8ArrayToStr(r);case 4:case"end":return n.stop()}}),n)}))),a.apply(this,arguments)}n()},uploadimg:function(t,e){this.imgAdd(t,e)}},components:{Loading:a["a"]},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function n(){return a.apply(this,arguments)}function a(){return a=Object(r["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(0!==Object.keys(e).length){n.next=11;break}return console.log(888,"instance为空，是刷新页面"),n.next=4,t.getOrderInstance();case 4:return r=n.sent,n.next=7,t.getOrders(r);case 7:t.isLoading=!1,t.flag=!0,n.next=22;break;case 11:if(0!=t.$store.state.orders){n.next=19;break}return console.log(667,"如果文章更新！"),n.next=15,t.getOrders(e);case 15:t.isLoading=!1,t.flag=!0,n.next=22;break;case 19:console.log(2233,"啥也没干！"),t.isLoading=!1,t.flag=!0;case 22:case"end":return n.stop()}}),n)}))),a.apply(this,arguments)}n()}}}).call(this,n("fd40").Buffer)},d387:function(t,e,n){},d7a1:function(t,e,n){t.exports=n.p+"img/logo.5c9d8489.svg"},e564:function(t){t.exports=JSON.parse('"0x69F8060a865f5BDE37a515B1892835062AA73D64 spaminator mack-bot liebin"')},e8a9:function(t,e,n){"use strict";var r=n("3f38"),a=n.n(r);a.a},f0a2:function(t,e,n){},f7ca:function(t,e,n){"use strict";var r=n("5f95"),a=n.n(r);a.a},f8a4:function(t,e,n){},fb7f:function(t,e,n){"use strict";var r=n("f0a2"),a=n.n(r);a.a},fda1:function(t,e,n){}});
//# sourceMappingURL=app.56f0232a.js.map