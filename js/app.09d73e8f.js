(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],d=0,m=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&m.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(m.length)m.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(e--,1),t=i(i.s=r[0]))}return t}var n={},a={app:0},s=[];function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=n,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;s.push([1,"chunk-vendors"]),r()})({0:function(t,e){},"0338":function(t,e,r){},"034f":function(t,e,r){"use strict";var n=r("f8a4"),a=r.n(n);a.a},"0632":function(t,e,r){"use strict";(function(t){r("053b"),r("fe8a"),r("b449");var n=r("5d83"),a=r("3a5e");e["a"]={name:"PostBounty",data:function(){return{db:{},content:"",name:"",contact:"",bonus:"",checkBonusFlag:!0,hour:"",minute:"",checkHourFlag:!0,checkMinuteFlag:!0,isLoading:!1,flag:!1,approveFlag:!0}},methods:{letapprove:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.approveFlag=!1,e.next=3,t.approve();case 3:return e.next=5,t.getBalanceAndAllowance();case 5:case"end":return e.stop()}}),e)})))()},checkBonus:function(){var t=/^\d+(\.\d+)?$/,e=t.test(this.bonus);this.checkBonusFlag=e},checkHour:function(){var t=/^[0-9]+$/,e=t.test(this.hour);this.checkHourFlag=e},checkMinute:function(){var t=/^[0-9]+$/,e=t.test(this.minute);this.checkMinuteFlag=e},post:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,c,l,u,d,m,p,f,h,g,b,v;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:if(""===e.name||""===e.contact||""===e.content){r.next=35;break}if(!(parseFloat(e.$store.state.balanceOf)>=parseFloat(1.5*e.bonus))){r.next=32;break}return e.flag=!1,e.isLoading=!0,n=e.$store.state.nickname,a=e.$store.state.bountyinstance,s=e.$store.state.addr,i=e.name,o=e.getNum(),c=e.bonus,l=e.contact,u=e.content,d=e.hour,m=e.minute,p=e.getTimeStamp(),f=e.web3.utils.toWei(c,"ether"),h={name:i,nickname:n,taskNumber:o,contact:l,content:u,bonus:f,created:p},g=t.from(JSON.stringify(h)),r.next=22,e.ipfs.add(g);case 22:return b=r.sent,v=b[0].hash,r.next=26,a.setTask(v,f,d,m,{from:s,gasPrice:e.gasPrice});case 26:return r.next=28,e.getBalanceAndAllowance();case 28:e.$store.commit("saveBountys",[]),e.$router.push({path:"/"}),r.next=33;break;case 32:alert("您的灵石余额不足！");case 33:r.next=36;break;case 35:alert("名称、联系、描述等不能为空，请填写！");case 36:case"end":return r.stop()}}),r)})))()},uploadimg:function(t,e){this.imgAdd(t,e)}},computed:{isApprove:function(){return parseFloat(this.$store.state.allowance)<parseFloat(this.bonus)}},components:{Loading:a["a"]},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function r(){return a.apply(this,arguments)}function a(){return a=Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=10;break}return r.next=3,t.getBountyInstance();case 3:return n=r.sent,r.next=6,t.getTasks(n);case 6:t.isLoading=!1,t.flag=!0,r.next=19;break;case 10:if(0!=t.$store.state.bountys){r.next=17;break}return r.next=13,t.getTasks(e);case 13:t.isLoading=!1,t.flag=!0,r.next=19;break;case 17:t.isLoading=!1,t.flag=!0;case 19:if(""!==t.$store.state.allowance){r.next=24;break}return r.next=22,t.getBalanceAndAllowance();case 22:r.next=24;break;case 24:case"end":return r.stop()}}),r)}))),a.apply(this,arguments)}r()}}}).call(this,r("fd40").Buffer)},1:function(t,e,r){t.exports=r("56d7")},10:function(t,e){},"13f9":function(t,e,r){"use strict";var n=r("5e62"),a=r.n(n);a.a},"1a68":function(t,e,r){"use strict";var n=r("d3ed"),a=r.n(n);a.a},2:function(t,e){},"22dc":function(t,e,r){"use strict";(function(t){r("fe59"),r("fe8a"),r("08ba"),r("b449");var n=r("5d83"),a=r("3a5e");e["a"]={name:"Task",data:function(){return{task:{},reason:"",hunterContact:"",isLoading:!1,isApplied:!1,isPromoter:!1,applyFlag:!0}},methods:{apply:function(e){var r=this;return Object(n["a"])(regeneratorRuntime.mark((function n(){var a,s,i,o,c,l,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,r.unlockWallet();case 2:if(""===r.reason||""===r.hunterContact){n.next=20;break}return r.applyFlag=!1,a=r.$store.state.bountyinstance,s=r.$store.state.addr,i=r.reason,o=r.hunterContact,c={reason:i,hunterContact:o},l=t.from(JSON.stringify(c)),n.next=12,r.ipfs.add(l);case 12:return u=n.sent,d=u[0].hash,n.next=16,a.applyTask(e,d,{from:s,gasPrice:r.gasPrice});case 16:r.isApplied=!0,r.$store.commit("saveBountys",[]),n.next=21;break;case 20:alert("申请理由和联系不能为空！");case 21:case"end":return n.stop()}}),n)})))()},taskFilter:function(){var t=this,e=this.$store.state.bountys,r=this.$route.params.taskNumber;e.forEach((function(e){e.taskNumber===r&&(t.task=e)}))},getTaskDone:function(){var t=this,e=this.$store.state.addr,r=this.task.hunters;r.forEach((function(r){r.toLowerCase()==e&&(t.isApplied=!0)})),this.task.promoter.toLowerCase()===this.$store.state.addr&&(this.isPromoter=!0)}},components:{Loading:a["a"]},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function r(){return a.apply(this,arguments)}function a(){return a=Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=11;break}return r.next=3,t.getBountyInstance();case 3:return n=r.sent,r.next=6,t.getTasks(n);case 6:t.taskFilter(),t.getTaskDone(),t.isLoading=!1,r.next=22;break;case 11:if(0!=t.$store.state.bountys){r.next=19;break}return r.next=14,t.getTasks(e);case 14:t.taskFilter(),t.getTaskDone(),t.isLoading=!1,r.next=22;break;case 19:t.taskFilter(),t.getTaskDone(),t.isLoading=!1;case 22:case"end":return r.stop()}}),r)}))),a.apply(this,arguments)}r()},filters:{}}}).call(this,r("fd40").Buffer)},"283b":function(t,e,r){"use strict";var n=r("676c"),a=r.n(n);a.a},"283d":function(t,e,r){"use strict";var n=r("95d0"),a=r.n(n);a.a},2986:function(t,e,r){"use strict";var n=r("61f7"),a=r.n(n);a.a},"2a05":function(t,e,r){"use strict";var n=r("ffd8"),a=r.n(n);a.a},3:function(t,e){},"30ea":function(t,e,r){"use strict";var n=r("d51c"),a=r.n(n);a.a},"38e9":function(t,e,r){},"3a5e":function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"loading"})},a=[],s={name:"Loading"},i=s,o=(r("7f16"),r("4023")),c=Object(o["a"])(i,n,a,!1,null,"38280d7f",null);e["a"]=c.exports},4:function(t,e){},4188:function(t,e,r){"use strict";var n=r("4d2c"),a=r.n(n);a.a},"48c4":function(t,e,r){},"4d2c":function(t,e,r){},"4e4e":function(t,e,r){},"4f31":function(t,e,r){"use strict";var n=r("606e"),a=r.n(n);a.a},5:function(t,e){},5611:function(t,e,r){},5657:function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e18c"),r("e35a"),r("1c2e"),r("0d7a"),r("6db4"),r("a133"),r("ed0d"),r("f09c"),r("e117");var n=r("0261"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("b-navbar",{attrs:{toggleable:"lg",type:"light",variant:"info",id:"navmanu"}},[n("b-navbar-brand",{on:{click:t.backtoindex}},[n("img",{staticClass:"d-inline-block align-top",attrs:{src:r("d7a1"),alt:"EtherLark"}}),t._v(" 测试网 ")]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",{staticClass:"ml-auto"},[n("router-link",{attrs:{to:"/"}},[t._v("悬赏")]),n("router-link",{attrs:{to:"/market"}},[t._v("集市")]),n("router-link",{attrs:{to:"/community"}},[t._v("社区")]),t.$store.state.nickname?n("div",[n("div",{attrs:{id:"drop2"}},[n("b-dropdown",{staticClass:"m-2 nickname",attrs:{id:"dropdown-grouped",text:"发布",variant:"transparent"}},[n("router-link",{attrs:{to:"/postbounty"}},[t._v("发布悬赏")]),n("b-dropdown-divider"),n("router-link",{attrs:{to:"/postorder"}},[t._v("发布商品")]),n("b-dropdown-divider"),n("router-link",{attrs:{to:"/post"}},[t._v("发布文章")])],1)],1)]):t._e(),t.$store.state.nickname?n("div",[n("div",{attrs:{id:"drop"}},[n("b-dropdown",{staticClass:"m-2 nickname",attrs:{id:"dropdown-grouped",text:"@"+t.$store.state.nickname,variant:"transparent"}},[n("b-dropdown-item-button",{on:{click:t.mybounty}},[t._v(" 我的悬赏 ")]),n("b-dropdown-divider"),n("b-dropdown-item-button",{on:{click:t.mytask}},[t._v(" 我的任务 ")]),n("b-dropdown-divider"),n("b-dropdown-item-button",{on:{click:t.myseller}},[t._v(" 我是卖家 ")]),n("b-dropdown-divider"),n("b-dropdown-item-button",{on:{click:t.mybuyer}},[t._v(" 我是买家 ")]),n("b-dropdown-divider"),n("b-dropdown-item-button",{on:{click:t.myarticles}},[t._v(" 我的文章 ")]),n("b-dropdown-divider"),n("b-dropdown-item-button",{on:{click:t.mywallet}},[t._v(" 我的钱包 ")]),n("b-dropdown-divider"),t.owner===t.$store.state.addr?n("div",[n("b-dropdown-item-button",{on:{click:t.admin}},[t._v(" 我是界主 ")]),n("b-dropdown-divider")],1):t._e(),n("b-dropdown-item-button",{on:{click:t.logout}},[t._v(" 注销 ")])],1)],1)]):n("div",[n("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1)],1)],1)],1),n("router-view"),n("Footer")],1)},s=[],i=(r("b449"),r("5d83")),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"myfooter"},[r("b-container",{staticClass:"bv-example-row"},[r("b-row",[r("b-col",[r("router-link",{attrs:{to:"/about"}},[t._v("关于百灵界")])],1),r("b-col",[r("a",{attrs:{href:"#"}},[t._v("Github")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://moochain.net"}},[t._v("链课")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://steemjiang.com"}},[t._v("SteemJiang")])])],1),r("b-row",[r("b-col",[r("a",{attrs:{target:"_blank",href:"https://steemjiang.com:8081/ipfs/QmSGiAu4YepwB23GtdMfEJ8ar2fCMKmZrw37xV5wgq2hDL"}},[t._v("用户手册(测试网)")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://github.com/ethereum/go-ethereum"}},[t._v("Go-ethereum")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://starnote.github.io/#/@lemooljiang/qqe4s"}},[t._v("开发手册")])]),r("b-col",[r("a",{attrs:{target:"_blank",href:"https://starnote.github.io"}},[t._v("星空笔记")])])],1)],1),t._m(0)],1)},c=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"info"},[t._v("Copyright©2020"),r("span",{staticStyle:{"padding-left":"1rem","padding-right":"1rem"}},[t._v("版权所有")]),t._v(" 百灵界是一个基于以太坊的区块链价值交易系统")])}],l={name:"Footer"},u=l,d=(r("283d"),r("4023")),m=Object(d["a"])(u,o,c,!1,null,"2a0b647a",null),p=m.exports,f={name:"App",data:function(){return{parmsg:"这是父数据"}},methods:{backtoindex:function(){this.$router.push({path:"/"})},myarticles:function(){this.$router.push({path:"/myarticles"})},myseller:function(){this.$router.push({path:"/myseller"})},mybuyer:function(){this.$router.push({path:"/mybuyer"})},mybounty:function(){this.$router.push({path:"/mybounty"})},mytask:function(){this.$router.push({path:"/mytask"})},mywallet:function(){this.$router.push({path:"/wallet"})},admin:function(){this.$router.push({path:"/admin125684"})},logout:function(){this.$store.commit("clearUser")}},components:{Footer:p},mounted:function(){var t=this;function e(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getWalletInstance();case 2:return e.next=4,t.getExchangeInstance();case 4:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}e()}},h=f,g=(r("034f"),Object(d["a"])(h,a,s,!1,null,null,null)),b=g.exports,v=r("1860"),k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("h2",[t._v("用户登录")]),r("div",[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{id:"inline-form-input-name",placeholder:"设置呢称(任意长度的任意字符，不能为空)"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}}),r("br"),t._v(" 地址： "+t._s(t.addr)+" "),r("div",{staticClass:"loginbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.login}},[t._v("登录")])],1)],1),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},_=[],y=r("3a5e"),w={name:"Login",data:function(){return{nickname:"",addr:"",isLoading:!1,flag:!0}},methods:{login:function(){this.flag=!1,this.isLoading=!0,""!==this.nickname&&""!==this.addr?(this.$store.commit("saveUser",{nickname:this.nickname,addr:this.addr}),this.$router.push({path:"/"})):(alert("呢称或地址不能为空！"),this.flag=!0)}},components:{Loading:y["a"]},mounted:function(){var t=this;function e(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ethereum.request({method:"eth_requestAccounts"});case 2:r=e.sent,t.addr=r[0],t.flag=!0;case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}e()}},x=w,C=(r("d960"),Object(d["a"])(x,k,_,!1,null,"5e682e83",null)),F=C.exports,$=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[t.owner===t.$store.state.addr?r("div",[r("h3",[t._v("欢迎您，界主大人！")]),t.flag?r("div",[t._v(" 呢称： "+t._s(t.$store.state.nickname)),r("br"),t._v(" 地址： "+t._s(t.$store.state.addr)+" "),r("br"),t._v(" 灵石总量： "+t._s(t.totalSupply)+" "),r("br"),r("br"),r("br"),t._v(" 兑换率： "+t._s(t.price)+" （1以太币 = "+t._s(t.price)+"灵石 ）"),r("br"),t._v(" 重设汇率: "),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"输入新汇率"},model:{value:t.newPrice,callback:function(e){t.newPrice=e},expression:"newPrice"}}),r("div",{staticClass:"loginbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.setPrice}},[t._v("重设汇率 ")])],1),r("br"),r("br"),t._v(" 提取兑换合约灵石： "),r("br"),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"输入数量"},model:{value:t.withdrawAmount,callback:function(e){t.withdrawAmount=e},expression:"withdrawAmount"}}),r("div",{staticClass:"loginbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.withdrawLark}},[t._v("提取灵石 ")])],1)],1):t._e(),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1):t._e()])},O=[],S=(r("fe8a"),{name:"Admin",data:function(){return{isLoading:!1,flag:!1,addAmount:"",price:"",newPrice:"",totalSupply:"",withdrawAmount:""}},methods:{setPrice:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.flag=!1,t.isLoading=!0,r=t.$store.state.addr,n=t.$store.state.exchangeinstance,e.next=6,n.setPrice(t.newPrice,{from:r,gasPrice:t.gasPrice});case 6:return e.next=8,t.getBalance();case 8:return e.next=10,t.getExchangeDone();case 10:t.newPrice="",t.isLoading=!1,t.flag=!0;case 13:case"end":return e.stop()}}),e)})))()},getBalance:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$store.state.walletinstance,e.next=3,r.totalSupply();case 3:n=e.sent,t.totalSupply=t.weiToEth(n);case 5:case"end":return e.stop()}}),e)})))()},getExchangeDone:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$store.state.exchangeinstance,e.next=3,r.getMessage();case 3:n=e.sent,t.price=n[1];case 5:case"end":return e.stop()}}),e)})))()},withdrawLark:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.flag=!1,t.isLoading=!0,r=t.$store.state.addr,n=t.$store.state.exchangeinstance,a=t.web3.utils.toWei(t.withdrawAmount,"ether"),e.next=7,n.withdrawLark(a,{from:r,gasPrice:t.gasPrice});case 7:return e.next=9,t.getBalance();case 9:return e.next=11,t.getExchangeDone();case 11:t.withdrawAmount="",t.isLoading=!1,t.flag=!0;case 14:case"end":return e.stop()}}),e)})))()}},components:{Loading:y["a"]},mounted:function(){var t=this,e=this.$store.state.walletinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=13;break}return r.next=3,t.getWalletInstance();case 3:return r.next=5,t.getExchangeInstance();case 5:return r.next=7,t.getBalance();case 7:return r.next=9,t.getExchangeDone();case 9:t.isLoading=!1,t.flag=!0,r.next=19;break;case 13:return r.next=15,t.getBalance();case 15:return r.next=17,t.getExchangeDone();case 17:t.isLoading=!1,t.flag=!0;case 19:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()}}),L=S,j=(r("6c00"),Object(d["a"])(L,$,O,!1,null,"14241be3",null)),A=j.exports,T=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("div",{staticClass:"orderlist"},[r("b-container",{staticClass:"bv-example-row"},[r("b-row",t._l(t.search(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/bounty/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/bounty/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： @"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.promoter))+")")]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"......"),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1),r("div",{staticStyle:{clear:"both"}})],1),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},P=[],E=(r("dbb3"),r("fe59"),r("b130"),r("77ad"),r("053b"),r("90aa"),r("f4e3"),r("5e9f"),r("08ba"),{name:"Index",data:function(){return{keywords:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.bountys;return e.filter((function(e){if("0"===e.state&&e.name.includes(t))return e}))},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,r){r.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==r.length&&alert("没有更多了！")}))}},computed:{},components:{Loading:y["a"]},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=9;break}return r.next=3,t.getBountyInstance();case 3:return n=r.sent,r.next=6,t.getTasks(n);case 6:t.isLoading=!1,r.next=16;break;case 9:if(0!=t.$store.state.bountys){r.next=15;break}return r.next=12,t.getTasks(e);case 12:t.isLoading=!1,r.next=16;break;case 15:t.isLoading=!1;case 16:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,r=t.match(e);return null===r?"https://steemjiang.com:8081/ipfs/QmegAj9BdJ1HGhZSJtFs4WUAen82aMQtcbnoxujd6YMQ5o":r[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""}}}),R=E,B=(r("4f31"),Object(d["a"])(R,T,P,!1,null,"dc69845e",null)),I=B.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v(t._s(t.article.title))]),r("p",{staticClass:"posttime"},[t._v(" @"+t._s(t.article.nickname)+"("+t._s(t.article.addr)+") "),r("span",{staticStyle:{"margin-left":"1rem"}},[t._v(" "+t._s(t.timeFormat(t.article.created)))])]),r("div",{attrs:{id:"textclass"}},[r("mavon-editor",{attrs:{value:t.article.body+"<br><br>"+t.keywords+t.article.keywords.join("　"),subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}})],1)])},M=[],D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"loading"})},H=[],W={name:"SmallLoading"},q=W,J=(r("99de"),Object(d["a"])(q,D,H,!1,null,"cf084520",null)),Q=J.exports,U={name:"Trend",data:function(){return{db:{},article:{},data:"",text:"",keywords:"关键词：　"}},methods:{articleFilter:function(){var t=this,e=this.$store.state.articles,r=this.$route.params.permlink;e.forEach((function(e){e.permlink===r&&(t.article=e)}))},addCollection:function(){var t=this.$store.state.db,e=this.$store.state.username+"collection",r=t.transaction([e],"readwrite");r.oncomplete=function(t){console.log("事务操作完成")},r.onerror=function(t){console.log("事务操作出错"),console.dir(t)},r.onsuccess=function(t){console.log("事务操作成功")};var n=r.objectStore(e),a=this.post;n.add(a);var s=this.$route.params.permlink;localStorage.setItem(s,"steemjiang"),this.flag=localStorage.getItem(this.$route.params.permlink)},uploadimg:function(t,e){this.imgAdd(t,e)}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!1};return t}},mounted:function(){var t=this,e=this.$store.state.postinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=10;break}return r.next=3,t.getPostInstance();case 3:return n=r.sent,r.next=6,t.getArticles(n);case 6:t.articleFilter(),t.isLoading=!1,r.next=19;break;case 10:if(0!=t.$store.state.articles){r.next=17;break}return r.next=13,t.getArticles(e);case 13:t.articleFilter(),t.isLoading=!1,r.next=19;break;case 17:t.articleFilter(),t.isLoading=!1;case 19:if(""!==t.$store.state.allowance){r.next=24;break}return r.next=22,t.getBalanceAndAllowance();case 22:r.next=24;break;case 24:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)}},components:{SmallLoading:Q}},Y=U,G=(r("7a58"),Object(d["a"])(Y,N,M,!1,null,"14944150",null)),K=G.exports,Z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"请输入标题或关键词"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._l(t.search(t.keywords),(function(e){return r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/article/"+e.permlink}},[r("b-img",{staticClass:"courseimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),r("div",{staticClass:"title"},[r("router-link",{attrs:{to:"/article/"+e.permlink}},[r("span",{staticStyle:{"font-size":"1.2rem"}},[t._v(t._s(e.title))]),r("br")])],1),r("p",{staticClass:"posttime"},[t._v(" @"+t._s(e.nickname)+"("+t._s(t._f("formatAddr")(e.addr))+") "),r("span",{staticStyle:{"margin-left":"1rem"}},[t._v(" "+t._s(t.timeFormat(e.created)))])]),r("p",{staticClass:"text"},[t._v(t._s(t._f("abstractFn")(e.body))+" ......")])],1)})),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],2)},z=[],V={name:"MyArticles",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.articles,r=this.myarticlesFilter(e);return r.filter((function(e){if(e.title.includes(t)||e.keywords.includes(t))return e}))},myarticlesFilter:function(t){var e=this,r=[];return t.forEach((function(t){t.addr===e.$store.state.addr&&r.push(t)})),r},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,r){r.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==r.length&&alert("没有更多了！")}))}},components:{Loading:y["a"]},mounted:function(){var t=this,e=this.$store.state.postinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=9;break}return r.next=3,t.getPostInstance();case 3:return n=r.sent,r.next=6,t.getArticles(n);case 6:t.isLoading=!1,r.next=16;break;case 9:if(0!=t.$store.state.articles){r.next=15;break}return r.next=12,t.getArticles(e);case 12:t.isLoading=!1,r.next=16;break;case 15:t.isLoading=!1;case 16:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{changeTime:function(t){var e=new Date(1e3*t),r=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",s=e.getHours()+":",i=e.getMinutes()+":",o=e.getSeconds();return r+n+a+s+i+o},formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,r=t.match(e);if(null!==r)return r[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,180)}return""}}},X=V,tt=(r("13f9"),Object(d["a"])(X,Z,z,!1,null,"7f3a83ce",null)),et=tt.exports,rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("div",{staticClass:"orderlist"},[r("b-container",{staticClass:"bv-example-row"},[r("b-row",t._l(t.search(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/market/"+e.orderNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),r("router-link",{attrs:{to:"/market/"+e.orderNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("卖家：@"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.addr))+")")]),r("br"),t._v(" 买家： "+t._s(e.buyers.length)+" 个"),r("br"),t._v(" 价格： "+t._s(t.weiToEth(e.price))+" 灵石"),r("br"),r("span",[t._v("时间："+t._s(t.timeFormat(e.created))+" ")]),r("br")])],1)])})),1)],1),r("div",{staticStyle:{clear:"both"}})],1),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},nt=[],at={name:"Market",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.orders,r=this.createdFilter(e);return r.filter((function(e){if(e.name.includes(t))return e}))},createdFilter:function(t){var e=[];return t.forEach((function(t){"0"===t.state&&e.push(t)})),e},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,r){r.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==r.length&&alert("没有更多了！")}))}},components:{Loading:y["a"]},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=9;break}return r.next=3,t.getOrderInstance();case 3:return n=r.sent,r.next=6,t.getOrders(n);case 6:t.isLoading=!1,r.next=16;break;case 9:if(0!=t.$store.state.orders){r.next=15;break}return r.next=12,t.getOrders(e);case 12:t.isLoading=!1,r.next=16;break;case 15:t.isLoading=!1;case 16:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,r=t.match(e);return null===r?"https://steemjiang.com:8081/ipfs/QmegAj9BdJ1HGhZSJtFs4WUAen82aMQtcbnoxujd6YMQ5o":r[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""}}},st=at,it=(r("8d72"),Object(d["a"])(st,rt,nt,!1,null,"43f98666",null)),ot=it.exports,ct=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("div",{staticClass:"orderlist"},[t.createdFilter(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"bountrytitle"},[t._v("正在销售的商品：")]),r("b-row",t._l(t.createdFilter(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/myseller/"+e.orderNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),r("router-link",{attrs:{to:"/myseller/"+e.orderNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("卖家：@"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.addr))+")")]),r("br"),t._v(" 买家： "+t._s(e.buyers.length)+" 个"),r("br"),t._v(" 价格： "+t._s(t.weiToEth(e.price))+" 灵石"),r("br"),r("span",[t._v("时间："+t._s(t.timeFormat(e.created))+" ")]),r("br")])],1)])})),1)],1)],1):t._e()]),t.cancelledFilter(t.keywords).length>0?r("div",{staticClass:"orderlist"},[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"finishedtitle"},[t._v("已下架的商品：")]),r("b-row",t._l(t.cancelledFilter(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/myseller/"+e.orderNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),r("router-link",{attrs:{to:"/myseller/"+e.orderNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("卖家：@"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.addr))+")")]),r("br"),t._v(" 买家： "+t._s(e.buyers.length)+" 个"),r("br"),t._v(" 价格： "+t._s(t.weiToEth(e.price))+" 灵石"),r("br"),r("span",[t._v("时间："+t._s(t.timeFormat(e.created))+" ")]),r("br")])],1)])})),1)],1),r("div",{staticStyle:{clear:"both"}})],1):t._e(),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},lt=[],ut={name:"Myseller",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{mysellerFilter:function(){var t=this,e=this.$store.state.orders,r=[];return e.forEach((function(e){e.addr.toLowerCase()===t.$store.state.addr&&r.push(e)})),r},createdFilter:function(t){var e=this.mysellerFilter(),r=[];return e.forEach((function(e){"0"===e.state&&e.name.includes(t)&&r.push(e)})),r},cancelledFilter:function(t){var e=this.mysellerFilter(),r=[];return e.forEach((function(e){"1"===e.state&&e.name.includes(t)&&r.push(e)})),r},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,r){r.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==r.length&&alert("没有更多了！")}))}},components:{Loading:y["a"]},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=9;break}return r.next=3,t.getOrderInstance();case 3:return e=r.sent,r.next=6,t.getOrders(e);case 6:t.isLoading=!1,r.next=16;break;case 9:if(0!=t.$store.state.orders){r.next=15;break}return r.next=12,t.getOrders(e);case 12:t.isLoading=!1,r.next=16;break;case 15:t.isLoading=!1;case 16:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,r=t.match(e);return null===r?"https://steemjiang.com:8081/ipfs/QmegAj9BdJ1HGhZSJtFs4WUAen82aMQtcbnoxujd6YMQ5o":r[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""}}},dt=ut,mt=(r("aa0d"),Object(d["a"])(dt,ct,lt,!1,null,"4a6b7a17",null)),pt=mt.exports,ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("div",{staticClass:"content"},[r("p",{staticClass:"posttime"},[r("span",{staticStyle:{"margin-right":"1.5rem","margin-left":"2rem"}},[t._v("卖单号："+t._s(t.order.orderNumber)+" ")]),t._v(" "+t._s(t.timeFormat(t.order.created)))]),r("p",{staticClass:"title"},[t._v(t._s(t.order.name))]),r("div",{staticClass:"text"},[t._v(" 买家： "+t._s(t.order.buyers.length)+" 个"),r("br"),t._v(" "+t._s(t.order.buyers)),r("br"),t._v(" 价格： "+t._s(t.weiToEth(t.order.price))+" 灵石"),r("br"),r("p",[t._v("内容： "),r("span",{staticClass:"neirong"},[t._v(t._s(t.decrypt(t.order.content)))]),r("br"),t._v(" 联系方式："),r("span",{staticClass:"neirong"},[t._v(" "+t._s(t.decrypt(t.order.contact))+" ")])]),t._v(" 描述： "),r("mavon-editor",{attrs:{value:t.order.body+"<br>",subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle,boxShadow:!1}})],1),t.isCancelled?r("div",{staticClass:"btn"},[t._v("卖单已取消！")]):r("div",{staticClass:"btn"},[t.cancellFlag?r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.cancerOrder(t.order.uid)}}},[t._v("取消卖单")])],1):r("div",{staticClass:"btn3"},[t._v("您已取消，请等待网络确认！")])])]),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},ht=[],gt={name:"MysellerUint",data:function(){return{order:{},keywords:"",author:"",permlink:"",isLoading:!1,isMyself:!1,isPurchased:!1,isCancelled:!1,cancellFlag:!0}},methods:{cancerOrder:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:return e.cancellFlag=!1,n=e.$store.state.ordertinstance,a=e.$store.state.addr,r.next=7,n.cancerOrder(t,{from:a,gasPrice:e.gasPrice});case 7:e.isCancelled=!0,e.$store.commit("saveOrders",[]);case 9:case"end":return r.stop()}}),r)})))()},getDoneMyOrder:function(){var t=this,e=this.$store.state.orders;e.forEach((function(e){e.orderNumber==t.$route.params.orderNumber&&(t.order=e)}))},getCancelldeFlag:function(){"1"===this.order.state&&(this.isCancelled=!0)}},components:{Loading:y["a"]},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=13;break}return console.log(8999,"instance为空，是刷新页面"),r.next=4,t.getOrderInstance();case 4:return e=r.sent,console.log(699,e),r.next=8,t.getOrders(e);case 8:t.getDoneMyOrder(),t.getCancelldeFlag(),t.isLoading=!1,r.next=26;break;case 13:if(0!=t.$store.state.orders){r.next=22;break}return console.log(667,"如果文章更新！"),r.next=17,t.getOrders(e);case 17:t.getDoneMyOrder(),t.getCancelldeFlag(),t.isLoading=!1,r.next=26;break;case 22:console.log(2233,"啥也没干！"),t.getDoneMyOrder(),t.getCancelldeFlag(),t.isLoading=!1;case 26:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{}},bt=gt,vt=(r("2986"),Object(d["a"])(bt,ft,ht,!1,null,"62784fcc",null)),kt=vt.exports,_t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("div",{staticClass:"orderlist"},[r("b-container",{staticClass:"bv-example-row"},[r("b-row",t._l(t.search(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/market/"+e.orderNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),r("router-link",{attrs:{to:"/market/"+e.orderNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("卖家：@"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.addr))+")")]),r("br"),t._v(" 买家： "+t._s(e.buyers.length)+" 个"),r("br"),t._v(" 价格： "+t._s(t.weiToEth(e.price))+" 灵石"),r("br"),r("span",[t._v("时间："+t._s(t.timeFormat(e.created))+" ")]),r("br")])],1)])})),1)],1),r("div",{staticStyle:{clear:"both"}})],1),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},yt=[],wt=(r("9302"),r("513c"),{name:"Mybuyer",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.orders,r=this.myBuyerFilter(e);return r.filter((function(e){if(e.name.includes(t))return e}))},myBuyerFilter:function(t){var e=this,r=[];return t.forEach((function(t){t.buyers.forEach((function(n){n.toLowerCase()===e.$store.state.addr&&(console.log(69999,"是买家！"),r.push(t))}))})),r},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,r){r.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==r.length&&alert("没有更多了！")}))}},components:{Loading:y["a"]},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=9;break}return r.next=3,t.getOrderInstance();case 3:return e=r.sent,r.next=6,t.getOrders(e);case 6:t.isLoading=!1,r.next=16;break;case 9:if(0!=t.$store.state.orders){r.next=15;break}return r.next=12,t.getOrders(e);case 12:t.isLoading=!1,r.next=16;break;case 15:t.isLoading=!1;case 16:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,r=t.match(e);return null===r?"https://steemjiang.com:8081/ipfs/QmegAj9BdJ1HGhZSJtFs4WUAen82aMQtcbnoxujd6YMQ5o":r[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""},dealNumber:function(t){if(t=this.web3.utils.fromWei(t,"ether"),t&&null!=t){t=String(t);var e=t.split(".")[0],r=t.split(".")[1];r=r?r.length>=2?"."+r.substr(0,2):"."+r+"0":".00";var n=e.split("").reverse().join("").match(/(\d{1,3})/g);return(Number(t)<0?"-":"")+n.join(",").split("").reverse().join("")+r}return 0===t?"0.00":""}}}),xt=wt,Ct=(r("59cb"),Object(d["a"])(xt,_t,yt,!1,null,"3ece79d1",null)),Ft=Ct.exports,$t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("div",{staticClass:"orderlist"},[t.createdFilter(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"bountrytitle"},[t._v("正在申请中的悬赏，请您翻个牌子吧：")]),r("b-row",t._l(t.createdFilter(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： @"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.promoter))+")")]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"......"),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t.confirmed(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"bountrytitle"},[t._v("猎人正在努力完成任务中，安心等待吧：")]),r("b-row",t._l(t.confirmed(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： @"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.promoter))+")")]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"......"),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t.hunterFinished(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"bountrytitle"},[t._v("猎人已提交任务，请您确认吧：")]),r("b-row",t._l(t.hunterFinished(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： @"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.promoter))+")")]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"......"),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t.promoterFinished(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"finishedtitle"},[t._v("已圆满结束的悬赏")]),r("b-row",t._l(t.promoterFinished(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： @"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.promoter))+")")]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"......"),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t.otherFinished(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"finishedtitle"},[t._v("未正常结束的悬赏")]),r("b-row",t._l(t.otherFinished(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： @"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.promoter))+")")]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"......"),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t.cancelledFilter(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"finishedtitle"},[t._v("已取消的悬赏")]),r("b-row",t._l(t.cancelledFilter(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mybounty/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： @"+t._s(e.nickname)+" ("+t._s(t._f("formatAddr")(e.promoter))+")")]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"......"),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t._e(),r("div",{staticStyle:{clear:"both"}})]),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},Ot=[],St={name:"MyBounty",data:function(){return{keywords:"",isLoading:!0,historyFlag:!1,searchBountyFlag:!1,bountys:[]}},methods:{myBountyFilter:function(){var t=this,e=this.$store.state.bountys,r=[];return e.forEach((function(e){e.promoter.toLowerCase()===t.$store.state.addr&&r.push(e)})),r},createdFilter:function(t){var e=this.myBountyFilter();return e.filter((function(e){if("0"===e.state&&e.name.includes(t))return e}))},confirmed:function(t){var e=this.myBountyFilter();return e.filter((function(e){if("2"===e.state&&e.name.includes(t))return e}))},hunterFinished:function(t){var e=this.myBountyFilter();return e.filter((function(e){if("3"===e.state&&e.name.includes(t))return e}))},promoterFinished:function(t){var e=this.myBountyFilter();return e.filter((function(e){if("5"===e.state&&e.name.includes(t))return e}))},otherFinished:function(t){var e=this.myBountyFilter();return e.filter((function(e){if("4"===e.state||"6"===e.state&&e.name.includes(t))return e}))},cancelledFilter:function(t){var e=this.myBountyFilter();return e.filter((function(e){if("1"===e.state&&e.name.includes(t))return e}))},searchHistory:function(){this.historyFlag=!this.historyFlag},searchBounty:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.searchBountyFlag=!t.searchBountyFlag,t.$store.state.addr,r=t.$store.state.bountyinstance,e.next=5,r.getPastEvents("SetTask",{fromBlock:8468674,toBlock:"latest"});case 5:n=e.sent,console.log(77,n),t.bountys=n;case 8:case"end":return e.stop()}}),e)})))()},searchCancel:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$store.state.addr,n=t.$store.state.bountyinstance,e.next=4,n.getPastEvents("CancelTask",{filter:{promoter:r},fromBlock:0,toBlock:"latest"});case 4:a=e.sent,console.log(88,a);case 6:case"end":return e.stop()}}),e)})))()}},components:{Loading:y["a"]},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=9;break}return r.next=3,t.getBountyInstance();case 3:return n=r.sent,r.next=6,t.getTasks(n);case 6:t.isLoading=!1,r.next=16;break;case 9:if(0!=t.$store.state.bountys){r.next=15;break}return r.next=12,t.getTasks(e);case 12:t.isLoading=!1,r.next=16;break;case 15:t.isLoading=!1;case 16:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,r=t.match(e);return null===r?"https://steemjiang.com:8081/ipfs/QmegAj9BdJ1HGhZSJtFs4WUAen82aMQtcbnoxujd6YMQ5o":r[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""}}},Lt=St,jt=(r("4188"),Object(d["a"])(Lt,$t,Ot,!1,null,"746f4b56",null)),At=jt.exports,Tt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("div",{staticClass:"content"},[r("p",{staticClass:"posttime"},[r("span",{staticStyle:{"margin-right":"1.5rem","margin-left":"2rem"}},[t._v(" 悬赏号："+t._s(t.task.taskNumber))]),t._v(" "+t._s(t.timeFormat(t.task.created))+" ")]),r("p",{staticClass:"title"},[t._v(t._s(t.task.name))]),r("div",{staticClass:"text"},[t._v(" 金主： @"+t._s(t.task.nickname)+" ("+t._s(t.task.promoter)+")"),r("br"),t._v(" 赏金： "),t.task.bonus?r("span",[t._v(t._s(t.weiToEth(t.task.bonus))+" 灵石"),r("br")]):t._e(),t._v(" 联系金主："+t._s(t.task.contact)),r("br"),t._v(" 任务描述： "),r("mavon-editor",{attrs:{value:t.task.content+"<br>",subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle,boxShadow:!1}}),r("br")],1),"0"===t.task.state?r("div",[t.cancellFlag?r("div",{staticClass:"btn2"},[t._v("悬赏申请中...... "),r("br"),r("br"),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.cancelTask(t.task.uid)}}},[t._v("取消悬赏")])],1):r("div",{staticClass:"btn3"},[t._v("您已取消，等待网络确认！")]),t._l(t.task.hunters,(function(e,n){return r("b-form-group",{staticClass:"hunter",attrs:{label:"已申请的猎人"+n}},[r("b-form-radio",{attrs:{name:"some-radios",value:e},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v(t._s(e))]),t.task.reasons[n]?r("div",{staticClass:"reason"},[r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.task.reasons[n].reason)+" ")]),r("strong",[t._v("联系方式：")]),t._v(t._s(t.task.reasons[n].hunterContact)+" ")]):t._e()],1)})),t.selected?r("div",{staticClass:"mt-3 hunter"},[t._v("中选猎人: "),r("strong",[t._v(t._s(t.selected))])]):t._e(),r("br"),t.selected?r("div",{staticClass:"btn3"},[t.confirmFlag?r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.confirmHunter(t.selected,t.task.uid)}}},[t._v("确认猎人")])],1):r("div",{staticClass:"btn3"},[t._v("您已提交，请等待网络确认！")])]):t._e(),r("br")],2):"1"===t.task.state?r("div",[r("span",{staticClass:"btn2"},[t._v("悬赏已取消！ ")])]):"2"===t.task.state?r("div",[t.leftTime>0?r("span",{staticClass:"btn2"},[t._v("任务进行中..... ")]):t._e(),r("div",{staticClass:"mt-3 reason"},[r("strong",[t._v("中选猎人: "+t._s(t.task.hunterA))]),r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage(t.task.hunterA).reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage(t.task.hunterA).hunterContact))])]),t.leftTime>0?r("div",{staticClass:"reason"},[r("p",{staticStyle:{color:"darkred"}},[t._v("任务剩余时间： "+t._s(t.leftTimeNow))]),r("p",{staticStyle:{"text-align":"center"}},[t._v("等待中选猎人提交任务！")])]):r("div",{staticClass:"btn3"},[t._v("任务已超时！"),r("br"),t.outOfTimeFlag2?r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.hunterAOutOfTime(t.task.uid)}}},[t._v("猎人超时未提交，悬赏提前结束！")])],1):r("div",{staticClass:"btn3"},[t._v("您已提交，等待网络确认！")])])]):"3"===t.task.state?r("div",[r("div",{staticClass:"mt-3 reason"},[r("strong",[t._v("中选猎人: "+t._s(t.task.hunterA))]),r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage(t.task.hunterA).reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage(t.task.hunterA).hunterContact))])]),r("span",{staticClass:"btn2"},[t._v("猎人已提交任务..... ")]),t.leftTime>0?r("div",{staticClass:"btn2"},[r("p",{staticStyle:{color:"darkred"}},[t._v("金主确认的剩余时间： "+t._s(t.leftTimeNow)+" ")]),t.finishedandfallFlag?r("div",{staticClass:"btn3"},[r("b-button",{staticStyle:{"margin-right":"1rem"},attrs:{variant:"outline-primary"},on:{click:function(e){return t.promoterFinished(t.task.uid)}}},[t._v(" 确认任务完成 ")]),r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.taskFallback(t.task.uid)}}},[t._v("退回任务")])],1):r("div",{staticClass:"btn3"},[t._v("您已提交，等待网络确认！")])]):r("div",{staticClass:"btn3"},[t._v("您已超时未确认！")])]):"4"===t.task.state?r("div",[r("div",{staticClass:"mt-3 reason"},[r("strong",[t._v("中选猎人: "+t._s(t.task.hunterA))]),r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage(t.task.hunterA).reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage(t.task.hunterA).hunterContact))])]),r("div",{staticClass:"btn2"},[t._v("猎人未提交，悬赏提前结束！")])]):"5"===t.task.state?r("div",[r("div",{staticClass:"mt-3 reason"},[r("strong",[t._v("中选猎人: "+t._s(t.task.hunterA))]),r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage(t.task.hunterA).reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage(t.task.hunterA).hunterContact))])]),r("div",{staticClass:"btn2"},[t._v("悬赏圆满完成！")])]):r("div",[r("div",{staticClass:"mt-3 reason"},[r("strong",[t._v("中选猎人: "+t._s(t.task.hunterA))]),r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage(t.task.hunterA).reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage(t.task.hunterA).hunterContact))])]),r("div",{staticClass:"btn2"},[t._v("您超时未确认，悬赏被猎人强制完成！")])])]),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},Pt=[],Et={name:"MyBountyUnit",data:function(){return{task:{},selected:"",isLoading:!1,hunterMessage:{},cancellFlag:!0,confirmFlag:!0,outOfTimeFlag2:!0,finishedandfallFlag:!0,timestamp:""}},methods:{taskFilter:function(){var t=this,e=this.$store.state.bountys,r=this.$route.params.taskNumber;e.forEach((function(e){e.taskNumber===r&&(t.task=e)}))},getHunterMessage:function(t){for(var e=this.task,r=0;r<e.hunters.length;r++)if(e.hunters[r]===t)return e.reasons[r]},confirmHunter:function(t,e){var r=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(222),n.next=3,r.unlockWallet();case 3:return r.confirmFlag=!1,a=r.$store.state.addr,s=r.$store.state.bountyinstance,n.next=8,s.confirmHunter(e,t,{from:a,gasPrice:r.gasPrice});case 8:return n.next=10,r.getTasks(s);case 10:r.taskFilter();case 11:case"end":return n.stop()}}),n)})))()},cancelTask:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:return e.cancellFlag=!1,n=e.$store.state.addr,a=e.$store.state.bountyinstance,r.next=7,a.cancelTask(t,{from:n,gasPrice:e.gasPrice});case 7:return r.next=9,e.getTasks(a);case 9:e.taskFilter();case 10:case"end":return r.stop()}}),r)})))()},promoterFinished:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:return e.finishedandfallFlag=!1,n=e.$store.state.addr,a=e.$store.state.bountyinstance,r.next=7,a.promoterFinished(t,{from:n,gasPrice:e.gasPrice});case 7:return r.next=9,e.getTasks(a);case 9:e.taskFilter();case 10:case"end":return r.stop()}}),r)})))()},taskFallback:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:return e.finishedandfallFlag=!1,n=e.$store.state.addr,a=e.$store.state.bountyinstance,r.next=7,a.taskFallback(t,{from:n,gasPrice:e.gasPrice});case 7:return r.next=9,e.getTasks(a);case 9:e.taskFilter();case 10:case"end":return r.stop()}}),r)})))()},hunterAOutOfTime:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:return e.outOfTimeFlag2=!1,n=e.$store.state.bountyinstance,a=e.$store.state.addr,r.next=7,n.hunterAOutOfTime(t,{from:a,gasPrice:e.gasPrice});case 7:return r.next=9,e.getTasks(n);case 9:e.taskFilter();case 10:case"end":return r.stop()}}),r)})))()}},components:{Loading:y["a"]},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t},leftTime:function(){var t=parseInt(this.task.taskStart)+parseInt(this.task.taskDeadLine);return t-this.timestamp},leftTimeNow:function(){var t=parseInt(this.task.taskStart)+parseInt(this.task.taskDeadLine),e=t-this.timestamp;return this.formatSeconds(e)}},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=11;break}return console.log(822,"instance为空，是刷新页面"),r.next=4,t.getBountyInstance();case 4:return n=r.sent,r.next=7,t.getTasks(n);case 7:t.taskFilter(),t.isLoading=!1,r.next=20;break;case 11:if(0!=t.$store.state.bountys){r.next=18;break}return r.next=14,t.getTasks(e);case 14:t.taskFilter(),t.isLoading=!1,r.next=20;break;case 18:t.taskFilter(),t.isLoading=!1;case 20:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r();var a=function(){t.timestamp=.001*Date.parse(new Date)};setInterval(a,1e3)},filters:{}},Rt=Et,Bt=(r("2a05"),Object(d["a"])(Rt,Tt,Pt,!1,null,"95ec529c",null)),It=Bt.exports,Nt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("div",{staticClass:"orderlist"},[t.applied(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"tasktitle"},[t._v("已申请的任务，请等待金主翻牌子吧")]),r("b-row",t._l(t.applied(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： "+t._s(t._f("formatAddr")(e.promoter)))]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"...... "),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t.confirmed(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"tasktitle"},[t._v("正在进行的任务，请您在时限内提交哦：")]),r("b-row",t._l(t.confirmed(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： "+t._s(t._f("formatAddr")(e.promoter)))]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"...... "),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t.hunterFinished(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"tasktitle"},[t._v("您已提交任务，等待金主确认吧：")]),r("b-row",t._l(t.hunterFinished(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： "+t._s(t._f("formatAddr")(e.promoter)))]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"...... "),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t.promoterFinished(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"finishedtitle"},[t._v("圆满完成的任务，棒棒的！")]),r("b-row",t._l(t.promoterFinished(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： "+t._s(t._f("formatAddr")(e.promoter)))]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"...... "),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t.otherFinished(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"finishedtitle"},[t._v("未正常结束的任务：")]),r("b-row",t._l(t.otherFinished(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： "+t._s(t._f("formatAddr")(e.promoter)))]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"...... "),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),t.failtobechosen(t.keywords).length>0?r("div",[r("b-container",{staticClass:"bv-example-row"},[r("div",{staticClass:"finishedtitle"},[t._v("落选的任务：")]),r("b-row",t._l(t.failtobechosen(t.keywords),(function(e){return r("b-col",{attrs:{sm:"12",md:"6",lg:"4"}},[r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("b-img",{staticClass:"orderimg",attrs:{src:t._f("takeImage")(e.content),fluid:""}})],1),r("router-link",{attrs:{to:"/mytask/"+e.taskNumber}},[r("span",{staticClass:"title"},[t._v(t._s(t.titleFormat(e.name)))])]),r("div",{staticClass:"text"},[r("span",[t._v("金主： "+t._s(t._f("formatAddr")(e.promoter)))]),r("br"),t._v(" 赏金： "+t._s(t.weiToEth(e.bonus))+" 灵石"),r("br"),t._v(" 任务： "+t._s(t._f("abstractFn")(e.content))+"...... "),r("br"),r("span",[t._v("发布时间："+t._s(t.timeFormat(e.created))+" ")]),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(e.taskDeadLine))),r("br")])],1)])})),1)],1)],1):t._e(),r("div",{staticStyle:{clear:"both"}})]),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},Mt=[],Dt={name:"MyTask",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{applied:function(t){var e=this,r=this.$store.state.bountys;return r.filter((function(r){if("0"===r.state&&r.name.includes(t))for(var n=0;n<r.hunters.length;n++)if(r.hunters[n].toLowerCase()===e.$store.state.addr)return r}))},failtobechosen:function(t){var e=this.$store.state.bountys,r=this.$store.state.addr;return e.filter((function(e){if("0"!==e.state&&e.hunterA.toLowerCase()!==r&&e.name.includes(t))for(var n=0;n<e.hunters.length;n++)if(e.hunters[n].toLowerCase()===r)return e}))},myTaskFilter:function(){var t=this,e=this.$store.state.bountys,r=[];return e.forEach((function(e){e.hunterA.toLowerCase()===t.$store.state.addr&&r.push(e)})),r},confirmed:function(t){var e=this.myTaskFilter();return e.filter((function(e){if("2"===e.state&&e.name.includes(t))return e}))},hunterFinished:function(t){var e=this.myTaskFilter();return e.filter((function(e){if("3"===e.state&&e.name.includes(t))return e}))},promoterFinished:function(t){var e=this.myTaskFilter();return e.filter((function(e){if("5"===e.state&&e.name.includes(t))return e}))},otherFinished:function(t){var e=this.myTaskFilter();return e.filter((function(e){if("4"===e.state||"6"===e.state&&e.name.includes(t))return e}))},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,r){r.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==r.length&&alert("没有更多了！")}))}},components:{Loading:y["a"]},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=9;break}return r.next=3,t.getBountyInstance();case 3:return n=r.sent,r.next=6,t.getTasks(n);case 6:t.isLoading=!1,r.next=16;break;case 9:if(0!=t.$store.state.bountys){r.next=15;break}return r.next=12,t.getTasks(e);case 12:t.isLoading=!1,r.next=16;break;case 15:t.isLoading=!1;case 16:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,r=t.match(e);return null===r?"https://steemjiang.com:8081/ipfs/QmegAj9BdJ1HGhZSJtFs4WUAen82aMQtcbnoxujd6YMQ5o":r[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,100)}return""}}},Ht=Dt,Wt=(r("e52c"),Object(d["a"])(Ht,Nt,Mt,!1,null,"5ec04b1f",null)),qt=Wt.exports,Jt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("div",{staticClass:"content"},[r("p",{staticClass:"posttime"},[r("span",{staticStyle:{"margin-right":"1.5rem","margin-left":"2rem"}},[t._v(" 悬赏号："+t._s(t.task.taskNumber))]),t._v(" "+t._s(t.timeFormat(t.task.created))+" ")]),r("p",{staticClass:"title"},[t._v(t._s(t.task.name))]),r("div",{staticClass:"text"},[t._v(" 金主： @"+t._s(t.task.nickname)+" ("+t._s(t.task.promoter)+")"),r("br"),t._v(" 赏金："),t.task.bonus?r("span",[t._v(t._s(t.weiToEth(t.task.bonus))+" 灵石"),r("br")]):t._e(),t._v(" 联系金主："+t._s(t.task.contact)),r("br"),t._v(" 任务描述： "),r("mavon-editor",{attrs:{value:t.task.content+"<br>",subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle,boxShadow:!1}})],1),"0"===t.task.state?r("div",{staticClass:"reason"},[0!=t.task.hunters?r("span",[r("br"),t._v("已申请的猎人名单："),r("br"),r("span",{staticStyle:{"font-size":"0.9rem"}},[t._v(t._s(t.task.hunters))]),r("br"),r("br")]):t._e(),r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage().reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage().hunterContact))]),r("div",{staticClass:"btn2"},[t._v("您已申请！")]),r("div",{staticClass:"btn2"},[t._v("任务申请中......")])]):"2"===t.task.state&&t.task.hunterA.toLowerCase()===t.$store.state.addr?r("div",[t.leftTime>0?r("div",[r("div",{staticClass:"reason"},[r("br"),r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage().reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage().hunterContact))])]),r("div",{staticClass:"btn2 text"},[t._v(" 任务进行中..... "),r("div",{staticStyle:{color:"darkred"}},[t._v(" 任务剩余时间： "+t._s(t.leftTimeNow)+" ")]),t.finishedFlag?r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.hunterAFinished(t.task.uid)}}},[t._v("提交任务")])],1):r("div",{staticClass:"btn3"},[t._v("您已提交，等待网络确认！")])])]):r("div",{staticClass:"btn2"},[t._v("任务已超时！")])]):"3"===t.task.state&&t.task.hunterA.toLowerCase()===t.$store.state.addr?r("div",[r("div",{staticClass:"reason"},[r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage().reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage().hunterContact))])]),r("div",{staticClass:"btn2"},[r("br"),t._v(" 您已提交任务，请等待金主确认或是退回！"),r("br"),r("br"),t.leftTime>0?r("div",{staticStyle:{color:"darkred"}},[t._v("金主确认的剩余时间： "+t._s(t.leftTimeNow))]):r("div",[t.outOfTimeFlag?r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.promoterOutOfTime(t.task.uid)}}},[t._v(" 金主超时未确认，强制完成悬赏")])],1):r("div",{staticClass:"btn3"},[t._v("您已提交，等待网络确认！")])])])]):"4"===t.task.state&&t.task.hunterA.toLowerCase()===t.$store.state.addr?r("div",[r("div",{staticClass:"reason"},[r("br"),r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage().reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage().hunterContact))])]),r("div",{staticClass:"btn2"},[t._v("您超时未提交，任务提前结束！")])]):"5"===t.task.state&&t.task.hunterA.toLowerCase()===t.$store.state.addr?r("div",[r("br"),r("div",{staticClass:"reason"},[r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage().reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage().hunterContact))])]),r("div",{staticClass:"btn2"},[t._v("金主已确认，恭喜您圆满完成任务并收到赏金！")])]):"6"===t.task.state&&t.task.hunterA.toLowerCase()===t.$store.state.addr?r("div",[r("div",{staticClass:"reason"},[r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage().reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage().hunterContact))])]),r("div",{staticClass:"btn2"},[t._v("金主超时未确认，您已强制完成悬赏！")])]):r("div",{staticClass:"reason"},[r("br"),r("p",[r("strong",[t._v("申请理由：")]),t._v(t._s(t.getHunterMessage().reason))]),r("p",[r("strong",[t._v("联系方式：")]),t._v(t._s(t.getHunterMessage().hunterContact))]),r("div",{staticClass:"btn2"},[t._v("落选的任务！")])])]),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},Qt=[],Ut={name:"MyTaskUnit",data:function(){return{task:{},selected:"",isLoading:!1,finishedFlag:!0,outOfTimeFlag:!0,timestamp:""}},methods:{taskFilter:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=t.$store.state.bountys,n=t.$route.params.taskNumber,r.forEach((function(e){e.taskNumber===n&&(t.task=e)}));case 3:case"end":return e.stop()}}),e)})))()},getHunterMessage:function(){for(var t=this.$store.state.addr,e=this.task,r=0;r<e.hunters.length;r++)if(e.hunters[r].toLowerCase()===t)return e.reasons[r]},hunterAFinished:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:return e.finishedFlag=!1,n=e.$store.state.bountyinstance,a=e.$store.state.addr,r.next=7,n.hunterAFinished(t,{from:a,gasPrice:e.gasPrice});case 7:return r.next=9,e.getTasks(n);case 9:e.taskFilter();case 10:case"end":return r.stop()}}),r)})))()},promoterOutOfTime:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:return e.outOfTimeFlag=!1,n=e.$store.state.bountyinstance,a=e.$store.state.addr,r.next=7,n.promoterOutOfTime(t,{from:a,gasPrice:e.gasPrice});case 7:return r.next=9,e.getTasks(n);case 9:e.taskFilter();case 10:case"end":return r.stop()}}),r)})))()},huntersFor:function(t){for(var e=0;e<t.hunters.length;e++)if(t.hunters[e].toLowerCase()===addr)return!0}},components:{Loading:y["a"]},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t},leftTime:function(){var t=parseInt(this.task.taskStart)+parseInt(this.task.taskDeadLine);return t-this.timestamp},leftTimeNow:function(){var t=parseInt(this.task.taskStart)+parseInt(this.task.taskDeadLine),e=t-this.timestamp;return this.formatSeconds(e)}},mounted:function(){var t=this,e=this.$store.state.bountyinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=10;break}return r.next=3,t.getBountyInstance();case 3:return n=r.sent,r.next=6,t.getTasks(n);case 6:t.taskFilter(),t.isLoading=!1,r.next=19;break;case 10:if(0!=t.$store.state.bountys){r.next=17;break}return r.next=13,t.getTasks(e);case 13:t.taskFilter(),t.isLoading=!1,r.next=19;break;case 17:t.taskFilter(),t.isLoading=!1;case 19:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r();var a=function(){t.timestamp=.001*Date.parse(new Date)};setInterval(a,1e3)},filters:{}},Yt=Ut,Gt=(r("30ea"),Object(d["a"])(Yt,Jt,Qt,!1,null,"760daa1a",null)),Kt=Gt.exports,Zt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("div",{staticClass:"content"},[r("p",{staticClass:"posttime"},[r("span",{staticStyle:{"margin-right":"1.5rem","margin-left":"2rem"}},[t._v("卖单号："+t._s(t.order.orderNumber)+" ")]),t._v(" "+t._s(t._f("changeTime")(t.order.created)))]),r("p",{staticClass:"title"},[t._v(t._s(t.order.name))]),r("div",{staticClass:"text"},[t._v(" 卖家： @"+t._s(t.order.nickname)+"("+t._s(t.order.addr)+")"),r("br"),t._v(" 买家： "+t._s(t.order.buyers.length)+" 个"),r("br"),t._v(" 价格： "+t._s(t.weiToEth(t.order.price))+" 灵石"),r("br"),t.isPurchased?r("p",[t._v(" 内容： "),r("span",{staticClass:"neirong"},[t._v(t._s(t.decrypt(t.order.content)))]),r("br"),t._v(" 联系卖家："),r("span",{staticClass:"neirong"},[t._v(" "+t._s(t.decrypt(t.order.contact))+" ")])]):r("p",{staticStyle:{display:"inline"}},[t._v(" 内容： "),r("span",{staticClass:"neirong2"},[t._v("已封印！请购买以解除封印！")]),r("br")]),t._v(" 描述： "),r("mavon-editor",{attrs:{value:t.order.body+"<br>",subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle,boxShadow:!1}})],1),t.isMyself?t._e():r("div",[r("br"),t.isPurchased?r("div",{staticClass:"btn2"},[t._v("已购买")]):r("div",{staticClass:"btn"},[t.isApprove?r("div",[t.approveFlag?r("div",[r("b-button",{staticClass:"btn",attrs:{variant:"outline-primary"},on:{click:t.letapprove}},[t._v("授权 ")]),r("span",{staticStyle:{color:"gray"}},[t._v("购买")]),r("br"),r("br")],1):r("div",{staticClass:"btn3"},[t._v("您已提交，请等待网络确认！")])]):r("div",[t.buyFlag?r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.buy(t.order.uid)}}},[t._v("购买")])],1):r("div",{staticClass:"btn3"},[t._v("您已购买，请等待网络确认！")])])])])]),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},zt=[],Vt={name:"Order",data:function(){return{order:[],keywords:"",author:"",permlink:"",isLoading:!1,isMyself:!1,isPurchased:!1,buyFlag:!0,approveFlag:!0}},methods:{letapprove:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.approveFlag=!1,e.next=3,t.approve();case 3:return e.next=5,t.getBalanceAndAllowance();case 5:case"end":return e.stop()}}),e)})))()},buy:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:if(n=e.web3.utils.fromWei(e.order.price,"ether"),!(parseFloat(e.$store.state.balanceOf)>=parseFloat(n))){r.next=15;break}return e.buyFlag=!1,a=e.$store.state.ordertinstance,s=e.$store.state.addr,r.next=9,a.confirmPurchase(t,{from:s,gasPrice:e.gasPrice});case 9:return e.isPurchased=!0,e.$store.commit("saveOrders",[]),r.next=13,e.getBalanceAndAllowance();case 13:r.next=16;break;case 15:alert("您的灵石余额不足！");case 16:case"end":return r.stop()}}),r)})))()},getOrderDone:function(){var t=this,e=this.$store.state.orders,r=this.$store.state.addr;e.forEach((function(e){e.orderNumber===t.$route.params.orderNumber&&(t.order=e)})),this.order.addr.toLowerCase()===r&&(this.isMyself=!0);var n=this.order.buyers;n.forEach((function(e){e.toLowerCase()==r&&(t.isPurchased=!0)}))}},components:{Loading:y["a"]},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t},isApprove:function(){var t=this.web3.utils.fromWei(this.order.price,"ether");return parseFloat(this.$store.state.allowance)<parseFloat(t)}},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=10;break}return r.next=3,t.getOrderInstance();case 3:return e=r.sent,r.next=6,t.getOrders(e);case 6:t.getOrderDone(),t.isLoading=!1,r.next=19;break;case 10:if(0!=t.$store.state.orders){r.next=17;break}return r.next=13,t.getOrders(e);case 13:t.getOrderDone(),t.isLoading=!1,r.next=19;break;case 17:t.getOrderDone(),t.isLoading=!1;case 19:if(""!==t.$store.state.allowance){r.next=24;break}return r.next=22,t.getBalanceAndAllowance();case 22:r.next=24;break;case 24:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{changeTime:function(t){var e=new Date(1e3*t),r=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",s=e.getHours()+":",i=e.getMinutes()+":",o=e.getSeconds();return r+n+a+s+i+o}}},Xt=Vt,te=(r("8d8a"),Object(d["a"])(Xt,Zt,zt,!1,null,"f8c87742",null)),ee=te.exports,re=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("div",{staticClass:"content"},[r("p",{staticClass:"posttime"},[r("span",{staticStyle:{"margin-right":"1.5rem","margin-left":"2rem"}},[t._v("悬赏号："+t._s(t.task.taskNumber)+" ")]),t._v(" "+t._s(t.timeFormat(t.task.created))+" ")]),r("p",{staticClass:"title"},[t._v(t._s(t.task.name))]),r("div",{staticClass:"text"},[t._v(" 金主： @"+t._s(t.task.nickname)+" ("+t._s(t.task.promoter)+")"),r("br"),t.task.bonus?r("span",[t._v("赏金： "+t._s(t.weiToEth(t.task.bonus))+" 灵石")]):t._e(),r("br"),t._v(" 任务时间： "+t._s(t.formatSeconds(t.task.taskDeadLine))),r("br"),t._v(" 任务描述： "),r("mavon-editor",{attrs:{value:t.task.content+"<br>",subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle,boxShadow:!1}}),r("br")],1),"0"===t.task.state?r("div",{staticClass:"reason"},[0!=t.task.hunters?r("span",[t._v(" 已申请的猎人名单："),r("br"),r("span",{staticStyle:{"font-size":"0.9rem"}},[t._v(t._s(t.task.hunters))]),r("br"),r("br")]):t._e(),r("span",{staticClass:"btn2"},[t._v("任务申请中......")]),t.isPromoter?t._e():r("div",[t.isApplied?r("div",{staticClass:"btn2"},[t._v("您已申请！")]):r("div",{staticClass:"reason"},[r("b-form-textarea",{staticClass:"reason2",attrs:{placeholder:"请输入申请的理由，仅金主可见！",rows:"4","max-rows":"9"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}}),r("br"),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 reason2",attrs:{placeholder:"请输入联系方式，仅金主可见。"},model:{value:t.hunterContact,callback:function(e){t.hunterContact=e},expression:"hunterContact"}}),r("br"),t.applyFlag?r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:function(e){return t.apply(t.task.uid)}}},[t._v("申请任务")])],1):r("div",{staticClass:"btn3"},[t._v("您已提交，等待网络确认！")])],1)])]):r("div",[t._v(" 中选猎人： "+t._s(t.task.hunterA)+" "),r("br"),t._v(" 任务进行中..... ")])]),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},ne=[],ae=r("22dc"),se=ae["a"],ie=(r("ab84"),Object(d["a"])(se,re,ne,!1,null,"88b27bb6",null)),oe=ie.exports,ce=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"maintop"}},[t.flag?r("div",[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{id:"inline-form-input-name",placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),r("br"),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{placeholder:"输入关键词，以空格分隔"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("提交")])],1)],1):t._e(),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},le=[],ue=r("7f3b"),de=ue["a"],me=(r("283b"),Object(d["a"])(de,ce,le,!1,null,"fe531d80",null)),pe=me.exports,fe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"maintop"}},[t.flag?r("div",[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{placeholder:"请输入商品名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",class:t.checkPriceFlag?"isok":"isfalse",attrs:{placeholder:"请输入价格：灵石"},on:{keyup:t.checkPrice},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}}),r("b-form-textarea",{staticClass:"content",attrs:{placeholder:"请输入电子商品的链接或网盘地址，买家付费后可见！",rows:"3","max-rows":"6"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 content",attrs:{placeholder:"请输入联系方式，买家付费后可见。"},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}}),t._v(" 商品描述： "),r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),r("br"),t._v("使用费： 0.5%"),r("br"),r("div",{staticClass:"btn"},[t.checkPriceFlag?r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("提交")])],1):r("div",[t._v("输入有误，请重新输入！")])]),r("br"),r("br")],1):t._e(),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},he=[],ge=r("d1d7"),be=ge["a"],ve=(r("5abf"),Object(d["a"])(be,fe,he,!1,null,"3e959322",null)),ke=ve.exports,_e=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"maintop"}},[t.flag?r("div",[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{placeholder:"请输入名称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",class:t.checkBonusFlag?"isok":"isfalse",attrs:{placeholder:"请输入赏金（灵石数）"},on:{keyup:t.checkBonus},model:{value:t.bonus,callback:function(e){t.bonus=e},expression:"bonus"}}),r("strong",{staticStyle:{color:"rgba(240,56,6,0.75)"}},[t._v("加上押金 "+t._s(t.bonus/2)+" 灵石")]),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 content",attrs:{placeholder:"请输入联系方式，只有中标的猎人可见。"},model:{value:t.contact,callback:function(e){t.contact=e},expression:"contact"}}),t._v(" 任务描述： "),r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),r("br"),t._v(" 设定任务时间： "),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 hour",class:t.checkHourFlag?"isok":"isfalse",attrs:{placeholder:"请输入小时"},on:{keyup:t.checkHour},model:{value:t.hour,callback:function(e){t.hour=e},expression:"hour"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 hour",class:t.checkMinuteFlag?"isok":"isfalse",attrs:{placeholder:"请输入分钟"},on:{keyup:t.checkMinute},model:{value:t.minute,callback:function(e){t.minute=e},expression:"minute"}}),r("br"),t._v(" 使用费： 0.5%"),r("br"),t.isApprove?r("div",[t.approveFlag?r("div",[r("b-button",{staticClass:"btn",attrs:{variant:"outline-primary"},on:{click:t.letapprove}},[t._v("授权 ")]),r("span",{staticStyle:{color:"gray","padding-left":"1rem"}},[t._v("发布悬赏")]),r("br"),r("br")],1):r("div",{staticStyle:{"margin-top":"0.8rem","margin-bottom":"1.5rem"}},[t._v(" 您已提交，请等待网络确认！ ")])]):r("div",{staticClass:"btn"},[t.checkBonusFlag&&t.checkHourFlag&&t.checkMinuteFlag?r("div",[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("发布悬赏")]),r("br")],1):r("div",[t._v("输入有误，请重新输入！")]),r("br")])],1):t._e(),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],1)},ye=[],we=r("0632"),xe=we["a"],Ce=(r("8b00"),Object(d["a"])(xe,_e,ye,!1,null,"16166be7",null)),Fe=Ce.exports,$e=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"maintop"}},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 title",attrs:{placeholder:"请输入标题"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),r("div",{attrs:{id:"main"}},[r("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{imgAdd:t.uploadimg},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),r("br"),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"inline-form-input-name",placeholder:"tags  (输入英文标签，以空格分隔)"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}}),r("div",{staticClass:"btn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.post}},[t._v("提交")])],1)],1)},Oe=[],Se={name:"Edit",data:function(){return{db:{},posts:[],body:"",category:"",title:"",tags:"",key:""}},methods:{uploadimg:function(t,e){this.imgAdd(t,e)},searchKey:function(){var t=this,e=this.$route.params.permlink,r=this.$store.state.db,n=this.$store.state.username,a=r.transaction([n],"readwrite"),s=a.objectStore(n);s.openCursor().onsuccess=function(r){var n=r.target.result;n&&(n.value.permlink==e&&(t.key=n.key,t.body=n.value.body,t.category=n.value.category,t.title=n.value.title,t.tags=JSON.parse(n.value.json_metadata).tags.join(" ")),n.continue()),s.openCursor().onerror=function(t){console.dir(t)}}},post:function(){var t=this.$store.state.password,e="",r=this.category,n=this.$store.state.username,a=this.$route.params.permlink,s=this.title,o=this.body,c=this.tags.trim().split(/\s+/),l={tags:c,dapp:"steemjiang",format:"markdown"};this.postToSteem(t,e,r,n,a,s,o,l);var u={id:this.key,title:s,author:n,category:this.category,permlink:a,body:o,created:(new Date).toISOString().split(".")[0],json_metadata:JSON.stringify(l)},d=this,m=this.$store.state.db,p=this.$store.state.username;function f(){return new Promise((function(t){var e=m.transaction([p],"readwrite");e.oncomplete=function(t){console.log("事务操作完成")},e.onerror=function(t){console.log("事务操作出错"),console.dir(t)},e.onsuccess=function(t){console.log("事务操作成功")};var r=e.objectStore(p);r.put(u),t()}))}function h(){return g.apply(this,arguments)}function g(){return g=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:return t.next=4,d.getAllPosts(m);case 4:e=t.sent,d.$store.commit("savePosts",e.reverse()),d.$router.push({path:"/blog/"+a});case 7:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}h()}},mounted:function(){var t=this;function e(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.$store.state.username){e.next=16;break}if(0!=t.$store.state.posts){e.next=14;break}return e.next=4,t.initDatabase();case 4:return r=e.sent,t.$store.commit("saveDB",r),e.next=8,t.getAllPosts(r);case 8:return n=e.sent,t.$store.commit("savePosts",n.reverse()),e.next=12,t.searchKey();case 12:e.next=16;break;case 14:return e.next=16,t.searchKey();case 16:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}e()}},Le=Se,je=(r("9e0d"),Object(d["a"])(Le,$e,Oe,!1,null,"d770c6cc",null)),Ae=je.exports,Te=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"article"},[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"请输入标题或关键词"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._l(t.search(t.keywords),(function(e){return r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/article/"+e.permlink}},[r("b-img",{staticClass:"courseimg",attrs:{src:t._f("takeImage")(e.body),fluid:""}})],1),r("div",{staticClass:"title"},[r("router-link",{attrs:{to:"/article/"+e.permlink}},[r("span",{staticStyle:{"font-size":"1.2rem"}},[t._v(t._s(e.title))]),r("br")])],1),r("p",{staticClass:"posttime"},[t._v(" @"+t._s(e.nickname)+"("+t._s(t._f("formatAddr")(e.addr))+") "),r("span",{staticStyle:{"margin-left":"1rem"}},[t._v(" "+t._s(t.timeFormat(e.created)))])]),r("p",{staticClass:"text"},[t._v(t._s(t._f("abstractFn")(e.body))+" ......")])],1)})),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("loading"):t._e()],1)],2)},Pe=[],Ee={name:"Community",data:function(){return{keywords:"",author:"",permlink:"",isLoading:!0}},methods:{search:function(t){var e=this.$store.state.articles;return e.filter((function(e){if(e.title.includes(t)||e.keywords.includes(t))return e}))},getNext:function(){var t=this;t.isLoading=!0;var e={tag:"hive-180932",limit:20,start_author:this.author,start_permlink:this.permlink};this.steem.api.getDiscussionsByTrending(e,(function(e,r){r.forEach((function(e){e.permlink!=t.permlink&&t.posts.push(e)})),t.author=r[r.length-1].author,t.permlink=r[r.length-1].permlink,t.$store.commit("saveHot",t.posts),t.isLoading=!1,1==r.length&&alert("没有更多了！")}))}},components:{Loading:y["a"]},mounted:function(){var t=this,e=this.$store.state.postinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=9;break}return r.next=3,t.getPostInstance();case 3:return e=r.sent,r.next=6,t.getArticles(e);case 6:t.isLoading=!1,r.next=16;break;case 9:if(0!=t.$store.state.articles){r.next=15;break}return r.next=12,t.getArticles(e);case 12:t.isLoading=!1,r.next=16;break;case 15:t.isLoading=!1;case 16:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()},filters:{changeTime:function(t){var e=new Date(1e3*t),r=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",s=e.getHours()+":",i=e.getMinutes()+":",o=e.getSeconds();return r+n+a+s+i+o},formatAddr:function(t){return t.substring(0,6)+"..."+t.substring(38)},takeImage:function(t){var e=/!\[(.*?)\]\((.*?)\)/,r=t.match(e);if(null!==r)return r[2]},abstractFn:function(t){if(t){var e=t.replace(/(\*\*|__)(.*?)(\*\*|__)/g,"").replace(/\!\[[\s\S]*?\]\([\s\S]*?\)/g,"").replace(/\([\s\S]*?\)/g,"").replace(/<\/?.+?\/?>/g,"").replace(/http.*\w/g,"").replace(/(\*)(.*?)(\*)/g,"").replace(/`{1,2}[^`](.*?)`{1,2}/g,"").replace(/```([\s\S]*?)```[\s]*/g,"").replace(/\~\~(.*?)\~\~/g,"").replace(/[\s]*[-\*\+]+(.*)/g,"").replace(/[\s]*[0-9]+\.(.*)/g,"").replace(/(#+)(.*)/g,"").replace(/(>+)(.*)/g,"").replace(/\r\n/g,"").replace(/\n/g,"");return e.slice(0,180)}return""}}},Re=Ee,Be=(r("1a68"),Object(d["a"])(Re,Te,Pe,!1,null,"8bac76bc",null)),Ie=Be.exports,Ne=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 search",attrs:{id:"inline-form-input-name",placeholder:"搜索"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),r("div",{staticClass:"article"},t._l(t.search(t.keywords),(function(e){return r("div",{staticClass:"content"},[r("router-link",{attrs:{to:"/collection/@"+e.author+"/"+e.permlink}},[t._v(t._s(e.title)+" "),r("p",{staticClass:"posttime"},[t._v("@"+t._s(e.author)+" "+t._s(t._f("formatTime")(e.created)))])])],1)})),0)],1)},Me=[],De={name:"Collections",data:function(){return{keywords:""}},methods:{search:function(t){var e=this.$store.state.collections;return e.filter((function(e){if(e.title.includes(t))return e}))}},filters:{formatTime:function(t){return t.substring(0,10)}},mounted:function(){var t=this;if(0==this.$store.state.posts){var e=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.initDatabase();case 2:return r=e.sent,t.$store.commit("saveDB",r),e.next=6,t.getAllPosts(r);case 6:return n=e.sent,t.$store.commit("savePosts",n.reverse()),e.next=10,t.getCollections(r);case 10:a=e.sent,t.$store.commit("saveCollections",a.reverse());case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();console.log(455,"db is null"),e()}else{var r=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$store.state.db,e.next=3,t.getCollections(r);case 3:n=e.sent,t.$store.commit("saveCollections",n.reverse());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();r()}}},He=De,We=(r("8e37"),Object(d["a"])(He,Ne,Me,!1,null,"58b81b6d",null)),qe=We.exports,Je=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v(t._s(t.post.title))]),r("p",{staticClass:"posttime"},[t._v("@"+t._s(t.post.author)+" "+t._s(t._f("formatTime")(t.post.created)))]),r("mavon-editor",{staticClass:"md",attrs:{value:t.post.body,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}}),t.$store.state.username?r("div",[r("b-button",{staticClass:"del",attrs:{variant:"outline-primary"},on:{click:t.del}},[t._v("取消收藏")])],1):t._e(),r("br")],1)},Qe=[],Ue={name:"Collection",data:function(){return{post:{},key:""}},methods:{searchKey:function(){var t=this,e=this.$route.params.permlink,r=this.$store.state.db,n=this.$store.state.username+"collection",a=r.transaction([n],"readwrite"),s=a.objectStore(n);s.openCursor().onsuccess=function(r){var n=r.target.result;n&&(n.value.permlink==e&&(t.key=n.key),n.continue()),s.openCursor().onerror=function(t){console.dir(t)}}},del:function(){var t=this.$store.state.db,e=this.$store.state.username+"collection",r=t.transaction([e],"readwrite"),n=r.objectStore(e);n.delete(this.key);var a=this.$route.params.permlink;localStorage.removeItem(a),this.$router.push("/collection")},searchPosts:function(t){var e=this,r=this.$route.params.permlink;t.forEach((function(t){t.permlink==r&&(e.post=t)}))}},computed:{prop:function(){var t={subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0};return t}},mounted:function(){var t=this;function e(){return r.apply(this,arguments)}function r(){return r=Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0==t.$store.state.collections){e.next=6;break}r=t.$store.state.collections,t.searchPosts(r),t.searchKey(),e.next=21;break;case 6:return console.log(99,"fresh"),e.next=9,t.initDatabase();case 9:return n=e.sent,t.$store.commit("saveDB",n),e.next=13,t.getAllPosts(n);case 13:return a=e.sent,t.$store.commit("savePosts",a.reverse()),e.next=17,t.getCollections(n);case 17:s=e.sent,t.$store.commit("saveCollections",s.reverse()),t.searchPosts(s),t.searchKey();case 21:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}e()},filters:{formatTime:function(t){return t.substring(0,10)}}},Ye=Ue,Ge=(r("fb7f"),Object(d["a"])(Ye,Je,Qe,!1,null,"2e7e8f1b",null)),Ke=Ge.exports,Ze=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ze=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v("关于百灵界")]),r("div",{staticClass:"text"},[r("p",[t._v("百灵界是一个基于以太坊的区块链价值交易系统，提供一种链上合作的解决方案。 去中心化自治组织（DAO）就可以在百灵界中组织和执行。百灵界的悬赏就可以 通过智能合约的形式来外包任务，这样，去中心化自治组织可以将多个任务分割外包出去， 最后再组织在一起，形成一个力量集中的解决文案。组织和个人都将受益。 ")]),r("p",[t._v("线上办公和自由职业的流行更是推动了链上合作的可行性。这种链上合作跨越了更大的时空， 在去中心化、线上治理等形式成熟的前提下，会有更多场景和DAO得以实现。 ")]),r("p",[t._v('百灵界发行通用灵石(Etherlark Treasures)，简称灵石，符号："ELT"。灵石发行总量为66亿， 由百灵界基金会管理和运营。 ')]),r("p",[t._v("用户应遵守国家相关法律法规，违规用户将列入黑名单！黑名单用户的所有发布将不再展示， 也不能再进行发布，但其灵石资产不受影响。")]),r("p",[t._v("期待各行各业的优秀人才加入，也希望你们在这个平台中实现价值变现。")])])])}],Ve={name:"About",data:function(){return{}}},Xe=Ve,tr=(r("a8ed"),Object(d["a"])(Xe,Ze,ze,!1,null,"8d2d7270",null)),er=tr.exports,rr=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},nr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"content"}},[r("h1",[t._v("新手指南")]),r("div",{staticClass:"newtext"})])}],ar={name:"Newbie",data:function(){return{}},mounted:function(){}},sr=ar,ir=(r("6dce"),Object(d["a"])(sr,rr,nr,!1,null,"1ecd1577",null)),or=ir.exports,cr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login"},[r("h2",[t._v("钱包")]),t._m(0),t.flag?r("div",[r("div",{staticClass:"text"},[t._v(" 呢称： "+t._s(t.$store.state.nickname)),r("br"),t._v(" 地址： "+t._s(t.$store.state.addr)+" "),r("br"),t._v(" 以太坊余额： "+t._s(t.balanceOfEth)),r("br"),t._v(" 灵石余额： "+t._s(t.balanceOf)),r("br"),r("br")]),r("span",{staticStyle:{"margin-right":"1rem"}},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.beforetransfer}},[t._v("转帐")])],1),r("span",{staticStyle:{"margin-right":"1rem"}},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.transferHistory}},[t._v("转帐历史")])],1),r("span",{staticStyle:{"margin-right":"1rem"}},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.beforeexchange}},[t._v("兑换")])],1),r("span",{staticStyle:{"margin-right":"1rem"}},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.beforecheck}},[t._v("查询")])],1),t.transferFlag?r("div",[r("br"),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"转帐地址"},model:{value:t.to,callback:function(e){t.to=e},expression:"to"}}),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"灵石数量"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),r("div",{staticClass:"loginbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.transfer}},[t._v("确认转帐")])],1),r("br"),r("br")],1):t._e(),t.historyFlag?r("div",{staticClass:"text2"},[r("br"),r("h6",[t._v("转入帐单：")]),t._l(t.transferIn,(function(e){return r("div",{staticClass:"onetransfer"},[r("li",{staticClass:"time"},[t._v(t._s(e.time)+" ")]),r("span",{staticStyle:{"margin-right":"0.5rem"}},[t._v(" 对方帐户："+t._s(e.returnValues.from))]),t._v(" 转入灵石：+ "+t._s(t.weiToEth(e.returnValues.value))+" 灵石 ")])})),r("br"),r("h6",[t._v("转出帐单：")]),t._l(t.transferOut,(function(e){return r("div",{staticClass:"onetransfer"},[r("li",{staticClass:"time"},[t._v(t._s(e.time)+" ")]),r("span",{staticStyle:{"margin-right":"0.5rem"}},[t._v(" 对方帐户："+t._s(e.returnValues.to))]),t._v(" 转出灵石：- "+t._s(t.weiToEth(e.returnValues.value))+" 灵石"),r("br")])}))],2):t._e(),t.exchangeFlag?r("div",{staticClass:"exchange"},[r("br"),t._v(" 兑换率： 1以太坊 = "+t._s(t.price)+"灵石 "),r("br"),r("hr"),r("p",[t._v("以太坊兑换灵石，可兑换灵石上限： "+t._s(t.balanceOfContract))]),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user2",attrs:{placeholder:"以太坊数量"},model:{value:t.ethvalue,callback:function(e){t.ethvalue=e},expression:"ethvalue"}}),t._v("以太坊 "),t.ethvalue?r("span",{staticStyle:{"margin-left":"1rem",color:"rgba(240,56,6,0.75)"}},[t._v(" 可兑换 "+t._s(t.ethvalue*t.price)+" 灵石 ")]):t._e(),r("div",{staticClass:"loginbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.ethToLark}},[t._v("确认兑换灵石")])],1),r("hr"),r("p",[t._v("灵石兑换以太坊，可兑换以太坊上限： "+t._s(t.ethOfContract)+" ")]),r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user2",attrs:{placeholder:"灵石数量"},model:{value:t.larkvalue,callback:function(e){t.larkvalue=e},expression:"larkvalue"}}),t._v("灵石 "),t.larkvalue?r("span",{staticStyle:{"margin-left":"1rem",color:"rgba(240,56,6,0.75)"}},[t._v(" 可兑换 "+t._s(t.larkvalue/t.price)+" 以太坊 ")]):t._e(),t.isApprove?r("div",[t.approveFlag?r("div",[r("b-button",{staticClass:"loginbtn btn",attrs:{variant:"outline-primary"},on:{click:t.letapprove}},[t._v("授权 ")]),r("span",{staticStyle:{color:"gray","padding-left":"1rem"}},[t._v("确认兑换以太坊")]),r("br"),r("br")],1):r("div",{staticClass:"btn3"},[t._v("您已提交，请等待网络确认！")])]):r("div",{staticClass:"loginbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.larkToEth}},[t._v("确认兑换以太坊")])],1)],1):t._e(),t.checkFlag?r("div",[r("b-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0 user",attrs:{placeholder:"地址"},model:{value:t.anyaddr,callback:function(e){t.anyaddr=e},expression:"anyaddr"}}),t.ischeck?r("span",[t._v("灵石余额: "+t._s(t.anyvalue))]):t._e(),r("div",{staticClass:"loginbtn"},[r("b-button",{attrs:{variant:"outline-primary"},on:{click:t.anybalance}},[t._v("查询余额")])],1)],1):t._e()]):t._e(),r("transition",{attrs:{name:"fade"}},[t.isLoading?r("SmallLoading"):t._e()],1)],1)},lr=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"exchange"},[r("hr")])}],ur={name:"Login",data:function(){return{balanceOf:"",password:"",isLoading:!0,flag:!1,totalSupply:"",to:"",value:"",transferFlag:!1,historyFlag:!1,transferIn:[],transferOut:[],exchangeFlag:!1,checkFlag:!1,anyaddr:"",anyvalue:"",balanceOfEth:"",ethvalue:"",larkvalue:"",balanceOfContract:"",ethOfContract:"",price:"",ischeck:!1,balanceOfEth2:"",balanceOf2:"",balanceOfContract2:"",ethOfContract2:"",approveFlag:!0}},methods:{letapprove:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.approveFlag=!1,e.next=3,t.approve();case 3:return e.next=5,t.getBalanceAndAllowance();case 5:case"end":return e.stop()}}),e)})))()},getBalance:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$store.state.addr,n=t.$store.state.walletinstance,e.next=4,t.web3.eth.getBalance(r);case 4:return a=e.sent,t.balanceOfEth=t.weiToEth(a),t.balanceOfEth2=t.web3.utils.fromWei(a,"ether"),e.next=9,n.balanceOf(r);case 9:return s=e.sent,t.balanceOf=t.weiToEth(s),t.balanceOf2=t.web3.utils.fromWei(s,"ether"),e.next=14,n.totalSupply();case 14:i=e.sent,t.totalSupply=t.weiToEth(i);case 16:case"end":return e.stop()}}),e)})))()},getExchangeDone:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$store.state.walletinstance,n=t.$store.state.exchangeinstance,e.next=4,n.getThis();case 4:return a=e.sent,e.next=7,r.balanceOf(a);case 7:return s=e.sent,t.balanceOfContract=t.weiToEth(s),t.balanceOfContract2=t.web3.utils.fromWei(s,"ether"),e.next=12,t.web3.eth.getBalance(a);case 12:return i=e.sent,t.ethOfContract=t.weiToEth(i),t.ethOfContract2=t.web3.utils.fromWei(i,"ether"),e.next=17,n.getMessage();case 17:o=e.sent,t.price=o[1];case 19:case"end":return e.stop()}}),e)})))()},beforetransfer:function(){this.exchangeFlag=!1,this.checkFlag=!1,this.ischeck=!1,this.historyFlag=!1,this.anyaddr="",this.anyvalue="",this.transferFlag=!this.transferFlag},beforeexchange:function(){this.transferFlag=!1,this.checkFlag=!1,this.ischeck=!1,this.historyFlag=!1,this.anyaddr="",this.anyvalue="",this.exchangeFlag=!this.exchangeFlag},beforecheck:function(){this.transferFlag=!1,this.exchangeFlag=!1,this.ischeck=!1,this.historyFlag=!1,this.checkFlag=!this.checkFlag,this.anyaddr="",this.anyvalue=""},transfer:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.unlockWallet();case 2:return t.isLoading=!0,t.transferFlag=!1,r=t.web3.utils.toWei(t.value,"ether"),n=t.$store.state.addr,a=t.$store.state.walletinstance,e.next=9,a.transfer(t.to,r,{from:n,gasPrice:t.gasPrice});case 9:return e.next=11,t.getBalance();case 11:return e.next=13,t.getExchangeDone();case 13:t.value="",t.to="",t.isLoading=!1;case 16:case"end":return e.stop()}}),e)})))()},transferHistory:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s,i,o,c,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.isLoading=!0,t.exchangeFlag=!1,t.checkFlag=!1,t.transferFlag=!1,t.ischeck=!1,t.anyaddr="",t.anyvalue="",r=t.$store.state.addr,n=t.$store.state.walletinstance,e.next=11,n.getPastEvents("Transfer",{filter:{to:r},fromBlock:0,toBlock:"latest"});case 11:a=e.sent,s=a.length-1;case 13:if(!(s>=0)){e.next=23;break}return t.transferIn[a.length-1-s]=a[s],e.next=17,t.web3.eth.getBlock(a[s].blockNumber);case 17:i=e.sent,o=t.timeFormat(i.timestamp),t.transferIn[a.length-1-s].time=o;case 20:s--,e.next=13;break;case 23:return e.next=25,n.getPastEvents("Transfer",{filter:{from:r},fromBlock:0,toBlock:"latest"});case 25:c=e.sent,l=c.length-1;case 27:if(!(l>=0)){e.next=37;break}return t.transferOut[c.length-1-l]=c[l],e.next=31,t.web3.eth.getBlock(c[l].blockNumber);case 31:u=e.sent,d=t.timeFormat(u.timestamp),t.transferOut[c.length-1-l].time=d;case 34:l--,e.next=27;break;case 37:t.isLoading=!1,t.historyFlag=!0;case 39:case"end":return e.stop()}}),e)})))()},anybalance:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.anyaddr,n=t.$store.state.walletinstance,e.next=4,n.balanceOf(r);case 4:a=e.sent,t.anyvalue=t.weiToEth(a),t.ischeck=!0;case 7:case"end":return e.stop()}}),e)})))()},larkToEth:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.unlockWallet();case 2:if(!(parseFloat(t.balanceOf2)>parseFloat(t.larkvalue))){e.next=24;break}if(!(parseFloat(t.larkvalue/t.price)<parseFloat(t.ethOfContract2))){e.next=21;break}return t.isLoading=!0,t.exchangeFlag=!1,r=t.$store.state.addr,n=t.$store.state.exchangeinstance,a=t.web3.utils.toWei(t.larkvalue,"ether"),e.next=11,n.larkToEth(a,{from:r,gasPrice:t.gasPrice});case 11:return e.next=13,t.getBalance();case 13:return e.next=15,t.getExchangeDone();case 15:return e.next=17,t.getBalanceAndAllowance();case 17:t.larkvalue="",t.isLoading=!1,e.next=22;break;case 21:alert("您已超出可兑换以太坊上限！");case 22:e.next=25;break;case 24:alert("您的灵石余额不足！");case 25:case"end":return e.stop()}}),e)})))()},ethToLark:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.unlockWallet();case 2:if(!(parseFloat(t.balanceOfEth2)>parseFloat(t.ethvalue))){e.next=27;break}if(!(parseFloat(t.ethvalue*t.price)<parseFloat(t.balanceOfContract2))){e.next=24;break}return t.isLoading=!0,t.exchangeFlag=!1,r=t.$store.state.addr,n=t.$store.state.exchangeinstance,a=t.web3.utils.toWei(t.ethvalue,"ether"),e.next=11,n.getThis();case 11:return s=e.sent,e.next=14,t.web3.eth.sendTransaction({from:r,to:s,value:a,gasPrice:t.gasPrice});case 14:return e.next=16,t.getBalance();case 16:return e.next=18,t.getExchangeDone();case 18:return e.next=20,t.getBalanceAndAllowance();case 20:t.ethvalue="",t.isLoading=!1,e.next=25;break;case 24:alert("您已超出可兑换灵石上限！");case 25:e.next=28;break;case 27:alert("您的以太坊余额不足！");case 28:case"end":return e.stop()}}),e)})))()}},computed:{isApprove:function(){return parseFloat(this.$store.state.allowance)<parseFloat(this.larkvalue)}},components:{SmallLoading:Q},mounted:function(){var t=this,e=this.$store.state.walletinstance;function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=13;break}return r.next=3,t.getWalletInstance();case 3:return r.next=5,t.getExchangeInstance();case 5:return r.next=7,t.getBalance();case 7:return r.next=9,t.getExchangeDone();case 9:t.isLoading=!1,t.flag=!0,r.next=19;break;case 13:return r.next=15,t.getBalance();case 15:return r.next=17,t.getExchangeDone();case 17:t.isLoading=!1,t.flag=!0;case 19:if(""!==t.$store.state.allowance){r.next=24;break}return r.next=22,t.getBalanceAndAllowance();case 22:r.next=24;break;case 24:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()}},dr=ur,mr=(r("c960"),Object(d["a"])(dr,cr,lr,!1,null,"5e999dc0",null)),pr=mr.exports;n["default"].use(v["a"]);var fr=[{path:"/",name:"index",component:I},{path:"/login",name:"login",component:F},{path:"/community",name:"community",component:Ie},{path:"/article/:permlink",name:"article",component:K},{path:"/market",name:"market",component:ot,meta:{requireAuth:!0}},{path:"/market/:orderNumber",name:"order",component:ee,meta:{requireAuth:!0}},{path:"/myseller",name:"myseller",component:pt,meta:{requireAuth:!0}},{path:"/myseller/:orderNumber",name:"myselleruint",component:kt,meta:{requireAuth:!0}},{path:"/mybuyer",name:"mybuyer",component:Ft,meta:{requireAuth:!0}},{path:"/bounty/:taskNumber",name:"task",component:oe,meta:{requireAuth:!0}},{path:"/myarticles",name:"myarticles",component:et,meta:{requireAuth:!0}},{path:"/mybounty",name:"mybounty",component:At,meta:{requireAuth:!0}},{path:"/mybounty/:taskNumber",name:"mybountyunit",component:It,meta:{requireAuth:!0}},{path:"/mytask",name:"mytask",component:qt,meta:{requireAuth:!0}},{path:"/mytask/:taskNumber",name:"mytaskunit",component:Kt,meta:{requireAuth:!0}},{path:"/admin125684",name:"admin",component:A,meta:{requireAuth:!0}},{path:"/collections",name:"collections",component:qe,meta:{requireAuth:!0}},{path:"/collection/@:author/:permlink",name:"collection",component:Ke},{path:"/wallet",name:"wallet",component:pr},{path:"/about",name:"about",component:er},{path:"/newbie",name:"newbie",component:or},{path:"/post",name:"post",component:pe,meta:{requireAuth:!0}},{path:"/postorder",name:"postorder",component:ke,meta:{requireAuth:!0}},{path:"/postbounty",name:"postbounty",component:Fe,meta:{requireAuth:!0}},{path:"/edit/:permlink",name:"edit",component:Ae,meta:{requireAuth:!0}}],hr=new v["a"]({mode:"hash",base:"/",routes:fr}),gr=hr,br=r("ae8c"),vr=r("022b"),kr=r.n(vr);n["default"].use(br["a"]);var _r=new br["a"].Store({state:{nickname:kr.a.get("nickname"),addr:kr.a.get("addr"),db:{},articles:[],postinstance:{},orders:[],ordertinstance:{},walletinstance:{},exchangeinstance:{},bountyinstance:{},bountys:[],collections:[],searchPosts:[],repliestoauthor:[],balanceOf:"",allowance:""},mutations:{saveUser:function(t,e){t.nickname=e.nickname,t.addr=e.addr,kr.a.set("nickname",e.nickname,"30d"),kr.a.set("addr",e.addr,"30d")},savePostInstance:function(t,e){t.postinstance=e},saveArticles:function(t,e){t.articles=e},saveOrderInstance:function(t,e){t.ordertinstance=e},saveOrders:function(t,e){t.orders=e},saveBountyInstance:function(t,e){t.bountyinstance=e},saveBountys:function(t,e){t.bountys=e},saveCollections:function(t,e){t.collections=e},saveSearchPosts:function(t,e){t.searchPosts=e},saveDB:function(t,e){t.db=e},saveWalletInstance:function(t,e){t.walletinstance=e},saveExchangeInstance:function(t,e){t.exchangeinstance=e},saveAllowance:function(t,e){t.allowance=e},saveBalanceOf:function(t,e){t.balanceOf=e},clearUser:function(t){t.nickname=null,t.addr=null,kr.a.remove("nickname"),kr.a.remove("addr")}}}),yr=r("6483"),wr=(r("df63"),r("f46b"),r("6f2f")),xr=r.n(wr),Cr=(r("b2ab"),r("79b2")),Fr=r.n(Cr),$r=r("82ae"),Or=r.n($r),Sr=r("2d97"),Lr=r.n(Sr),jr=r("344c"),Ar=r.n(jr),Tr=r("7742"),Pr=r.n(Tr),Er=r("e564"),Rr=r("9e93"),Br=r("0821"),Ir=r.n(Br),Nr=function(){function t(t,e){for(var r="",n=t;n>0;--n)r+=e[Math.floor(Math.random()*e.length)];return r}return t(5,"0123456789abcdefghijklmnopqrstuvwxyz")},Mr=function(){function t(t,e){for(var r="",n=t;n>0;--n)r+=e[Math.floor(Math.random()*e.length)];return r}return t(8,"0123456789")},Dr=function(t){var e=new Date(1e3*t),r=e.getFullYear()+"-",n=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",s=e.getHours()+":",i=e.getMinutes()+":",o=e.getSeconds();return r+n+a+s+i+o},Hr=function(t){var e=parseInt(t),r=0,n=0;e>60&&(r=parseInt(e/60),e=parseInt(e%60),r>60&&(n=parseInt(r/60),r=parseInt(r%60)));var a=parseInt(e)+"秒";return r>0&&(a=parseInt(r)+"分钟"+a),n>0&&(a=parseInt(n)+"小时"+a),a},Wr=function(t){return t.length>29?t.substring(0,29)+"...":t},qr=function(){return.001*Date.parse(new Date)},Jr=function(t){var e,r,n,a,s,i;e="",n=t.length,r=0;while(r<n)switch(a=t[r++],a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:e+=String.fromCharCode(a);break;case 12:case 13:s=t[r++],e+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=t[r++],i=t[r++],e+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&i)<<0);break}return e},Qr=function(t){if(t=this.web3.utils.fromWei(t,"ether"),t&&null!=t){t=String(t);var e=t.split(".")[0],r=t.split(".")[1];r=r?r.length>=2?"."+r.substr(0,2):"."+r+"0":".00";var n=e.split("").reverse().join("").match(/(\d{1,3})/g);return(Number(t)<0?"-":"")+n.join(",").split("").reverse().join("")+r}return 0===t?"0.00":""},Ur=function(){var t=this;return new Promise((function(e){function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.axios.get("/Post.json");case 2:return n=r.sent,a=t.TruffleContract(n.data),a.setProvider(t.web3Provider),r.next=7,a.deployed();case 7:s=r.sent,t.$store.commit("savePostInstance",s),e(s);case 10:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()}))},Yr=function(t){var e=this;return new Promise((function(r){function n(){return a.apply(this,arguments)}function a(){return a=Object(i["a"])(regeneratorRuntime.mark((function n(){var a,s,i,o,c,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=[],n.next=3,t.getPastEvents("PostArticle",{fromBlock:0,toBlock:"latest"});case 3:s=n.sent,i=s.length-1;case 5:if(!(i>=0)){n.next=15;break}return n.next=8,e.ipfs.cat(s[i].returnValues.hash);case 8:o=n.sent,c=e.utf8ToStr(o),l=JSON.parse(c),a.push(l);case 12:i--,n.next=5;break;case 15:e.$store.commit("saveArticles",a),r();case 17:case"end":return n.stop()}}),n)}))),a.apply(this,arguments)}n()}))},Gr=function(){var t=this;return new Promise((function(e){function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.axios.get("/Purchase.json");case 2:return n=r.sent,a=t.TruffleContract(n.data),a.setProvider(t.web3Provider),r.next=7,a.deployed();case 7:s=r.sent,t.$store.commit("saveOrderInstance",s),e(s);case 10:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()}))},Kr=function(t){var e=this;return new Promise((function(r){function n(){return a.apply(this,arguments)}function a(){return a=Object(i["a"])(regeneratorRuntime.mark((function n(){var a,s,i,o,c,l,u,d;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.id();case 2:a=n.sent,s=a.toString(),i=[],o=s;case 6:if(!(o>0)){n.next=22;break}return n.next=9,t.getOrder(o);case 9:return c=n.sent,n.next=12,e.ipfs.cat(c[0]);case 12:l=n.sent,u=e.utf8ToStr(l),d=JSON.parse(u),d.uid=o,d.buyers=c[2],d.state=c[4],i.push(d);case 19:o--,n.next=6;break;case 22:e.$store.commit("saveOrders",i),r();case 24:case"end":return n.stop()}}),n)}))),a.apply(this,arguments)}n()}))},Zr=function(){var t=this;return new Promise((function(e){function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.axios.get("/Bounty.json");case 2:return n=r.sent,a=t.TruffleContract(n.data),a.setProvider(t.web3Provider),r.next=7,a.deployed();case 7:s=r.sent,t.$store.commit("saveBountyInstance",s),e(s);case 10:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()}))},zr=function(t){var e=this;return new Promise((function(r){function n(){return a.apply(this,arguments)}function a(){return a=Object(i["a"])(regeneratorRuntime.mark((function n(){var a,s,i,o,c,l,u,d,m,p,f,h,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.id();case 2:a=n.sent,s=a.toString(),i=[],o=s;case 6:if(!(o>0)){n.next=40;break}return n.next=9,t.getTask(o);case 9:return c=n.sent,n.next=12,e.ipfs.cat(c[0]);case 12:l=n.sent,u=e.utf8ToStr(l),d=JSON.parse(u),d.uid=o,d.promoter=c[1],d.hunterA=c[2],d.hunters=c[3],d.reasonHashs=c[4],m=[],p=0;case 22:if(!(p<d.reasonHashs.length)){n.next=32;break}return n.next=25,e.ipfs.cat(d.reasonHashs[p]);case 25:f=n.sent,h=e.utf8ToStr(f),g=JSON.parse(h),m.push(g);case 29:p++,n.next=22;break;case 32:d.reasons=m,d.taskStart=c[6],d.taskDeadLine=c[7],d.state=c[8],i.push(d);case 37:o--,n.next=6;break;case 40:e.$store.commit("saveBountys",i),r();case 42:case"end":return n.stop()}}),n)}))),a.apply(this,arguments)}n()}))},Vr=function(){var t=this;return new Promise((function(e){function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.axios.get("/LarkTreasures.json");case 2:return n=r.sent,a=t.TruffleContract(n.data),a.setProvider(t.web3Provider),r.next=7,a.deployed();case 7:s=r.sent,t.$store.commit("saveWalletInstance",s),e();case 10:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()}))},Xr=function(){var t=this;return new Promise((function(e){function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.axios.get("/Exchange.json");case 2:return n=r.sent,a=t.TruffleContract(n.data),a.setProvider(t.web3Provider),r.next=7,a.deployed();case 7:s=r.sent,t.$store.commit("saveExchangeInstance",s),e();case 10:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()}))},tn=function(){var t=this;return new Promise((function(e){function r(){return n.apply(this,arguments)}function n(){return n=Object(i["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.$store.state.addr,a=t.$store.state.walletinstance,r.next=4,a.balanceOf(n);case 4:return s=r.sent,i=t.web3.utils.fromWei(s,"ether"),t.$store.commit("saveBalanceOf",i),r.next=9,a.allowance(n,t.tokenproxy);case 9:o=r.sent,c=t.web3.utils.fromWei(o,"ether"),t.$store.commit("saveAllowance",c),e();case 13:case"end":return r.stop()}}),r)}))),n.apply(this,arguments)}r()}))},en=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.unlockWallet();case 2:return e=this.$store.state.addr,r=this.$store.state.walletinstance,n=this.web3.utils.toWei("80000000","ether"),t.next=7,r.approve(this.tokenproxy,n,{from:e,gasPrice:this.gasPrice});case 7:a=t.sent,console.log(1234,a,"approve");case 9:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),rn=r("a352"),nn=function(){var t,e,r=this.$store.state.username,n=this.$store.state.username,a=this.$store.state.username+"collection",s=this.$store.state.username+"reply",i=this.$store.state.username+"comments",o=this.$store.state.username+"replytoauthor",c=window.indexedDB||window.webkitIndexedDB||window.mozIndexedDB||window.msIndexedDB;return c||alert("你的浏览器不支持IndexedDB"),new Promise((function(l){e=c.open(r,3),e.onupgradeneeded=function(e){if(t=e.target.result,!t.objectStoreNames.contains(n)){var r=t.createObjectStore(n,{keyPath:"id",autoIncrement:!0});r.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(a)){var c=t.createObjectStore(a,{keyPath:"id",autoIncrement:!0});c.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(s)){var l=t.createObjectStore(s,{keyPath:"id",autoIncrement:!0});l.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(i)){var u=t.createObjectStore(i,{keyPath:"id",autoIncrement:!0});u.createIndex("title","title",{unique:!1})}if(!t.objectStoreNames.contains(o))t.createObjectStore(o,{keyPath:"id",autoIncrement:!0})},e.onsuccess=function(e){t=e.target.result,console.log(666,"db版本号",t.version),t.onerror=function(t){alert("Database error:"+t.target.errorCode),console.dir(t.target)},l(t)},e.onerror=function(t){console.log(t,"数据库打开错误")}}))},an=function(t){var e=this.$store.state.username,r=t.transaction([e],"readwrite"),n=r.objectStore(e),a=[];return new Promise((function(t){n.openCursor().onsuccess=function(e){var r=e.target.result;r?(a.push(r.value),r.continue()):t(a)},n.openCursor().onerror=function(t){console.dir(t)}}))},sn=function(t){var e=this.$store.state.username+"collection",r=t.transaction([e],"readwrite"),n=r.objectStore(e),a=[];return new Promise((function(t){n.openCursor().onsuccess=function(e){var r=e.target.result;r?(a.push(r.value),r.continue()):t(a)},n.openCursor().onerror=function(t){console.dir(t)}}))},on=function(t,e,r){return new Promise((function(n){var a=e.transaction([r],"readwrite");a.oncomplete=function(t){console.log("536, 事务操作完成"),n()},a.onerror=function(t){console.log("事务操作出错"),console.dir(t)},a.onsuccess=function(t){console.log("事务操作成功")};var s=a.objectStore(r);s.add(t)}))},cn=function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ethereum.request({method:"eth_requestAccounts"});case 2:e=t.sent,r=e[0],r!==this.$store.state.addr&&(n=this.$store.state.nickname,this.$store.commit("saveUser",{nickname:n,addr:r}));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}();n["default"].use(yr["a"]),n["default"].use(xr.a);var ln,un,dn=Er.trim().split(/\s+/),mn=Rr.gasPrice;"undefined"!==typeof window.ethereum?(console.log(111,"metamask"),un=window.ethereum,ln=new Ar.a(window.ethereum)):(console.log(222,"无metamask"),alert("没有安装metamask！\n 请安装！ https://metamask.io "));var pn=Fr()({host:"steemjiang.com",port:"9001",protocol:"https"});n["default"].prototype.ipfs=pn;var fn=r("71d8").init("DYX36PF9I32G7TDQDFF97CSK24SXWZXIN9","ropsten","3000"),hn="0x9b6043F20454a1071534F8a35B3ad391512102F5",gn=hn.toLowerCase(),bn="0x7Ef4BcC1d24086Dd867Cd132d850E41a2B596052",vn="a2c4J6vY";function kn(t){return Ir.a.AES.encrypt(t,Ir.a.enc.Utf8.parse(vn),{mode:Ir.a.mode.ECB,padding:Ir.a.pad.Pkcs7}).toString()}function _n(t){return Ir.a.AES.decrypt(t,Ir.a.enc.Utf8.parse(vn),{mode:Ir.a.mode.ECB,padding:Ir.a.pad.Pkcs7}).toString(Ir.a.enc.Utf8)}n["default"].prototype.getstr=Nr,n["default"].prototype.getNum=Mr,n["default"].prototype.timeFormat=Dr,n["default"].prototype.formatSeconds=Hr,n["default"].prototype.titleFormat=Wr,n["default"].prototype.getTimeStamp=qr,n["default"].prototype.getPostInstance=Ur,n["default"].prototype.getArticles=Yr,n["default"].prototype.getOrderInstance=Gr,n["default"].prototype.getOrders=Kr,n["default"].prototype.getBountyInstance=Zr,n["default"].prototype.getTasks=zr,n["default"].prototype.getWalletInstance=Vr,n["default"].prototype.getExchangeInstance=Xr,n["default"].prototype.getBalanceAndAllowance=tn,n["default"].prototype.approve=en,n["default"].prototype.utf8ToStr=Jr,n["default"].prototype.weiToEth=Qr,n["default"].prototype.imgAdd=rn["a"],n["default"].prototype.initDatabase=nn,n["default"].prototype.getAllPosts=an,n["default"].prototype.getCollections=sn,n["default"].prototype.saveOneToDb=on,n["default"].prototype.TruffleContract=Lr.a,n["default"].prototype.web3=ln,n["default"].prototype.web3Provider=un,n["default"].prototype.axios=Or.a,n["default"].prototype.ethapi=fn,n["default"].prototype.abi=Pr.a,n["default"].prototype.blackLists=dn,n["default"].prototype.gasPrice=mn,n["default"].prototype.owner=gn,n["default"].prototype.tokenproxy=bn,n["default"].prototype.encypt=kn,n["default"].prototype.decrypt=_n,n["default"].prototype.unlockWallet=cn,n["default"].config.productionTip=!1,new n["default"]({router:gr,store:_r,render:function(t){return t(b)}}).$mount("#app"),gr.beforeEach((function(t,e,r){t.meta.requireAuth?_r.state.nickname?r():r({name:"login"}):r()}))},"58cc":function(t,e,r){},"59cb":function(t,e,r){"use strict";var n=r("0338"),a=r.n(n);a.a},"5abf":function(t,e,r){"use strict";var n=r("38e9"),a=r.n(n);a.a},"5e62":function(t,e,r){},6:function(t,e){},"606e":function(t,e,r){},"61f7":function(t,e,r){},"66e3":function(t,e,r){},"676c":function(t,e,r){},"6c00":function(t,e,r){"use strict";var n=r("88b7"),a=r.n(n);a.a},"6cac":function(t,e,r){},"6dce":function(t,e,r){"use strict";var n=r("66e3"),a=r.n(n);a.a},7:function(t,e){},"7a58":function(t,e,r){"use strict";var n=r("a9f3"),a=r.n(n);a.a},"7f16":function(t,e,r){"use strict";var n=r("990c"),a=r.n(n);a.a},"7f3b":function(t,e,r){"use strict";(function(t){r("fe8a"),r("e35a"),r("0d7a"),r("6db4"),r("b449");var n=r("5d83"),a=r("3a5e");e["a"]={name:"Article",data:function(){return{db:{},body:"",title:"",keywords:"",isLoading:!1,flag:!1}},methods:{post:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,c,l,u,d,m,p,f;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:return e.flag=!1,e.isLoading=!0,n=e.$store.state.nickname,a=e.$store.state.postinstance,s=e.$store.state.addr,i=e.getstr(),o=e.title,c=e.body,l=e.getTimeStamp(),u=e.keywords.trim().split(/\s+/),d={title:o,nickname:n,addr:s,permlink:i,body:c,keywords:u,created:l},m=t.from(JSON.stringify(d)),r.next=16,e.ipfs.add(m);case 16:return p=r.sent,f=p[0].hash,r.next=20,a.postArticle(f,{from:s,gasPrice:e.gasPrice});case 20:e.$store.commit("saveArticles",[]),e.$router.push({path:"/community"});case 22:case"end":return r.stop()}}),r)})))()},uploadimg:function(t,e){this.imgAdd(t,e)}},components:{Loading:a["a"]},mounted:function(){var t=this,e=this.$store.state.postinstance;function r(){return a.apply(this,arguments)}function a(){return a=Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=11;break}return console.log(777,"instance为空"),r.next=4,t.getPostInstance();case 4:return n=r.sent,r.next=7,t.getArticles(n);case 7:t.isLoading=!1,t.flag=!0,r.next=22;break;case 11:if(0!=t.$store.state.articles){r.next=19;break}return console.log(666,"如果文章更新！"),r.next=15,t.getArticles(e);case 15:t.isLoading=!1,t.flag=!0,r.next=22;break;case 19:console.log(2222,"啥也没干！"),t.isLoading=!1,t.flag=!0;case 22:case"end":return r.stop()}}),r)}))),a.apply(this,arguments)}r()}}}).call(this,r("fd40").Buffer)},8:function(t,e){},"86be":function(t,e,r){},"88b7":function(t,e,r){},"8b00":function(t,e,r){"use strict";var n=r("f220"),a=r.n(n);a.a},"8d72":function(t,e,r){"use strict";var n=r("9d34"),a=r.n(n);a.a},"8d8a":function(t,e,r){"use strict";var n=r("5657"),a=r.n(n);a.a},"8e37":function(t,e,r){"use strict";var n=r("5611"),a=r.n(n);a.a},9:function(t,e){},"95d0":function(t,e,r){},"990c":function(t,e,r){},"99de":function(t,e,r){"use strict";var n=r("6cac"),a=r.n(n);a.a},"9d34":function(t,e,r){},"9e0d":function(t,e,r){"use strict";var n=r("58cc"),a=r.n(n);a.a},"9e93":function(t){t.exports=JSON.parse('{"gasPrice":105000000000}')},a245:function(t,e,r){},a352:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return n}));r("e18c");var n=function(e,r){var n="https://steemjiang.com:8081/ipfs/",a=this,s=function(e){return new Promise((function(r,n){var s=t.from(e.result);a.ipfs.add(s).then((function(t){r(t[0].hash)})).catch((function(t){console.error(t),n(t)}))}))},i=new FileReader;i.readAsArrayBuffer(r),i.onloadend=function(t){s(i).then((function(t){a.$refs.md.$img2Url(e,n+t)}))}}}).call(this,r("fd40").Buffer)},a8ed:function(t,e,r){"use strict";var n=r("fe39"),a=r.n(n);a.a},a9f3:function(t,e,r){},aa0d:function(t,e,r){"use strict";var n=r("86be"),a=r.n(n);a.a},ab84:function(t,e,r){"use strict";var n=r("a245"),a=r.n(n);a.a},abc0:function(t,e){function r(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}r.keys=function(){return[]},r.resolve=r,t.exports=r,r.id="abc0"},c960:function(t,e,r){"use strict";var n=r("4e4e"),a=r.n(n);a.a},d1d7:function(t,e,r){"use strict";(function(t){r("053b"),r("fe8a"),r("b449");var n=r("5d83"),a=r("3a5e");e["a"]={name:"PostOrder",data:function(){return{db:{},body:"",content:"",name:"",price:"",contact:"",isLoading:!1,flag:!1,checkPriceFlag:!0}},methods:{checkPrice:function(){var t=/^\d+(\.\d+)?$/,e=t.test(this.price);this.checkPriceFlag=e},post:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,s,i,o,c,l,u,d,m,p,f,h,g,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.unlockWallet();case 2:if(""===e.name||""===e.content||""===e.contact||""===e.body){r.next=28;break}return e.flag=!1,e.isLoading=!0,n=e.$store.state.nickname,a=e.$store.state.ordertinstance,s=e.$store.state.addr,i=e.name,o=e.getNum(),c=e.price,l=e.encypt(e.content),u=e.encypt(e.contact),d=e.body,m=e.getTimeStamp(),p=e.web3.utils.toWei(c,"ether"),f={name:i,nickname:n,addr:s,orderNumber:o,content:l,contact:u,body:d,price:p,created:m},h=t.from(JSON.stringify(f)),r.next=20,e.ipfs.add(h);case 20:return g=r.sent,b=g[0].hash,r.next=24,a.postOrder(b,p,{from:s,gasPrice:e.gasPrice});case 24:e.$store.commit("saveOrders",[]),e.$router.push({path:"/market"}),r.next=29;break;case 28:alert("名称、链接、描述等不能为空，请填写！");case 29:case"end":return r.stop()}}),r)})))()},uploadimg:function(t,e){this.imgAdd(t,e)}},components:{Loading:a["a"]},mounted:function(){var t=this,e=this.$store.state.ordertinstance;function r(){return a.apply(this,arguments)}function a(){return a=Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(0!==Object.keys(e).length){r.next=10;break}return r.next=3,t.getOrderInstance();case 3:return n=r.sent,r.next=6,t.getOrders(n);case 6:t.isLoading=!1,t.flag=!0,r.next=19;break;case 10:if(0!=t.$store.state.orders){r.next=17;break}return r.next=13,t.getOrders(e);case 13:t.isLoading=!1,t.flag=!0,r.next=19;break;case 17:t.isLoading=!1,t.flag=!0;case 19:case"end":return r.stop()}}),r)}))),a.apply(this,arguments)}r()}}}).call(this,r("fd40").Buffer)},d3ed:function(t,e,r){},d51c:function(t,e,r){},d7a1:function(t,e,r){t.exports=r.p+"img/logo.5c9d8489.svg"},d960:function(t,e,r){"use strict";var n=r("fc14"),a=r.n(n);a.a},e52c:function(t,e,r){"use strict";var n=r("48c4"),a=r.n(n);a.a},e564:function(t){t.exports=JSON.parse('"0x69F8060a865f5BDE37a515B1892835062AA73D64 spaminator mack-bot liebin"')},f0a2:function(t,e,r){},f220:function(t,e,r){},f8a4:function(t,e,r){},fb7f:function(t,e,r){"use strict";var n=r("f0a2"),a=r.n(n);a.a},fc14:function(t,e,r){},fe39:function(t,e,r){},ffd8:function(t,e,r){}});
//# sourceMappingURL=app.09d73e8f.js.map